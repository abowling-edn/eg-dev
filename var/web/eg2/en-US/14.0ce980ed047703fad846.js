(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{CAXJ:function(l,n,u){"use strict";u.r(n);var e=u("8Y7J");class t{}var a=u("pMnS"),o=u("9AJC"),i=u("dix8"),r=u("ufrD"),s=u("s7LF"),c=u("SVse"),b=u("G0yt"),d=u("gBxT"),p=u("wVJ/"),h=u("8PDw"),g=u("OXuP"),m=u("cm5s"),f=u("wN9v"),C=u("iInd"),v=u("6rhm"),y=u("36iw"),q=u("StZw"),k=u("tNQm"),I=u("G8BM"),_=u("OsfI"),w=u("rRT/"),x=u("mW9/"),M=u("avZ9"),S=u("XN9O");class T{constructor(l,n,u,e,t){this.router=l,this.route=n,this.org=u,this.cat=e,this.catUrl=t,this.routeIndex=0}createContext(){this.searchContext=this.catUrl.fromUrlParams(this.route.snapshot.queryParamMap),this.searchContext.org=this.org,this.searchContext.isStaff=!0,this.applySearchDefaults()}cloneContext(l){const n=this.catUrl.toUrlParams(l);return this.catUrl.fromUrlHash(n)}applySearchDefaults(){this.searchContext.searchOrg||(this.searchContext.searchOrg=this.defaultSearchOrg||this.org.root()),this.searchContext.pager.limit||(this.searchContext.pager.limit=this.defaultSearchLimit||10)}search(){if(!this.searchContext.isSearchable())return;const l=this.catUrl.toUrlParams(this.searchContext);l.ridx=""+this.routeIndex++,this.router.navigate(["/staff/catalog/search"],{queryParams:l})}browse(){if(!this.searchContext.browseSearch.isSearchable())return;const l=this.catUrl.toUrlParams(this.searchContext);l.ridx=""+this.routeIndex++,this.router.navigate(["/staff/catalog/browse"],{queryParams:l})}cnBrowse(){if(!this.searchContext.cnBrowseSearch.isSearchable())return;const l=this.catUrl.toUrlParams(this.searchContext);l.ridx=""+this.routeIndex++,this.router.navigate(["/staff/catalog/cnbrowse"],{queryParams:l})}getAuthorSearchParams(l){const n=this.cloneContext(this.searchContext);return n.reset(),n.termSearch.fieldClass=["author"],n.termSearch.query=[l.display.author],this.catUrl.toUrlParams(n)}}var K=u("EQoe");class D{constructor(l,n){this.params={},this.name=l,this.params=n}}class N extends w.a{constructor(l,n,u,e,t,a,o,i,r){super(r),this.org=l,this.store=n,this.serverStore=u,this.cache=e,this.strings=t,this.cat=a,this.catUrl=o,this.staffCat=i,this.modal=r,this.recentSearchesCount=0,this.templates=[],this.searches=[],this.store.addLoginSessionKey("eg.catalog.recent_searches")}ngOnInit(){this.context=this.staffCat.searchContext,this.serverStore.getItem("opac.staff_saved_search.size").then(l=>{l&&(this.recentSearchesCount=Number(l),this.getSearches().then(l=>{this.searches.forEach(l=>l.params.ridx=++this.staffCat.routeIndex),this.saveSearch(this.context),this.cat.onSearchComplete.subscribe(l=>this.saveSearch(l))}))}),this.getTemplates()}selectedTemplate(){return this.staffCat.selectedTemplate}getSearches(){if(this.searches=[],this.searchesCacheKey)return this.cache.getItem(this.searchesCacheKey,"searches").then(l=>this.searches=l||[]);const l=this.store.getLoginSessionItem("eg.catalog.recent_searches");return l?(this.searchesCacheKey=l,this.cache.getItem(this.searchesCacheKey,"searches").then(l=>this.searches=l||[])):this.cache.setItem(null,"searches",[]).then(l=>{this.searchesCacheKey=l,this.store.setLoginSessionItem("eg.catalog.recent_searches",l)})}searchSelected(l){l.params.ridx=++this.staffCat.routeIndex}sortSearches(){return this.searches.sort((l,n)=>l.addTime>n.addTime?-1:1)}deleteSearches(){this.confirmDeleteSearches.open().subscribe(l=>{l&&(this.searches=[],this.cache.setItem(this.searchesCacheKey,"searches",[]))})}getSearchPath(l){return"browse"===l.params.searchTab?"/staff/catalog/browse":"/staff/catalog/search"}saveSearch(l){let n,u=!1;if(this.searches.forEach(n=>{this.catUrl.fromUrlHash(n.params).equals(l)&&(u=!0)}),!u){switch(this.searchTab){case"term":n=l.termSearch.query[0];break;case"marc":n=l.marcSearch.values[0];break;case"ident":n=l.identSearch.value;break;case"browse":n=l.browseSearch.value;break;case"cnbrowse":n=l.cnBrowseSearch.value}n&&this.strings.interpolate("eg.catalog.recent_search.label",{query:n,tab:this.searchTab}).then(n=>{const u=this.prepareSearch(l),e=new D(n,u);e.addTime=(new Date).getTime(),this.searches.unshift(e),this.searches.length>this.recentSearchesCount&&(this.searches.length=this.recentSearchesCount),this.cache.setItem(this.searchesCacheKey,"searches",this.searches).then(l=>e.params.ridx=++this.staffCat.routeIndex)})}}getTemplates(){return this.templates=[],this.serverStore.getItem("eg.catalog.search_templates").then(l=>{l&&l.length&&(this.templates=l,this.templates.forEach(l=>l.params.ridx=++this.staffCat.routeIndex))})}sortTemplates(){return this.templates.sort((l,n)=>l.name.toLowerCase()<n.name.toLowerCase()?-1:1)}templateSelected(l){this.staffCat.selectedTemplate=l.name,l.params.ridx=++this.staffCat.routeIndex,console.log("selected template = ",this.staffCat.selectedTemplate)}addDummyQueries(l){l.termSearch.query=l.termSearch.query.map(l=>"x"),l.marcSearch.values=l.marcSearch.values.map(l=>"x"),l.browseSearch.value="x",l.identSearch.value="x"}removeDummyQueries(l){l.query=Array.isArray(l.query)?l.query.map(l=>""):"",l.marcValue=Array.isArray(l.marcValue)?l.marcValue.map(l=>""):"",l.identQuery="",l.browseTerm=""}prepareSearch(l,n){const u=l.clone();n&&this.addDummyQueries(u),u.scrub(this.searchTab);const e=this.catUrl.toUrlParams(u);return n&&this.removeDummyQueries(e),delete e.org,delete e.ridx,e.searchTab=this.searchTab,e}saveTemplate(){if(!this.templateName)return Promise.resolve();this.staffCat.selectedTemplate=this.templateName;const l=this.prepareSearch(this.context,!0);return this.templates.push(new D(this.templateName,l)),this.applyTemplateChanges().then(l=>this.close())}applyTemplateChanges(){return this.serverStore.setItem("eg.catalog.search_templates",this.templates)}deleteTemplate(){this.confirmDelete.open().subscribe(l=>{if(!l)return;const n=[];this.templates.forEach(l=>{l.name!==this.staffCat.selectedTemplate&&n.push(l)}),this.templates=n,this.staffCat.selectedTemplate="",this.applyTemplateChanges()})}deleteAllTemplates(){this.confirmDeleteAll.open().subscribe(l=>{l&&(this.templates=[],this.staffCat.selectedTemplate="",this.applyTemplateChanges())})}}var P=e.ob({encapsulation:2,styles:[],data:{}});function H(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Search:"]))],null,null)}function A(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Identifier:"]))],null,null)}function F(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["MARC:"]))],null,null)}function O(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Browse:"]))],null,null)}function E(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,9,null,null,null,null,null,null,null)),e.pb(1,16384,null,0,c.v,[],{ngSwitch:[0,"ngSwitch"]},null),(l()(),e.fb(16777216,null,null,1,null,H)),e.pb(3,278528,null,0,c.w,[e.N,e.K,c.v],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),e.fb(16777216,null,null,1,null,A)),e.pb(5,278528,null,0,c.w,[e.N,e.K,c.v],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),e.fb(16777216,null,null,1,null,F)),e.pb(7,278528,null,0,c.w,[e.N,e.K,c.v],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),e.fb(16777216,null,null,1,null,O)),e.pb(9,278528,null,0,c.w,[e.N,e.K,c.v],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),e.Kb(10,null,[" ","\n"]))],(function(l,n){l(n,1,0,n.context.tab),l(n,3,0,"term"),l(n,5,0,"ident"),l(n,7,0,"marc"),l(n,9,0,"browse")}),(function(l,n){l(n,10,0,n.context.query)}))}function R(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,"button",[["class","dropdown-item font-italic"]],[[8,"disabled",0]],null,null,null,null)),(l()(),e.Kb(-1,null,["No Recent Searches"]))],null,(function(l,n){l(n,0,0,!0)}))}function B(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,"button",[["class","dropdown-item"]],null,[[null,"click"]],(function(l,n,u){var t=!0,a=l.component;return"click"===n&&(t=!1!==e.Cb(l,1).onClick()&&t),"click"===n&&(t=!1!==a.searchSelected(l.context.$implicit)&&t),t}),null,null)),e.pb(1,16384,null,0,C.m,[C.l,C.a,[8,null],e.C,e.k],{queryParams:[0,"queryParams"],routerLink:[1,"routerLink"]},null),(l()(),e.Kb(2,null,["",""]))],(function(l,n){l(n,1,0,n.context.$implicit.params,n.component.getSearchPath(n.context.$implicit))}),(function(l,n){l(n,2,0,n.context.$implicit.name)}))}function L(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,19,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,18,"div",[["ngbDropdown",""],["placement","bottom-right"]],[[2,"show",null]],null,null,null,null)),e.pb(2,1720320,null,3,b.v,[e.h,b.x,c.e,e.y,e.k,e.C,[2,b.K]],{placement:[0,"placement"]},null),e.Ib(603979776,5,{_menu:0}),e.Ib(603979776,6,{_menuElement:0}),e.Ib(603979776,7,{_anchor:0}),(l()(),e.qb(6,0,null,null,3,"button",[["aria-haspopup","true"],["class","btn btn-light dropdown-toggle"],["id","recentSearches"],["ngbDropdownToggle",""]],[[1,"aria-expanded",0]],[[null,"click"],[null,"keydown.ArrowUp"],[null,"keydown.ArrowDown"],[null,"keydown.Home"],[null,"keydown.End"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Cb(l,7).dropdown.toggle()&&t),"keydown.ArrowUp"===n&&(t=!1!==e.Cb(l,7).dropdown.onKeyDown(u)&&t),"keydown.ArrowDown"===n&&(t=!1!==e.Cb(l,7).dropdown.onKeyDown(u)&&t),"keydown.Home"===n&&(t=!1!==e.Cb(l,7).dropdown.onKeyDown(u)&&t),"keydown.End"===n&&(t=!1!==e.Cb(l,7).dropdown.onKeyDown(u)&&t),t}),null,null)),e.pb(7,16384,null,0,b.A,[b.v,e.k],null,null),e.Hb(2048,[[7,4]],b.w,null,[b.A]),(l()(),e.Kb(-1,null,["Recent Searches"])),(l()(),e.qb(10,0,[[6,0]],null,9,"div",[["aria-labelledby","recentSearches"],["ngbDropdownMenu",""]],[[2,"dropdown-menu",null],[2,"show",null],[1,"x-placement",0]],[[null,"keydown.ArrowUp"],[null,"keydown.ArrowDown"],[null,"keydown.Home"],[null,"keydown.End"],[null,"keydown.Enter"],[null,"keydown.Space"]],(function(l,n,u){var t=!0;return"keydown.ArrowUp"===n&&(t=!1!==e.Cb(l,11).dropdown.onKeyDown(u)&&t),"keydown.ArrowDown"===n&&(t=!1!==e.Cb(l,11).dropdown.onKeyDown(u)&&t),"keydown.Home"===n&&(t=!1!==e.Cb(l,11).dropdown.onKeyDown(u)&&t),"keydown.End"===n&&(t=!1!==e.Cb(l,11).dropdown.onKeyDown(u)&&t),"keydown.Enter"===n&&(t=!1!==e.Cb(l,11).dropdown.onKeyDown(u)&&t),"keydown.Space"===n&&(t=!1!==e.Cb(l,11).dropdown.onKeyDown(u)&&t),t}),null,null)),e.pb(11,16384,[[5,4]],1,b.y,[b.v],null,null),e.Ib(603979776,8,{menuItems:1}),(l()(),e.qb(13,0,null,null,1,"button",[["class","dropdown-item"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.deleteSearches()&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Clear Recent Searches"])),(l()(),e.qb(15,0,null,null,0,"div",[["class","dropdown-divider"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,R)),e.pb(17,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,B)),e.pb(19,278528,null,0,c.o,[e.N,e.K,e.r],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){var u=n.component;l(n,2,0,"bottom-right"),l(n,17,0,0===u.searches.length),l(n,19,0,u.sortSearches())}),(function(l,n){var u=n.component;l(n,1,0,e.Cb(n,2).isOpen()),l(n,6,0,e.Cb(n,7).dropdown.isOpen()),l(n,10,0,!0,e.Cb(n,11).dropdown.isOpen(),e.Cb(n,11).placement),l(n,13,0,0===u.searches.length)}))}function U(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,"button",[["class","dropdown-item font-italic"]],[[8,"disabled",0]],null,null,null,null)),(l()(),e.Kb(-1,null,["No Saved Templates"]))],null,(function(l,n){l(n,0,0,!0)}))}function j(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,5,"button",[["class","dropdown-item"]],null,[[null,"click"]],(function(l,n,u){var t=!0,a=l.component;return"click"===n&&(t=!1!==e.Cb(l,4).onClick()&&t),"click"===n&&(t=!1!==a.templateSelected(l.context.$implicit)&&t),t}),null,null)),e.Hb(512,null,c.N,c.O,[e.r,e.s,e.k,e.C]),e.pb(2,278528,null,0,c.n,[c.N],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),e.Fb(3,{"font-weight-bold":0}),e.pb(4,16384,null,0,C.m,[C.l,C.a,[8,null],e.C,e.k],{queryParams:[0,"queryParams"],routerLink:[1,"routerLink"]},null),(l()(),e.Kb(5,null,["",""]))],(function(l,n){var u=n.component,e=l(n,3,0,n.context.$implicit.name===u.selectedTemplate());l(n,2,0,"dropdown-item",e),l(n,4,0,n.context.$implicit.params,u.getSearchPath(n.context.$implicit))}),(function(l,n){l(n,5,0,n.context.$implicit.name)}))}function $(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,5,"div",[["class","modal-header bg-info"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"h4",[["class","modal-title"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Save Template"])),(l()(),e.qb(3,0,null,null,2,"button",[["aria-label","Close"],["class","close"],["type","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.close()&&e),e}),null,null)),(l()(),e.qb(4,0,null,null,1,"span",[["aria-hidden","true"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Ã—"])),(l()(),e.qb(6,0,null,null,10,"div",[["class","modal-body"]],null,null,null,null,null)),(l()(),e.qb(7,0,null,null,9,"div",[["class","row"]],null,null,null,null,null)),(l()(),e.qb(8,0,null,null,1,"div",[["class","col-lg-4"],["id","templateNameLabel"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Template Name:"])),(l()(),e.qb(10,0,null,null,6,"div",[["class","col-lg-6"]],null,null,null,null,null)),(l()(),e.qb(11,0,null,null,5,"input",[["aria-labelledby","templateNameLabel"],["class","form-control"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,u){var t=!0,a=l.component;return"input"===n&&(t=!1!==e.Cb(l,12)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,12).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Cb(l,12)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Cb(l,12)._compositionEnd(u.target.value)&&t),"ngModelChange"===n&&(t=!1!==(a.templateName=u)&&t),t}),null,null)),e.pb(12,16384,null,0,s.d,[e.C,e.k,[2,s.a]],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.d]),e.pb(14,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(16,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(17,0,null,null,4,"div",[["class","modal-footer"]],null,null,null,null,null)),(l()(),e.qb(18,0,null,null,1,"button",[["class","btn btn-success"],["type","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.saveTemplate()&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Save"])),(l()(),e.qb(20,0,null,null,1,"button",[["class","btn btn-warning"],["type","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.close()&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Cancel"]))],(function(l,n){l(n,14,0,n.component.templateName)}),(function(l,n){l(n,11,0,e.Cb(n,16).ngClassUntouched,e.Cb(n,16).ngClassTouched,e.Cb(n,16).ngClassPristine,e.Cb(n,16).ngClassDirty,e.Cb(n,16).ngClassValid,e.Cb(n,16).ngClassInvalid,e.Cb(n,16).ngClassPending)}))}function V(l){return e.Mb(0,[e.Ib(671088640,1,{dialogContent:0}),e.Ib(402653184,2,{confirmDelete:0}),e.Ib(402653184,3,{confirmDeleteAll:0}),e.Ib(402653184,4,{confirmDeleteSearches:0}),(l()(),e.qb(4,0,null,null,1,"eg-confirm-dialog",[["dialogTitle","Confirm Delete"]],null,null,null,v.b,v.a)),e.pb(5,114688,[[2,4],["confirmDelete",4]],0,y.a,[b.E],{dialogTitle:[0,"dialogTitle"],dialogBody:[1,"dialogBody"]},null),(l()(),e.qb(6,0,null,null,1,"eg-confirm-dialog",[["dialogBody","Delete all saved templates?"],["dialogTitle","Confirm Delete All"]],null,null,null,v.b,v.a)),e.pb(7,114688,[[3,4],["confirmDeleteAll",4]],0,y.a,[b.E],{dialogTitle:[0,"dialogTitle"],dialogBody:[1,"dialogBody"]},null),(l()(),e.qb(8,0,null,null,1,"eg-confirm-dialog",[["dialogBody","Clear all recent searches?"],["dialogTitle","Confirm clear searches"]],null,null,null,v.b,v.a)),e.pb(9,114688,[[4,4],["confirmDeleteSearches",4]],0,y.a,[b.E],{dialogTitle:[0,"dialogTitle"],dialogBody:[1,"dialogBody"]},null),(l()(),e.fb(0,[["searchName",2]],null,0,null,E)),(l()(),e.qb(11,0,null,null,1,"eg-string",[["key","eg.catalog.recent_search.label"]],null,null,null,q.b,q.a)),e.pb(12,114688,null,0,k.a,[e.k,I.a],{key:[0,"key"],template:[1,"template"]},null),(l()(),e.qb(13,0,null,null,25,"div",[["class","d-flex justify-content-end"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,L)),e.pb(15,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(16,0,null,null,22,"div",[["ngbDropdown",""],["placement","bottom-right"]],[[2,"show",null]],null,null,null,null)),e.pb(17,1720320,null,3,b.v,[e.h,b.x,c.e,e.y,e.k,e.C,[2,b.K]],{placement:[0,"placement"]},null),e.Ib(603979776,9,{_menu:0}),e.Ib(603979776,10,{_menuElement:0}),e.Ib(603979776,11,{_anchor:0}),(l()(),e.qb(21,0,null,null,3,"button",[["aria-haspopup","true"],["class","btn btn-light dropdown-toggle"],["id","searchTemplates"],["ngbDropdownToggle",""]],[[1,"aria-expanded",0]],[[null,"click"],[null,"keydown.ArrowUp"],[null,"keydown.ArrowDown"],[null,"keydown.Home"],[null,"keydown.End"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Cb(l,22).dropdown.toggle()&&t),"keydown.ArrowUp"===n&&(t=!1!==e.Cb(l,22).dropdown.onKeyDown(u)&&t),"keydown.ArrowDown"===n&&(t=!1!==e.Cb(l,22).dropdown.onKeyDown(u)&&t),"keydown.Home"===n&&(t=!1!==e.Cb(l,22).dropdown.onKeyDown(u)&&t),"keydown.End"===n&&(t=!1!==e.Cb(l,22).dropdown.onKeyDown(u)&&t),t}),null,null)),e.pb(22,16384,null,0,b.A,[b.v,e.k],null,null),e.Hb(2048,[[11,4]],b.w,null,[b.A]),(l()(),e.Kb(-1,null,["Search Templates"])),(l()(),e.qb(25,0,[[10,0]],null,13,"div",[["aria-labelledby","searchTemplates"],["ngbDropdownMenu",""]],[[2,"dropdown-menu",null],[2,"show",null],[1,"x-placement",0]],[[null,"keydown.ArrowUp"],[null,"keydown.ArrowDown"],[null,"keydown.Home"],[null,"keydown.End"],[null,"keydown.Enter"],[null,"keydown.Space"]],(function(l,n,u){var t=!0;return"keydown.ArrowUp"===n&&(t=!1!==e.Cb(l,26).dropdown.onKeyDown(u)&&t),"keydown.ArrowDown"===n&&(t=!1!==e.Cb(l,26).dropdown.onKeyDown(u)&&t),"keydown.Home"===n&&(t=!1!==e.Cb(l,26).dropdown.onKeyDown(u)&&t),"keydown.End"===n&&(t=!1!==e.Cb(l,26).dropdown.onKeyDown(u)&&t),"keydown.Enter"===n&&(t=!1!==e.Cb(l,26).dropdown.onKeyDown(u)&&t),"keydown.Space"===n&&(t=!1!==e.Cb(l,26).dropdown.onKeyDown(u)&&t),t}),null,null)),e.pb(26,16384,[[9,4]],1,b.y,[b.v],null,null),e.Ib(603979776,12,{menuItems:1}),(l()(),e.qb(28,0,null,null,1,"button",[["class","dropdown-item"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.open()&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Save Template"])),(l()(),e.qb(30,0,null,null,1,"button",[["class","dropdown-item"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.deleteTemplate()&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Delete Selected"])),(l()(),e.qb(32,0,null,null,1,"button",[["class","dropdown-item"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.deleteAllTemplates()&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Delete All Templates"])),(l()(),e.qb(34,0,null,null,0,"div",[["class","dropdown-divider"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,U)),e.pb(36,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,j)),e.pb(38,278528,null,0,c.o,[e.N,e.K,e.r],{ngForOf:[0,"ngForOf"]},null),(l()(),e.fb(0,[[1,2],["dialogContent",2]],null,0,null,$))],(function(l,n){var u=n.component;l(n,5,0,"Confirm Delete",e.ub(1,"Delete saved search template '",u.selectedTemplate(),"'?")),l(n,7,0,"Confirm Delete All","Delete all saved templates?"),l(n,9,0,"Confirm clear searches","Clear all recent searches?"),l(n,12,0,"eg.catalog.recent_search.label",e.Cb(n,10)),l(n,15,0,u.recentSearchesCount>0),l(n,17,0,"bottom-right"),l(n,36,0,0===u.templates.length),l(n,38,0,u.sortTemplates())}),(function(l,n){var u=n.component;l(n,16,0,e.Cb(n,17).isOpen()),l(n,21,0,e.Cb(n,22).dropdown.isOpen()),l(n,25,0,!0,e.Cb(n,26).dropdown.isOpen(),e.Cb(n,26).placement),l(n,28,0,"cnbrowse"===u.searchTab),l(n,30,0,!u.selectedTemplate()),l(n,32,0,0===u.templates.length)}))}var G=u("1qTD"),z=u("1tmW"),W=u("YRS1"),J=u("wBwE"),Q=u("Osig"),Z=u("EQDH"),Y=u("LMfH"),X=u("E45d");class ll{constructor(l,n,u,e,t){this.router=l,this.net=n,this.auth=u,this.printer=e,this.basket=t,this.basketAction=""}ngOnInit(){}basketCount(){return this.basket.recordCount()}applyAction(l){switch(this.basketAction=l,console.debug("Performing basket action",this.basketAction),this.basketAction){case"view":this.router.navigate(["/staff/catalog/search"],{queryParams:{showBasket:!0}});break;case"clear":this.basket.removeAllRecordIds();break;case"hold":this.basket.getRecordIds().then(l=>{this.router.navigate(["/staff/catalog/hold/T"],{queryParams:{target:l}})});break;case"print":this.basket.getRecordIds().then(l=>{this.net.request("open-ils.search","open-ils.search.biblio.record.print",l).subscribe(l=>{const n=l.template_output().data();this.printer.print({text:n,printContext:"default"})})});break;case"email":this.basket.getRecordIds().then(l=>{this.net.request("open-ils.search","open-ils.search.biblio.record.email",this.auth.token(),l).toPromise()});break;case"export_marc":this.router.navigate(["/staff/cat/vandelay/export/basket"],{queryParamsHandling:"merge"});break;case"bucket":this.basket.getRecordIds().then(l=>{this.addToBucketDialog.bucketClass="biblio",this.addToBucketDialog.itemIds=l,this.addToBucketDialog.open({size:"lg"})})}setTimeout(()=>this.basketAction="")}}var nl=e.ob({encapsulation:2,styles:[],data:{}});function ul(l){return e.Mb(0,[e.Ib(402653184,1,{addToBucketDialog:0}),(l()(),e.qb(1,0,null,null,1,"eg-bucket-dialog",[],null,null,null,G.b,G.a)),e.pb(2,114688,[[1,4],["addBasketToBucketDialog",4]],0,z.a,[b.E,e.C,W.a,J.a,Q.b,Z.a,h.a],null,null),(l()(),e.qb(3,0,null,null,41,"div",[["class","d-flex justify-content-end"]],null,null,null,null,null)),(l()(),e.qb(4,0,null,null,8,"div",[["class","pr-1"]],null,null,null,null,null)),(l()(),e.qb(5,0,null,null,7,"div",[["class","float-right"]],null,null,null,null,null)),(l()(),e.qb(6,0,null,null,6,"a",[["class","label-with-material-icon"],["routerLink","/staff/catalog/search"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Cb(l,7).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.pb(7,671744,null,0,C.n,[C.l,C.a,c.m],{queryParams:[0,"queryParams"],routerLink:[1,"routerLink"]},null),e.Fb(8,{showBasket:0}),(l()(),e.qb(9,0,null,null,1,"span",[["class","material-icons"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["shopping_basket"])),(l()(),e.qb(11,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Kb(12,null,["(",")"])),(l()(),e.qb(13,0,null,null,26,"div",[["class","pr-1"]],null,null,null,null,null)),(l()(),e.qb(14,0,null,null,25,"div",[["ngbDropdown",""],["placement","bottom-right"]],[[2,"show",null]],null,null,null,null)),e.pb(15,1720320,null,3,b.v,[e.h,b.x,c.e,e.y,e.k,e.C,[2,b.K]],{placement:[0,"placement"]},null),e.Ib(603979776,2,{_menu:0}),e.Ib(603979776,3,{_menuElement:0}),e.Ib(603979776,4,{_anchor:0}),(l()(),e.qb(19,0,null,null,3,"button",[["aria-haspopup","true"],["class","btn btn-light dropdown-toggle"],["id","basketActions"],["ngbDropdownToggle",""]],[[8,"disabled",0],[1,"aria-expanded",0]],[[null,"click"],[null,"keydown.ArrowUp"],[null,"keydown.ArrowDown"],[null,"keydown.Home"],[null,"keydown.End"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Cb(l,20).dropdown.toggle()&&t),"keydown.ArrowUp"===n&&(t=!1!==e.Cb(l,20).dropdown.onKeyDown(u)&&t),"keydown.ArrowDown"===n&&(t=!1!==e.Cb(l,20).dropdown.onKeyDown(u)&&t),"keydown.Home"===n&&(t=!1!==e.Cb(l,20).dropdown.onKeyDown(u)&&t),"keydown.End"===n&&(t=!1!==e.Cb(l,20).dropdown.onKeyDown(u)&&t),t}),null,null)),e.pb(20,16384,null,0,b.A,[b.v,e.k],null,null),e.Hb(2048,[[4,4]],b.w,null,[b.A]),(l()(),e.Kb(-1,null,["Basket Actions"])),(l()(),e.qb(23,0,[[3,0]],null,16,"div",[["aria-labelledby","basketActions"],["ngbDropdownMenu",""]],[[2,"dropdown-menu",null],[2,"show",null],[1,"x-placement",0]],[[null,"keydown.ArrowUp"],[null,"keydown.ArrowDown"],[null,"keydown.Home"],[null,"keydown.End"],[null,"keydown.Enter"],[null,"keydown.Space"]],(function(l,n,u){var t=!0;return"keydown.ArrowUp"===n&&(t=!1!==e.Cb(l,24).dropdown.onKeyDown(u)&&t),"keydown.ArrowDown"===n&&(t=!1!==e.Cb(l,24).dropdown.onKeyDown(u)&&t),"keydown.Home"===n&&(t=!1!==e.Cb(l,24).dropdown.onKeyDown(u)&&t),"keydown.End"===n&&(t=!1!==e.Cb(l,24).dropdown.onKeyDown(u)&&t),"keydown.Enter"===n&&(t=!1!==e.Cb(l,24).dropdown.onKeyDown(u)&&t),"keydown.Space"===n&&(t=!1!==e.Cb(l,24).dropdown.onKeyDown(u)&&t),t}),null,null)),e.pb(24,16384,[[2,4]],1,b.y,[b.v],null,null),e.Ib(603979776,5,{menuItems:1}),(l()(),e.qb(26,0,null,null,1,"button",[["class","dropdown-item"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.applyAction("view")&&e),e}),null,null)),(l()(),e.Kb(-1,null,["View Basket"])),(l()(),e.qb(28,0,null,null,1,"button",[["class","dropdown-item"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.applyAction("hold")&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Place Hold"])),(l()(),e.qb(30,0,null,null,1,"button",[["class","dropdown-item"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.applyAction("print")&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Print Title Details"])),(l()(),e.qb(32,0,null,null,1,"button",[["class","dropdown-item"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.applyAction("email")&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Email Title Details"])),(l()(),e.qb(34,0,null,null,1,"button",[["class","dropdown-item"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.applyAction("bucket")&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Add Basket to Bucket"])),(l()(),e.qb(36,0,null,null,1,"button",[["class","dropdown-item"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.applyAction("export_marc")&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Export Records"])),(l()(),e.qb(38,0,null,null,1,"button",[["class","dropdown-item"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.applyAction("clear")&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Clear Basket"])),(l()(),e.qb(40,0,null,null,4,"div",[],null,null,null,null,null)),(l()(),e.qb(41,0,null,null,3,"a",[["queryParamsHandling","merge"],["routerLink","/staff/catalog/prefs"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Cb(l,42).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.pb(42,671744,null,0,C.n,[C.l,C.a,c.m],{queryParamsHandling:[0,"queryParamsHandling"],routerLink:[1,"routerLink"]},null),(l()(),e.qb(43,0,null,null,1,"button",[["class","btn btn-light"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Catalog Preferences"]))],(function(l,n){l(n,2,0);var u=l(n,8,0,!0);l(n,7,0,u,"/staff/catalog/search"),l(n,15,0,"bottom-right"),l(n,42,0,"merge","/staff/catalog/prefs")}),(function(l,n){var u=n.component;l(n,6,0,e.Cb(n,7).target,e.Cb(n,7).href),l(n,12,0,u.basketCount()),l(n,14,0,e.Cb(n,15).isOpen()),l(n,19,0,!u.basketCount(),e.Cb(n,20).dropdown.isOpen()),l(n,23,0,!0,e.Cb(n,24).dropdown.isOpen(),e.Cb(n,24).placement),l(n,41,0,e.Cb(n,42).target,e.Cb(n,42).href)}))}const el={expert:"marc",numeric:"ident",advanced:"term"};class tl{constructor(l,n,u,e,t,a){this.renderer=l,this.router=n,this.route=u,this.org=e,this.cat=t,this.staffCat=a,this.ccvmMap={},this.cmfMap={},this.showSearchFilters=!1,this.showThyself=!0,this.orgOnChange=l=>{this.context.searchOrg=l,this.refreshCopyLocations()},this.copyLocations=[],this.route.queryParams.subscribe(l=>{l.searchTab&&(this.searchTab=l.searchTab)}),this.router.events.subscribe(l=>{l instanceof C.d&&(this.showThyself=!l.url.match(/catalog\/record/))})}ngOnInit(){this.ccvmMap=this.cat.ccvmMap,this.cmfMap=this.cat.cmfMap,this.context=this.staffCat.searchContext,this.showSearchFilters=this.filtersActive()}ngAfterViewInit(){setTimeout(()=>{""===this.context.identSearch.queryType&&(this.context.identSearch.queryType="identifier|isbn"),this.searchTab||(this.searchTab=this.context.marcSearch.isSearchable()?"marc":this.context.identSearch.isSearchable()?"ident":this.context.browseSearch.isSearchable()?"browse":this.context.termSearch.isSearchable()?"term":el[this.staffCat.defaultTab]||this.staffCat.defaultTab||"term","term"===this.searchTab&&this.refreshCopyLocations()),this.focusTabInput()})}onTabChange(l){this.searchTab=l.nextId,setTimeout(()=>this.focusTabInput())}focusTabInput(){let l;switch(this.searchTab){case"ident":l="#ident-query-input";break;case"marc":l="#first-marc-tag";break;case"browse":l="#browse-term-input";break;case"cnbrowse":l="#cnbrowse-term-input";break;default:this.refreshCopyLocations(),l="#first-query-input"}try{this.renderer.selectRootElement(l).focus()}catch(n){}}showFilters(){return this.showSearchFilters||this.filtersActive()}toggleFilters(){this.showSearchFilters=!this.showSearchFilters,this.refreshCopyLocations()}filtersActive(){if(""!==this.context.termSearch.copyLocations[0])return!0;let l=!1;return Object.keys(this.context.termSearch.ccvmFilters).forEach(n=>{""!==this.context.termSearch.ccvmFilters[n][0]&&(l=!0)}),l}refreshCopyLocations(){if(!this.showFilters())return;const l=this.context.searchOrg;l.id()!==this.org.root().id()?this.cat.fetchCopyLocations(l).then(()=>this.copyLocations=this.cat.copyLocations):this.copyLocations=[]}orgName(l){return this.org.get(l).shortname()}addSearchRow(l){this.context.termSearch.query.splice(l,0,""),this.context.termSearch.fieldClass.splice(l,0,"keyword"),this.context.termSearch.joinOp.splice(l,0,"&&"),this.context.termSearch.matchOp.splice(l,0,"contains")}delSearchRow(l){this.context.termSearch.query.splice(l,1),this.context.termSearch.fieldClass.splice(l,1),this.context.termSearch.joinOp.splice(l,1),this.context.termSearch.matchOp.splice(l,1)}addMarcSearchRow(l){this.context.marcSearch.tags.splice(l,0,""),this.context.marcSearch.subfields.splice(l,0,""),this.context.marcSearch.values.splice(l,0,"")}delMarcSearchRow(l){this.context.marcSearch.tags.splice(l,1),this.context.marcSearch.subfields.splice(l,1),this.context.marcSearch.values.splice(l,1)}searchByForm(){switch(this.context.pager.offset=0,this.context.showBasket=!1,this.context.scrub(this.searchTab),this.searchTab){case"term":case"ident":case"marc":this.staffCat.search();break;case"browse":this.staffCat.browse();break;case"cnbrowse":this.staffCat.cnBrowse()}}trackByIdx(l,n){return l}searchIsActive(){return this.context.searchState===S.c.SEARCHING}preventBogusCombos(l){if("keyword"===this.context.termSearch.fieldClass[l]){const n=this.context.termSearch.matchOp[l];"exact"!==n&&"starts"!==n||(this.context.termSearch.matchOp[l]="contains")}}}var al=e.ob({encapsulation:0,styles:[[".checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:.1rem}select.form-control[_ngcontent-%COMP%]:not([size]):not([multiple]){padding:.355rem .55rem;height:2.2rem}#staffcat-search-form[_ngcontent-%COMP%]{border-radius:0 0 7px 7px;background-color:#f7f7f7;box-shadow:1px 2px 3px -1px rgba(0,0,0,.2)}#staffcat-search-form[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{border:3px}.tab-content[_ngcontent-%COMP%]{padding:5px;margin-top:25px;font-weight:700}"]],data:{}});function ol(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,6,"div",[["class","row pt-1 pb-1 mb-2 pr-2"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,5,"div",[["class","col-lg-12 d-flex"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,0,"div",[["class","flex-1"]],null,null,null,null,null)),(l()(),e.qb(3,0,null,null,3,"a",[["class","label-with-material-icon no-href"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=0!=(l.component.showThyself=!0)&&e),e}),null,null)),(l()(),e.Kb(-1,null,[" Show Search Form "])),(l()(),e.qb(5,0,null,null,1,"span",[["class","material-icons"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["unfold_more"]))],null,null)}function il(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,3,"option",[],null,null,null,null,null)),e.pb(1,147456,null,0,s.u,[e.k,e.C,[2,s.z]],{value:[0,"value"]},null),e.pb(2,147456,null,0,s.F,[e.k,e.C,[8,null]],{value:[0,"value"]},null),(l()(),e.Kb(3,null,["",""]))],(function(l,n){var u=e.ub(1,"",n.context.$implicit.code(),"");l(n,1,0,u);var t=e.ub(1,"",n.context.$implicit.code(),"");l(n,2,0,t)}),(function(l,n){var u=n.context.$implicit.value();l(n,3,0,u)}))}function rl(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,12,"div",[],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,11,"select",[["class","form-control"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0,a=l.component;return"change"===n&&(t=!1!==e.Cb(l,2).onChange(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,2).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(a.context.termSearch.format=u)&&t),t}),null,null)),e.pb(2,16384,null,0,s.z,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.z]),e.pb(4,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(6,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(7,0,null,null,3,"option",[["value",""]],null,null,null,null,null)),e.pb(8,147456,null,0,s.u,[e.k,e.C,[2,s.z]],{value:[0,"value"]},null),e.pb(9,147456,null,0,s.F,[e.k,e.C,[8,null]],{value:[0,"value"]},null),(l()(),e.Kb(-1,null,["All Formats"])),(l()(),e.fb(16777216,null,null,1,null,il)),e.pb(12,278528,null,0,c.o,[e.N,e.K,e.r],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){var u=n.component;l(n,4,0,u.context.termSearch.format),l(n,8,0,""),l(n,9,0,""),l(n,12,0,u.ccvmMap.search_format)}),(function(l,n){l(n,1,0,e.Cb(n,6).ngClassUntouched,e.Cb(n,6).ngClassTouched,e.Cb(n,6).ngClassPristine,e.Cb(n,6).ngClassDirty,e.Cb(n,6).ngClassValid,e.Cb(n,6).ngClassInvalid,e.Cb(n,6).ngClassPending)}))}function sl(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,14,"div",[],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,13,"select",[["class","form-control"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0,a=l.component;return"change"===n&&(t=!1!==e.Cb(l,2).onChange(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,2).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(a.context.termSearch.joinOp[l.parent.context.index]=u)&&t),t}),null,null)),e.pb(2,16384,null,0,s.z,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.z]),e.pb(4,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(6,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(7,0,null,null,3,"option",[["value","&&"]],null,null,null,null,null)),e.pb(8,147456,null,0,s.u,[e.k,e.C,[2,s.z]],{value:[0,"value"]},null),e.pb(9,147456,null,0,s.F,[e.k,e.C,[8,null]],{value:[0,"value"]},null),(l()(),e.Kb(-1,null,["And"])),(l()(),e.qb(11,0,null,null,3,"option",[["value","||"]],null,null,null,null,null)),e.pb(12,147456,null,0,s.u,[e.k,e.C,[2,s.z]],{value:[0,"value"]},null),e.pb(13,147456,null,0,s.F,[e.k,e.C,[8,null]],{value:[0,"value"]},null),(l()(),e.Kb(-1,null,["Or"]))],(function(l,n){l(n,4,0,n.component.context.termSearch.joinOp[n.parent.context.index]),l(n,8,0,"&&"),l(n,9,0,"&&"),l(n,12,0,"||"),l(n,13,0,"||")}),(function(l,n){l(n,1,0,e.Cb(n,6).ngClassUntouched,e.Cb(n,6).ngClassTouched,e.Cb(n,6).ngClassPristine,e.Cb(n,6).ngClassDirty,e.Cb(n,6).ngClassValid,e.Cb(n,6).ngClassInvalid,e.Cb(n,6).ngClassPending)}))}function cl(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,6,"div",[],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,5,"input",[["class","form-control"],["id","first-query-input"],["placeholder","Query..."],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keyup.enter"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,u){var t=!0,a=l.component;return"input"===n&&(t=!1!==e.Cb(l,2)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,2).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Cb(l,2)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Cb(l,2)._compositionEnd(u.target.value)&&t),"ngModelChange"===n&&(t=!1!==(a.context.termSearch.query[l.parent.context.index]=u)&&t),"keyup.enter"===n&&(t=!1!==a.searchByForm()&&t),t}),null,null)),e.pb(2,16384,null,0,s.d,[e.C,e.k,[2,s.a]],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.d]),e.pb(4,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(6,16384,null,0,s.q,[[4,s.p]],null,null)],(function(l,n){l(n,4,0,n.component.context.termSearch.query[n.parent.context.index])}),(function(l,n){l(n,1,0,e.Cb(n,6).ngClassUntouched,e.Cb(n,6).ngClassTouched,e.Cb(n,6).ngClassPristine,e.Cb(n,6).ngClassDirty,e.Cb(n,6).ngClassValid,e.Cb(n,6).ngClassInvalid,e.Cb(n,6).ngClassPending)}))}function bl(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,6,"div",[],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,5,"input",[["class","form-control"],["placeholder","Query..."],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keyup.enter"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,u){var t=!0,a=l.component;return"input"===n&&(t=!1!==e.Cb(l,2)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,2).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Cb(l,2)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Cb(l,2)._compositionEnd(u.target.value)&&t),"ngModelChange"===n&&(t=!1!==(a.context.termSearch.query[l.parent.context.index]=u)&&t),"keyup.enter"===n&&(t=!1!==a.searchByForm()&&t),t}),null,null)),e.pb(2,16384,null,0,s.d,[e.C,e.k,[2,s.a]],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.d]),e.pb(4,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(6,16384,null,0,s.q,[[4,s.p]],null,null)],(function(l,n){l(n,4,0,n.component.context.termSearch.query[n.parent.context.index])}),(function(l,n){l(n,1,0,e.Cb(n,6).ngClassUntouched,e.Cb(n,6).ngClassTouched,e.Cb(n,6).ngClassPristine,e.Cb(n,6).ngClassDirty,e.Cb(n,6).ngClassValid,e.Cb(n,6).ngClassInvalid,e.Cb(n,6).ngClassPending)}))}function dl(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,"button",[["class","btn btn-sm material-icon-button"],["title","Toggle Search Filters"],["type","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.toggleFilters()&&e),e}),null,null)),(l()(),e.qb(1,0,null,null,1,"span",[["class","material-icons"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["more_vert"]))],null,null)}function pl(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,81,"div",[["class","row"]],null,null,null,null,null)),e.Hb(512,null,c.N,c.O,[e.r,e.s,e.k,e.C]),e.pb(2,278528,null,0,c.n,[c.N],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),e.Fb(3,{"mt-4":0,"mt-1":1}),(l()(),e.qb(4,0,null,null,4,"div",[["class","col-lg-2 pr-1"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,rl)),e.pb(6,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,sl)),e.pb(8,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(9,0,null,null,30,"div",[["class","col-lg-2 pl-0 pr-2"]],null,null,null,null,null)),(l()(),e.qb(10,0,null,null,29,"select",[["class","form-control"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(l,n,u){var t=!0,a=l.component;return"change"===n&&(t=!1!==e.Cb(l,11).onChange(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,11).onTouched()&&t),"change"===n&&(t=!1!==a.preventBogusCombos(l.context.index)&&t),"ngModelChange"===n&&(t=!1!==(a.context.termSearch.fieldClass[l.context.index]=u)&&t),t}),null,null)),e.pb(11,16384,null,0,s.z,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.z]),e.pb(13,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(15,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(16,0,null,null,3,"option",[["value","keyword"]],null,null,null,null,null)),e.pb(17,147456,null,0,s.u,[e.k,e.C,[2,s.z]],{value:[0,"value"]},null),e.pb(18,147456,null,0,s.F,[e.k,e.C,[8,null]],{value:[0,"value"]},null),(l()(),e.Kb(-1,null,["Keyword"])),(l()(),e.qb(20,0,null,null,3,"option",[["value","title"]],null,null,null,null,null)),e.pb(21,147456,null,0,s.u,[e.k,e.C,[2,s.z]],{value:[0,"value"]},null),e.pb(22,147456,null,0,s.F,[e.k,e.C,[8,null]],{value:[0,"value"]},null),(l()(),e.Kb(-1,null,["Title"])),(l()(),e.qb(24,0,null,null,3,"option",[["value","jtitle"]],null,null,null,null,null)),e.pb(25,147456,null,0,s.u,[e.k,e.C,[2,s.z]],{value:[0,"value"]},null),e.pb(26,147456,null,0,s.F,[e.k,e.C,[8,null]],{value:[0,"value"]},null),(l()(),e.Kb(-1,null,["Journal Title"])),(l()(),e.qb(28,0,null,null,3,"option",[["value","author"]],null,null,null,null,null)),e.pb(29,147456,null,0,s.u,[e.k,e.C,[2,s.z]],{value:[0,"value"]},null),e.pb(30,147456,null,0,s.F,[e.k,e.C,[8,null]],{value:[0,"value"]},null),(l()(),e.Kb(-1,null,["Author"])),(l()(),e.qb(32,0,null,null,3,"option",[["value","subject"]],null,null,null,null,null)),e.pb(33,147456,null,0,s.u,[e.k,e.C,[2,s.z]],{value:[0,"value"]},null),e.pb(34,147456,null,0,s.F,[e.k,e.C,[8,null]],{value:[0,"value"]},null),(l()(),e.Kb(-1,null,["Subject"])),(l()(),e.qb(36,0,null,null,3,"option",[["value","series"]],null,null,null,null,null)),e.pb(37,147456,null,0,s.u,[e.k,e.C,[2,s.z]],{value:[0,"value"]},null),e.pb(38,147456,null,0,s.F,[e.k,e.C,[8,null]],{value:[0,"value"]},null),(l()(),e.Kb(-1,null,["Series"])),(l()(),e.qb(40,0,null,null,26,"div",[["class","col-lg-2 pl-0 pr-2"]],null,null,null,null,null)),(l()(),e.qb(41,0,null,null,25,"select",[["class","form-control"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0,a=l.component;return"change"===n&&(t=!1!==e.Cb(l,42).onChange(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,42).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(a.context.termSearch.matchOp[l.context.index]=u)&&t),t}),null,null)),e.pb(42,16384,null,0,s.z,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.z]),e.pb(44,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(46,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(47,0,null,null,3,"option",[["value","contains"]],null,null,null,null,null)),e.pb(48,147456,null,0,s.u,[e.k,e.C,[2,s.z]],{value:[0,"value"]},null),e.pb(49,147456,null,0,s.F,[e.k,e.C,[8,null]],{value:[0,"value"]},null),(l()(),e.Kb(-1,null,["Contains"])),(l()(),e.qb(51,0,null,null,3,"option",[["value","nocontains"]],null,null,null,null,null)),e.pb(52,147456,null,0,s.u,[e.k,e.C,[2,s.z]],{value:[0,"value"]},null),e.pb(53,147456,null,0,s.F,[e.k,e.C,[8,null]],{value:[0,"value"]},null),(l()(),e.Kb(-1,null,["Does not contain"])),(l()(),e.qb(55,0,null,null,3,"option",[["value","phrase"]],null,null,null,null,null)),e.pb(56,147456,null,0,s.u,[e.k,e.C,[2,s.z]],{value:[0,"value"]},null),e.pb(57,147456,null,0,s.F,[e.k,e.C,[8,null]],{value:[0,"value"]},null),(l()(),e.Kb(-1,null,["Contains phrase"])),(l()(),e.qb(59,0,null,null,3,"option",[["value","exact"]],[[8,"disabled",0]],null,null,null,null)),e.pb(60,147456,null,0,s.u,[e.k,e.C,[2,s.z]],{value:[0,"value"]},null),e.pb(61,147456,null,0,s.F,[e.k,e.C,[8,null]],{value:[0,"value"]},null),(l()(),e.Kb(-1,null,["Matches exactly"])),(l()(),e.qb(63,0,null,null,3,"option",[["value","starts"]],[[8,"disabled",0]],null,null,null,null)),e.pb(64,147456,null,0,s.u,[e.k,e.C,[2,s.z]],{value:[0,"value"]},null),e.pb(65,147456,null,0,s.F,[e.k,e.C,[8,null]],{value:[0,"value"]},null),(l()(),e.Kb(-1,null,["Starts with"])),(l()(),e.qb(67,0,null,null,5,"div",[["class","col-lg-4 pl-0 pr-2"]],null,null,null,null,null)),(l()(),e.qb(68,0,null,null,4,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,cl)),e.pb(70,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,bl)),e.pb(72,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(73,0,null,null,8,"div",[["class","col-lg-2 pl-0 pr-1"]],null,null,null,null,null)),(l()(),e.qb(74,0,null,null,2,"button",[["class","btn btn-sm material-icon-button"],["title","Add Search Row"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.addSearchRow(l.context.index+1)&&e),e}),null,null)),(l()(),e.qb(75,0,null,null,1,"span",[["class","material-icons"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["add_circle_outline"])),(l()(),e.qb(77,0,null,null,2,"button",[["class","btn btn-sm material-icon-button"],["title","Remove Search Row"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.delSearchRow(l.context.index)&&e),e}),null,null)),(l()(),e.qb(78,0,null,null,1,"span",[["class","material-icons"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["remove_circle_outline"])),(l()(),e.fb(16777216,null,null,1,null,dl)),e.pb(81,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component,e=l(n,3,0,0==n.context.index,n.context.index>0);l(n,2,0,"row",e),l(n,6,0,0==n.context.index),l(n,8,0,n.context.index>0),l(n,13,0,u.context.termSearch.fieldClass[n.context.index]),l(n,17,0,"keyword"),l(n,18,0,"keyword"),l(n,21,0,"title"),l(n,22,0,"title"),l(n,25,0,"jtitle"),l(n,26,0,"jtitle"),l(n,29,0,"author"),l(n,30,0,"author"),l(n,33,0,"subject"),l(n,34,0,"subject"),l(n,37,0,"series"),l(n,38,0,"series"),l(n,44,0,u.context.termSearch.matchOp[n.context.index]),l(n,48,0,"contains"),l(n,49,0,"contains"),l(n,52,0,"nocontains"),l(n,53,0,"nocontains"),l(n,56,0,"phrase"),l(n,57,0,"phrase"),l(n,60,0,"exact"),l(n,61,0,"exact"),l(n,64,0,"starts"),l(n,65,0,"starts"),l(n,70,0,0==n.context.index),l(n,72,0,n.context.index>0),l(n,81,0,0==n.context.index)}),(function(l,n){var u=n.component;l(n,10,0,e.Cb(n,15).ngClassUntouched,e.Cb(n,15).ngClassTouched,e.Cb(n,15).ngClassPristine,e.Cb(n,15).ngClassDirty,e.Cb(n,15).ngClassValid,e.Cb(n,15).ngClassInvalid,e.Cb(n,15).ngClassPending),l(n,41,0,e.Cb(n,46).ngClassUntouched,e.Cb(n,46).ngClassTouched,e.Cb(n,46).ngClassPristine,e.Cb(n,46).ngClassDirty,e.Cb(n,46).ngClassValid,e.Cb(n,46).ngClassInvalid,e.Cb(n,46).ngClassPending),l(n,59,0,"keyword"==u.context.termSearch.fieldClass[n.context.index]),l(n,63,0,"keyword"==u.context.termSearch.fieldClass[n.context.index]),l(n,77,0,u.context.termSearch.query.length<2)}))}function hl(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,3,"option",[],null,null,null,null,null)),e.pb(1,147456,null,0,s.u,[e.k,e.C,[8,null]],{value:[0,"value"]},null),e.pb(2,147456,null,0,s.F,[e.k,e.C,[2,s.A]],{value:[0,"value"]},null),(l()(),e.Kb(3,null,["",""]))],(function(l,n){var u=e.ub(1,"",n.context.$implicit.code(),"");l(n,1,0,u);var t=e.ub(1,"",n.context.$implicit.code(),"");l(n,2,0,t)}),(function(l,n){var u=n.context.$implicit.value();l(n,3,0,u)}))}function gl(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,3,"option",[],null,null,null,null,null)),e.pb(1,147456,null,0,s.u,[e.k,e.C,[8,null]],{value:[0,"value"]},null),e.pb(2,147456,null,0,s.F,[e.k,e.C,[2,s.A]],{value:[0,"value"]},null),(l()(),e.Kb(3,null,["",""]))],(function(l,n){var u=e.ub(1,"",n.context.$implicit.code(),"");l(n,1,0,u);var t=e.ub(1,"",n.context.$implicit.code(),"");l(n,2,0,t)}),(function(l,n){var u=n.context.$implicit.value();l(n,3,0,u)}))}function ml(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,3,"option",[],null,null,null,null,null)),e.pb(1,147456,null,0,s.u,[e.k,e.C,[8,null]],{value:[0,"value"]},null),e.pb(2,147456,null,0,s.F,[e.k,e.C,[2,s.A]],{value:[0,"value"]},null),(l()(),e.Kb(3,null,["",""]))],(function(l,n){var u=e.ub(1,"",n.context.$implicit.code(),"");l(n,1,0,u);var t=e.ub(1,"",n.context.$implicit.code(),"");l(n,2,0,t)}),(function(l,n){var u=n.context.$implicit.value();l(n,3,0,u)}))}function fl(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,3,"option",[],null,null,null,null,null)),e.pb(1,147456,null,0,s.u,[e.k,e.C,[8,null]],{value:[0,"value"]},null),e.pb(2,147456,null,0,s.F,[e.k,e.C,[2,s.A]],{value:[0,"value"]},null),(l()(),e.Kb(3,null,["",""]))],(function(l,n){var u=e.ub(1,"",n.context.$implicit.code(),"");l(n,1,0,u);var t=e.ub(1,"",n.context.$implicit.code(),"");l(n,2,0,t)}),(function(l,n){var u=n.context.$implicit.value();l(n,3,0,u)}))}function Cl(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,52,"div",[["class","row mt-3"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,12,"div",[["class","col-lg-3"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,11,"select",[["class","form-control"],["multiple","true"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0,a=l.component;return"change"===n&&(t=!1!==e.Cb(l,3).onChange(u.target)&&t),"blur"===n&&(t=!1!==e.Cb(l,3).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(a.context.termSearch.ccvmFilters.item_type=u)&&t),t}),null,null)),e.pb(3,16384,null,0,s.A,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.A]),e.pb(5,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(7,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(8,0,null,null,3,"option",[["value",""]],null,null,null,null,null)),e.pb(9,147456,null,0,s.u,[e.k,e.C,[8,null]],{value:[0,"value"]},null),e.pb(10,147456,null,0,s.F,[e.k,e.C,[2,s.A]],{value:[0,"value"]},null),(l()(),e.Kb(-1,null,["All Item Types"])),(l()(),e.fb(16777216,null,null,1,null,hl)),e.pb(13,278528,null,0,c.o,[e.N,e.K,e.r],{ngForOf:[0,"ngForOf"]},null),(l()(),e.qb(14,0,null,null,12,"div",[["class","col-lg-3"]],null,null,null,null,null)),(l()(),e.qb(15,0,null,null,11,"select",[["class","form-control"],["multiple","true"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0,a=l.component;return"change"===n&&(t=!1!==e.Cb(l,16).onChange(u.target)&&t),"blur"===n&&(t=!1!==e.Cb(l,16).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(a.context.termSearch.ccvmFilters.item_form=u)&&t),t}),null,null)),e.pb(16,16384,null,0,s.A,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.A]),e.pb(18,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(20,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(21,0,null,null,3,"option",[["value",""]],null,null,null,null,null)),e.pb(22,147456,null,0,s.u,[e.k,e.C,[8,null]],{value:[0,"value"]},null),e.pb(23,147456,null,0,s.F,[e.k,e.C,[2,s.A]],{value:[0,"value"]},null),(l()(),e.Kb(-1,null,["All Item Forms"])),(l()(),e.fb(16777216,null,null,1,null,gl)),e.pb(26,278528,null,0,c.o,[e.N,e.K,e.r],{ngForOf:[0,"ngForOf"]},null),(l()(),e.qb(27,0,null,null,12,"div",[["class","col-lg-3"]],null,null,null,null,null)),(l()(),e.qb(28,0,null,null,11,"select",[["class","form-control"],["multiple","true"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0,a=l.component;return"change"===n&&(t=!1!==e.Cb(l,29).onChange(u.target)&&t),"blur"===n&&(t=!1!==e.Cb(l,29).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(a.context.termSearch.ccvmFilters.item_lang=u)&&t),t}),null,null)),e.pb(29,16384,null,0,s.A,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.A]),e.pb(31,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(33,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(34,0,null,null,3,"option",[["value",""]],null,null,null,null,null)),e.pb(35,147456,null,0,s.u,[e.k,e.C,[8,null]],{value:[0,"value"]},null),e.pb(36,147456,null,0,s.F,[e.k,e.C,[2,s.A]],{value:[0,"value"]},null),(l()(),e.Kb(-1,null,["All Languages"])),(l()(),e.fb(16777216,null,null,1,null,ml)),e.pb(39,278528,null,0,c.o,[e.N,e.K,e.r],{ngForOf:[0,"ngForOf"]},null),(l()(),e.qb(40,0,null,null,12,"div",[["class","col-lg-3"]],null,null,null,null,null)),(l()(),e.qb(41,0,null,null,11,"select",[["class","form-control"],["multiple","true"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0,a=l.component;return"change"===n&&(t=!1!==e.Cb(l,42).onChange(u.target)&&t),"blur"===n&&(t=!1!==e.Cb(l,42).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(a.context.termSearch.ccvmFilters.audience=u)&&t),t}),null,null)),e.pb(42,16384,null,0,s.A,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.A]),e.pb(44,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(46,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(47,0,null,null,3,"option",[["value",""]],null,null,null,null,null)),e.pb(48,147456,null,0,s.u,[e.k,e.C,[8,null]],{value:[0,"value"]},null),e.pb(49,147456,null,0,s.F,[e.k,e.C,[2,s.A]],{value:[0,"value"]},null),(l()(),e.Kb(-1,null,["All Audiences"])),(l()(),e.fb(16777216,null,null,1,null,fl)),e.pb(52,278528,null,0,c.o,[e.N,e.K,e.r],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){var u=n.component;l(n,5,0,u.context.termSearch.ccvmFilters.item_type),l(n,9,0,""),l(n,10,0,""),l(n,13,0,u.ccvmMap.item_type),l(n,18,0,u.context.termSearch.ccvmFilters.item_form),l(n,22,0,""),l(n,23,0,""),l(n,26,0,u.ccvmMap.item_form),l(n,31,0,u.context.termSearch.ccvmFilters.item_lang),l(n,35,0,""),l(n,36,0,""),l(n,39,0,u.ccvmMap.item_lang),l(n,44,0,u.context.termSearch.ccvmFilters.audience),l(n,48,0,""),l(n,49,0,""),l(n,52,0,u.ccvmMap.audience)}),(function(l,n){l(n,2,0,e.Cb(n,7).ngClassUntouched,e.Cb(n,7).ngClassTouched,e.Cb(n,7).ngClassPristine,e.Cb(n,7).ngClassDirty,e.Cb(n,7).ngClassValid,e.Cb(n,7).ngClassInvalid,e.Cb(n,7).ngClassPending),l(n,15,0,e.Cb(n,20).ngClassUntouched,e.Cb(n,20).ngClassTouched,e.Cb(n,20).ngClassPristine,e.Cb(n,20).ngClassDirty,e.Cb(n,20).ngClassValid,e.Cb(n,20).ngClassInvalid,e.Cb(n,20).ngClassPending),l(n,28,0,e.Cb(n,33).ngClassUntouched,e.Cb(n,33).ngClassTouched,e.Cb(n,33).ngClassPristine,e.Cb(n,33).ngClassDirty,e.Cb(n,33).ngClassValid,e.Cb(n,33).ngClassInvalid,e.Cb(n,33).ngClassPending),l(n,41,0,e.Cb(n,46).ngClassUntouched,e.Cb(n,46).ngClassTouched,e.Cb(n,46).ngClassPristine,e.Cb(n,46).ngClassDirty,e.Cb(n,46).ngClassValid,e.Cb(n,46).ngClassInvalid,e.Cb(n,46).ngClassPending)}))}function vl(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,3,"option",[],null,null,null,null,null)),e.pb(1,147456,null,0,s.u,[e.k,e.C,[8,null]],{value:[0,"value"]},null),e.pb(2,147456,null,0,s.F,[e.k,e.C,[2,s.A]],{value:[0,"value"]},null),(l()(),e.Kb(3,null,["",""]))],(function(l,n){var u=e.ub(1,"",n.context.$implicit.code(),"");l(n,1,0,u);var t=e.ub(1,"",n.context.$implicit.code(),"");l(n,2,0,t)}),(function(l,n){var u=n.context.$implicit.value();l(n,3,0,u)}))}function yl(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,3,"option",[],null,null,null,null,null)),e.pb(1,147456,null,0,s.u,[e.k,e.C,[8,null]],{value:[0,"value"]},null),e.pb(2,147456,null,0,s.F,[e.k,e.C,[2,s.A]],{value:[0,"value"]},null),(l()(),e.Kb(3,null,["",""]))],(function(l,n){var u=e.ub(1,"",n.context.$implicit.code(),"");l(n,1,0,u);var t=e.ub(1,"",n.context.$implicit.code(),"");l(n,2,0,t)}),(function(l,n){var u=n.context.$implicit.value();l(n,3,0,u)}))}function ql(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,3,"option",[],null,null,null,null,null)),e.pb(1,147456,null,0,s.u,[e.k,e.C,[8,null]],{value:[0,"value"]},null),e.pb(2,147456,null,0,s.F,[e.k,e.C,[2,s.A]],{value:[0,"value"]},null),(l()(),e.Kb(3,null,["",""]))],(function(l,n){var u=e.ub(1,"",n.context.$implicit.code(),"");l(n,1,0,u);var t=e.ub(1,"",n.context.$implicit.code(),"");l(n,2,0,t)}),(function(l,n){var u=n.context.$implicit.value();l(n,3,0,u)}))}function kl(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,3,"option",[],null,null,null,null,null)),e.pb(1,147456,null,0,s.u,[e.k,e.C,[8,null]],{value:[0,"value"]},null),e.pb(2,147456,null,0,s.F,[e.k,e.C,[2,s.A]],{value:[0,"value"]},null),(l()(),e.Kb(3,null,[" "," (",") "]))],(function(l,n){var u=e.ub(1,"",n.context.$implicit.id(),"");l(n,1,0,u);var t=e.ub(1,"",n.context.$implicit.id(),"");l(n,2,0,t)}),(function(l,n){var u=n.component,e=n.context.$implicit.name(),t=u.orgName(n.context.$implicit.owning_lib());l(n,3,0,e,t)}))}function Il(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,52,"div",[["class","row mt-3"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,12,"div",[["class","col-lg-3"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,11,"select",[["class","form-control"],["multiple","true"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0,a=l.component;return"change"===n&&(t=!1!==e.Cb(l,3).onChange(u.target)&&t),"blur"===n&&(t=!1!==e.Cb(l,3).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(a.context.termSearch.ccvmFilters.vr_format=u)&&t),t}),null,null)),e.pb(3,16384,null,0,s.A,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.A]),e.pb(5,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(7,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(8,0,null,null,3,"option",[["value",""]],null,null,null,null,null)),e.pb(9,147456,null,0,s.u,[e.k,e.C,[8,null]],{value:[0,"value"]},null),e.pb(10,147456,null,0,s.F,[e.k,e.C,[2,s.A]],{value:[0,"value"]},null),(l()(),e.Kb(-1,null,["All Video Formats"])),(l()(),e.fb(16777216,null,null,1,null,vl)),e.pb(13,278528,null,0,c.o,[e.N,e.K,e.r],{ngForOf:[0,"ngForOf"]},null),(l()(),e.qb(14,0,null,null,12,"div",[["class","col-lg-3"]],null,null,null,null,null)),(l()(),e.qb(15,0,null,null,11,"select",[["class","form-control"],["multiple","true"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0,a=l.component;return"change"===n&&(t=!1!==e.Cb(l,16).onChange(u.target)&&t),"blur"===n&&(t=!1!==e.Cb(l,16).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(a.context.termSearch.ccvmFilters.bib_level=u)&&t),t}),null,null)),e.pb(16,16384,null,0,s.A,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.A]),e.pb(18,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(20,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(21,0,null,null,3,"option",[["value",""]],null,null,null,null,null)),e.pb(22,147456,null,0,s.u,[e.k,e.C,[8,null]],{value:[0,"value"]},null),e.pb(23,147456,null,0,s.F,[e.k,e.C,[2,s.A]],{value:[0,"value"]},null),(l()(),e.Kb(-1,null,["All Bib Levels"])),(l()(),e.fb(16777216,null,null,1,null,yl)),e.pb(26,278528,null,0,c.o,[e.N,e.K,e.r],{ngForOf:[0,"ngForOf"]},null),(l()(),e.qb(27,0,null,null,12,"div",[["class","col-lg-3"]],null,null,null,null,null)),(l()(),e.qb(28,0,null,null,11,"select",[["class","form-control"],["multiple","true"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0,a=l.component;return"change"===n&&(t=!1!==e.Cb(l,29).onChange(u.target)&&t),"blur"===n&&(t=!1!==e.Cb(l,29).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(a.context.termSearch.ccvmFilters.lit_form=u)&&t),t}),null,null)),e.pb(29,16384,null,0,s.A,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.A]),e.pb(31,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(33,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(34,0,null,null,3,"option",[["value",""]],null,null,null,null,null)),e.pb(35,147456,null,0,s.u,[e.k,e.C,[8,null]],{value:[0,"value"]},null),e.pb(36,147456,null,0,s.F,[e.k,e.C,[2,s.A]],{value:[0,"value"]},null),(l()(),e.Kb(-1,null,["All Literary Forms"])),(l()(),e.fb(16777216,null,null,1,null,ql)),e.pb(39,278528,null,0,c.o,[e.N,e.K,e.r],{ngForOf:[0,"ngForOf"]},null),(l()(),e.qb(40,0,null,null,12,"div",[["class","col-lg-3"]],null,null,null,null,null)),(l()(),e.qb(41,0,null,null,11,"select",[["class","form-control"],["multiple","true"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0,a=l.component;return"change"===n&&(t=!1!==e.Cb(l,42).onChange(u.target)&&t),"blur"===n&&(t=!1!==e.Cb(l,42).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(a.context.termSearch.copyLocations=u)&&t),t}),null,null)),e.pb(42,16384,null,0,s.A,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.A]),e.pb(44,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(46,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(47,0,null,null,3,"option",[["value",""]],null,null,null,null,null)),e.pb(48,147456,null,0,s.u,[e.k,e.C,[8,null]],{value:[0,"value"]},null),e.pb(49,147456,null,0,s.F,[e.k,e.C,[2,s.A]],{value:[0,"value"]},null),(l()(),e.Kb(-1,null,["All Copy Locations"])),(l()(),e.fb(16777216,null,null,1,null,kl)),e.pb(52,278528,null,0,c.o,[e.N,e.K,e.r],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){var u=n.component;l(n,5,0,u.context.termSearch.ccvmFilters.vr_format),l(n,9,0,""),l(n,10,0,""),l(n,13,0,u.ccvmMap.vr_format),l(n,18,0,u.context.termSearch.ccvmFilters.bib_level),l(n,22,0,""),l(n,23,0,""),l(n,26,0,u.ccvmMap.bib_level),l(n,31,0,u.context.termSearch.ccvmFilters.lit_form),l(n,35,0,""),l(n,36,0,""),l(n,39,0,u.ccvmMap.lit_form),l(n,44,0,u.context.termSearch.copyLocations),l(n,48,0,""),l(n,49,0,""),l(n,52,0,u.copyLocations)}),(function(l,n){l(n,2,0,e.Cb(n,7).ngClassUntouched,e.Cb(n,7).ngClassTouched,e.Cb(n,7).ngClassPristine,e.Cb(n,7).ngClassDirty,e.Cb(n,7).ngClassValid,e.Cb(n,7).ngClassInvalid,e.Cb(n,7).ngClassPending),l(n,15,0,e.Cb(n,20).ngClassUntouched,e.Cb(n,20).ngClassTouched,e.Cb(n,20).ngClassPristine,e.Cb(n,20).ngClassDirty,e.Cb(n,20).ngClassValid,e.Cb(n,20).ngClassInvalid,e.Cb(n,20).ngClassPending),l(n,28,0,e.Cb(n,33).ngClassUntouched,e.Cb(n,33).ngClassTouched,e.Cb(n,33).ngClassPristine,e.Cb(n,33).ngClassDirty,e.Cb(n,33).ngClassValid,e.Cb(n,33).ngClassInvalid,e.Cb(n,33).ngClassPending),l(n,41,0,e.Cb(n,46).ngClassUntouched,e.Cb(n,46).ngClassTouched,e.Cb(n,46).ngClassPristine,e.Cb(n,46).ngClassDirty,e.Cb(n,46).ngClassValid,e.Cb(n,46).ngClassInvalid,e.Cb(n,46).ngClassPending)}))}function _l(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,6,"input",[["class","form-control ml-2"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(l,n,u){var t=!0,a=l.component;return"input"===n&&(t=!1!==e.Cb(l,1)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,1).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Cb(l,1)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Cb(l,1)._compositionEnd(u.target.value)&&t),"change"===n&&(t=!1!==e.Cb(l,2).onChange(u.target.value)&&t),"input"===n&&(t=!1!==e.Cb(l,2).onChange(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,2).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(a.context.termSearch.date2=u)&&t),t}),null,null)),e.pb(1,16384,null,0,s.d,[e.C,e.k,[2,s.a]],null,null),e.pb(2,16384,null,0,s.v,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l,n){return[l,n]}),[s.d,s.v]),e.pb(4,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(6,16384,null,0,s.q,[[4,s.p]],null,null)],(function(l,n){l(n,4,0,n.component.context.termSearch.date2)}),(function(l,n){l(n,0,0,e.Cb(n,6).ngClassUntouched,e.Cb(n,6).ngClassTouched,e.Cb(n,6).ngClassPristine,e.Cb(n,6).ngClassDirty,e.Cb(n,6).ngClassValid,e.Cb(n,6).ngClassInvalid,e.Cb(n,6).ngClassPending)}))}function wl(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,35,"div",[["class","row mt-3"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,34,"div",[["class","col-lg-12"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,33,"div",[["class","form-inline"]],null,null,null,null,null)),(l()(),e.qb(3,0,null,null,1,"label",[["for","pub-date1-input"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Publication Year is"])),(l()(),e.qb(5,0,null,null,21,"select",[["class","form-control ml-2"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0,a=l.component;return"change"===n&&(t=!1!==e.Cb(l,6).onChange(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,6).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(a.context.termSearch.dateOp=u)&&t),t}),null,null)),e.pb(6,16384,null,0,s.z,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.z]),e.pb(8,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(10,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(11,0,null,null,3,"option",[["value","is"]],null,null,null,null,null)),e.pb(12,147456,null,0,s.u,[e.k,e.C,[2,s.z]],{value:[0,"value"]},null),e.pb(13,147456,null,0,s.F,[e.k,e.C,[8,null]],{value:[0,"value"]},null),(l()(),e.Kb(-1,null,["Is"])),(l()(),e.qb(15,0,null,null,3,"option",[["value","before"]],null,null,null,null,null)),e.pb(16,147456,null,0,s.u,[e.k,e.C,[2,s.z]],{value:[0,"value"]},null),e.pb(17,147456,null,0,s.F,[e.k,e.C,[8,null]],{value:[0,"value"]},null),(l()(),e.Kb(-1,null,["Before"])),(l()(),e.qb(19,0,null,null,3,"option",[["value","after"]],null,null,null,null,null)),e.pb(20,147456,null,0,s.u,[e.k,e.C,[2,s.z]],{value:[0,"value"]},null),e.pb(21,147456,null,0,s.F,[e.k,e.C,[8,null]],{value:[0,"value"]},null),(l()(),e.Kb(-1,null,["After"])),(l()(),e.qb(23,0,null,null,3,"option",[["value","between"]],null,null,null,null,null)),e.pb(24,147456,null,0,s.u,[e.k,e.C,[2,s.z]],{value:[0,"value"]},null),e.pb(25,147456,null,0,s.F,[e.k,e.C,[8,null]],{value:[0,"value"]},null),(l()(),e.Kb(-1,null,["Between"])),(l()(),e.qb(27,0,null,null,6,"input",[["class","form-control ml-2"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(l,n,u){var t=!0,a=l.component;return"input"===n&&(t=!1!==e.Cb(l,28)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,28).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Cb(l,28)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Cb(l,28)._compositionEnd(u.target.value)&&t),"change"===n&&(t=!1!==e.Cb(l,29).onChange(u.target.value)&&t),"input"===n&&(t=!1!==e.Cb(l,29).onChange(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,29).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(a.context.termSearch.date1=u)&&t),t}),null,null)),e.pb(28,16384,null,0,s.d,[e.C,e.k,[2,s.a]],null,null),e.pb(29,16384,null,0,s.v,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l,n){return[l,n]}),[s.d,s.v]),e.pb(31,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(33,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.fb(16777216,null,null,1,null,_l)),e.pb(35,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component;l(n,8,0,u.context.termSearch.dateOp),l(n,12,0,"is"),l(n,13,0,"is"),l(n,16,0,"before"),l(n,17,0,"before"),l(n,20,0,"after"),l(n,21,0,"after"),l(n,24,0,"between"),l(n,25,0,"between"),l(n,31,0,u.context.termSearch.date1),l(n,35,0,"between"==u.context.termSearch.dateOp)}),(function(l,n){l(n,5,0,e.Cb(n,10).ngClassUntouched,e.Cb(n,10).ngClassTouched,e.Cb(n,10).ngClassPristine,e.Cb(n,10).ngClassDirty,e.Cb(n,10).ngClassValid,e.Cb(n,10).ngClassInvalid,e.Cb(n,10).ngClassPending),l(n,27,0,e.Cb(n,33).ngClassUntouched,e.Cb(n,33).ngClassTouched,e.Cb(n,33).ngClassPristine,e.Cb(n,33).ngClassDirty,e.Cb(n,33).ngClassValid,e.Cb(n,33).ngClassInvalid,e.Cb(n,33).ngClassPending)}))}function xl(l){return e.Mb(0,[(l()(),e.fb(16777216,null,null,1,null,pl)),e.pb(1,278528,null,0,c.o,[e.N,e.K,e.r],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(l()(),e.qb(2,0,null,null,77,"div",[["class","row"]],null,null,null,null,null)),(l()(),e.qb(3,0,null,null,76,"div",[["class","col-lg-12 form-inline"]],null,null,null,null,null)),(l()(),e.qb(4,0,null,null,45,"select",[["class","form-control mr-2"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0,a=l.component;return"change"===n&&(t=!1!==e.Cb(l,5).onChange(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,5).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(a.context.sort=u)&&t),t}),null,null)),e.pb(5,16384,null,0,s.z,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.z]),e.pb(7,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(9,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(10,0,null,null,3,"option",[["value",""]],null,null,null,null,null)),e.pb(11,147456,null,0,s.u,[e.k,e.C,[2,s.z]],{value:[0,"value"]},null),e.pb(12,147456,null,0,s.F,[e.k,e.C,[8,null]],{value:[0,"value"]},null),(l()(),e.Kb(-1,null,["Sort by Relevance"])),(l()(),e.qb(14,0,null,null,8,"optgroup",[["label","Sort by Title"]],null,null,null,null,null)),(l()(),e.qb(15,0,null,null,3,"option",[["value","titlesort"]],null,null,null,null,null)),e.pb(16,147456,null,0,s.u,[e.k,e.C,[2,s.z]],{value:[0,"value"]},null),e.pb(17,147456,null,0,s.F,[e.k,e.C,[8,null]],{value:[0,"value"]},null),(l()(),e.Kb(-1,null,["Title: A to Z"])),(l()(),e.qb(19,0,null,null,3,"option",[["value","titlesort.descending"]],null,null,null,null,null)),e.pb(20,147456,null,0,s.u,[e.k,e.C,[2,s.z]],{value:[0,"value"]},null),e.pb(21,147456,null,0,s.F,[e.k,e.C,[8,null]],{value:[0,"value"]},null),(l()(),e.Kb(-1,null,["Title: Z to A"])),(l()(),e.qb(23,0,null,null,8,"optgroup",[["label","Sort by Author"]],null,null,null,null,null)),(l()(),e.qb(24,0,null,null,3,"option",[["value","authorsort"]],null,null,null,null,null)),e.pb(25,147456,null,0,s.u,[e.k,e.C,[2,s.z]],{value:[0,"value"]},null),e.pb(26,147456,null,0,s.F,[e.k,e.C,[8,null]],{value:[0,"value"]},null),(l()(),e.Kb(-1,null,["Author: A to Z"])),(l()(),e.qb(28,0,null,null,3,"option",[["value","authorsort.descending"]],null,null,null,null,null)),e.pb(29,147456,null,0,s.u,[e.k,e.C,[2,s.z]],{value:[0,"value"]},null),e.pb(30,147456,null,0,s.F,[e.k,e.C,[8,null]],{value:[0,"value"]},null),(l()(),e.Kb(-1,null,["Author: Z to A"])),(l()(),e.qb(32,0,null,null,8,"optgroup",[["label","Sort by Publication Date"]],null,null,null,null,null)),(l()(),e.qb(33,0,null,null,3,"option",[["value","pubdate"]],null,null,null,null,null)),e.pb(34,147456,null,0,s.u,[e.k,e.C,[2,s.z]],{value:[0,"value"]},null),e.pb(35,147456,null,0,s.F,[e.k,e.C,[8,null]],{value:[0,"value"]},null),(l()(),e.Kb(-1,null,["Date: A to Z"])),(l()(),e.qb(37,0,null,null,3,"option",[["value","pubdate.descending"]],null,null,null,null,null)),e.pb(38,147456,null,0,s.u,[e.k,e.C,[2,s.z]],{value:[0,"value"]},null),e.pb(39,147456,null,0,s.F,[e.k,e.C,[8,null]],{value:[0,"value"]},null),(l()(),e.Kb(-1,null,["Date: Z to A"])),(l()(),e.qb(41,0,null,null,8,"optgroup",[["label","Sort by Popularity"]],null,null,null,null,null)),(l()(),e.qb(42,0,null,null,3,"option",[["value","popularity"]],null,null,null,null,null)),e.pb(43,147456,null,0,s.u,[e.k,e.C,[2,s.z]],{value:[0,"value"]},null),e.pb(44,147456,null,0,s.F,[e.k,e.C,[8,null]],{value:[0,"value"]},null),(l()(),e.Kb(-1,null,["Most Popular"])),(l()(),e.qb(46,0,null,null,3,"option",[["value","poprel"]],null,null,null,null,null)),e.pb(47,147456,null,0,s.u,[e.k,e.C,[2,s.z]],{value:[0,"value"]},null),e.pb(48,147456,null,0,s.F,[e.k,e.C,[8,null]],{value:[0,"value"]},null),(l()(),e.Kb(-1,null,["Popularity Adjusted Relevance"])),(l()(),e.qb(50,0,null,null,9,"div",[["class","checkbox pl-2 ml-2"]],null,null,null,null,null)),(l()(),e.qb(51,0,null,null,8,"label",[],null,null,null,null,null)),(l()(),e.qb(52,0,null,null,5,"input",[["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0,a=l.component;return"change"===n&&(t=!1!==e.Cb(l,53).onChange(u.target.checked)&&t),"blur"===n&&(t=!1!==e.Cb(l,53).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(a.context.termSearch.available=u)&&t),t}),null,null)),e.pb(53,16384,null,0,s.b,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.b]),e.pb(55,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(57,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(58,0,null,null,1,"span",[["class","pl-1"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Limit to Available"])),(l()(),e.qb(60,0,null,null,9,"div",[["class","checkbox pl-3"]],null,null,null,null,null)),(l()(),e.qb(61,0,null,null,8,"label",[],null,null,null,null,null)),(l()(),e.qb(62,0,null,null,5,"input",[["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0,a=l.component;return"change"===n&&(t=!1!==e.Cb(l,63).onChange(u.target.checked)&&t),"blur"===n&&(t=!1!==e.Cb(l,63).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(a.context.termSearch.groupByMetarecord=u)&&t),t}),null,null)),e.pb(63,16384,null,0,s.b,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.b]),e.pb(65,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(67,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(68,0,null,null,1,"span",[["class","pl-1"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Group Formats/Editions"])),(l()(),e.qb(70,0,null,null,9,"div",[["class","checkbox pl-3"]],null,null,null,null,null)),(l()(),e.qb(71,0,null,null,8,"label",[],null,null,null,null,null)),(l()(),e.qb(72,0,null,null,5,"input",[["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0,a=l.component;return"change"===n&&(t=!1!==e.Cb(l,73).onChange(u.target.checked)&&t),"blur"===n&&(t=!1!==e.Cb(l,73).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(a.context.termSearch.global=u)&&t),t}),null,null)),e.pb(73,16384,null,0,s.b,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.b]),e.pb(75,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(77,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(78,0,null,null,1,"span",[["class","pl-1"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Results from All Libraries"])),(l()(),e.fb(16777216,null,null,1,null,Cl)),e.pb(81,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,Il)),e.pb(83,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,wl)),e.pb(85,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(0,null,null,0))],(function(l,n){var u=n.component;l(n,1,0,u.context.termSearch.query,u.trackByIdx),l(n,7,0,u.context.sort),l(n,11,0,""),l(n,12,0,""),l(n,16,0,"titlesort"),l(n,17,0,"titlesort"),l(n,20,0,"titlesort.descending"),l(n,21,0,"titlesort.descending"),l(n,25,0,"authorsort"),l(n,26,0,"authorsort"),l(n,29,0,"authorsort.descending"),l(n,30,0,"authorsort.descending"),l(n,34,0,"pubdate"),l(n,35,0,"pubdate"),l(n,38,0,"pubdate.descending"),l(n,39,0,"pubdate.descending"),l(n,43,0,"popularity"),l(n,44,0,"popularity"),l(n,47,0,"poprel"),l(n,48,0,"poprel"),l(n,55,0,u.context.termSearch.available),l(n,65,0,u.context.termSearch.groupByMetarecord),l(n,75,0,u.context.termSearch.global),l(n,81,0,u.showFilters()),l(n,83,0,u.showFilters()),l(n,85,0,u.showFilters())}),(function(l,n){l(n,4,0,e.Cb(n,9).ngClassUntouched,e.Cb(n,9).ngClassTouched,e.Cb(n,9).ngClassPristine,e.Cb(n,9).ngClassDirty,e.Cb(n,9).ngClassValid,e.Cb(n,9).ngClassInvalid,e.Cb(n,9).ngClassPending),l(n,52,0,e.Cb(n,57).ngClassUntouched,e.Cb(n,57).ngClassTouched,e.Cb(n,57).ngClassPristine,e.Cb(n,57).ngClassDirty,e.Cb(n,57).ngClassValid,e.Cb(n,57).ngClassInvalid,e.Cb(n,57).ngClassPending),l(n,62,0,e.Cb(n,67).ngClassUntouched,e.Cb(n,67).ngClassTouched,e.Cb(n,67).ngClassPristine,e.Cb(n,67).ngClassDirty,e.Cb(n,67).ngClassValid,e.Cb(n,67).ngClassInvalid,e.Cb(n,67).ngClassPending),l(n,72,0,e.Cb(n,77).ngClassUntouched,e.Cb(n,77).ngClassTouched,e.Cb(n,77).ngClassPristine,e.Cb(n,77).ngClassDirty,e.Cb(n,77).ngClassValid,e.Cb(n,77).ngClassInvalid,e.Cb(n,77).ngClassPending)}))}function Ml(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,38,"div",[["class","row mt-4"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,37,"div",[["class","col-lg-12"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,36,"div",[["class","form-inline"]],null,null,null,null,null)),(l()(),e.qb(3,0,null,null,1,"label",[["for","ident-type"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Query Type"])),(l()(),e.qb(5,0,null,null,25,"select",[["class","form-control ml-2"],["name","ident-type"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0,a=l.component;return"change"===n&&(t=!1!==e.Cb(l,6).onChange(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,6).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(a.context.identSearch.queryType=u)&&t),t}),null,null)),e.pb(6,16384,null,0,s.z,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.z]),e.pb(8,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(10,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(11,0,null,null,3,"option",[["value","identifier|isbn"]],null,null,null,null,null)),e.pb(12,147456,null,0,s.u,[e.k,e.C,[2,s.z]],{value:[0,"value"]},null),e.pb(13,147456,null,0,s.F,[e.k,e.C,[8,null]],{value:[0,"value"]},null),(l()(),e.Kb(-1,null,["ISBN"])),(l()(),e.qb(15,0,null,null,3,"option",[["value","identifier|issn"]],null,null,null,null,null)),e.pb(16,147456,null,0,s.u,[e.k,e.C,[2,s.z]],{value:[0,"value"]},null),e.pb(17,147456,null,0,s.F,[e.k,e.C,[8,null]],{value:[0,"value"]},null),(l()(),e.Kb(-1,null,["ISSN"])),(l()(),e.qb(19,0,null,null,3,"option",[["value","identifier|lccn"]],null,null,null,null,null)),e.pb(20,147456,null,0,s.u,[e.k,e.C,[2,s.z]],{value:[0,"value"]},null),e.pb(21,147456,null,0,s.F,[e.k,e.C,[8,null]],{value:[0,"value"]},null),(l()(),e.Kb(-1,null,["LCCN"])),(l()(),e.qb(23,0,null,null,3,"option",[["value","identifier|tcn"]],null,null,null,null,null)),e.pb(24,147456,null,0,s.u,[e.k,e.C,[2,s.z]],{value:[0,"value"]},null),e.pb(25,147456,null,0,s.F,[e.k,e.C,[8,null]],{value:[0,"value"]},null),(l()(),e.Kb(-1,null,["TCN"])),(l()(),e.qb(27,0,null,null,3,"option",[["value","item_barcode"]],null,null,null,null,null)),e.pb(28,147456,null,0,s.u,[e.k,e.C,[2,s.z]],{value:[0,"value"]},null),e.pb(29,147456,null,0,s.F,[e.k,e.C,[8,null]],{value:[0,"value"]},null),(l()(),e.Kb(-1,null,["Item Barcode"])),(l()(),e.qb(31,0,null,null,1,"label",[["class","ml-2"],["for","ident-value"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Value"])),(l()(),e.qb(33,0,null,null,5,"input",[["class","form-control ml-2"],["id","ident-query-input"],["name","ident-value"],["placeholder","Numeric Query..."],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keyup.enter"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,u){var t=!0,a=l.component;return"input"===n&&(t=!1!==e.Cb(l,34)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,34).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Cb(l,34)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Cb(l,34)._compositionEnd(u.target.value)&&t),"ngModelChange"===n&&(t=!1!==(a.context.identSearch.value=u)&&t),"keyup.enter"===n&&(t=!1!==a.searchByForm()&&t),t}),null,null)),e.pb(34,16384,null,0,s.d,[e.C,e.k,[2,s.a]],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.d]),e.pb(36,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(38,16384,null,0,s.q,[[4,s.p]],null,null)],(function(l,n){var u=n.component;l(n,8,0,"ident-type",u.context.identSearch.queryType),l(n,12,0,"identifier|isbn"),l(n,13,0,"identifier|isbn"),l(n,16,0,"identifier|issn"),l(n,17,0,"identifier|issn"),l(n,20,0,"identifier|lccn"),l(n,21,0,"identifier|lccn"),l(n,24,0,"identifier|tcn"),l(n,25,0,"identifier|tcn"),l(n,28,0,"item_barcode"),l(n,29,0,"item_barcode"),l(n,36,0,"ident-value",u.context.identSearch.value)}),(function(l,n){l(n,5,0,e.Cb(n,10).ngClassUntouched,e.Cb(n,10).ngClassTouched,e.Cb(n,10).ngClassPristine,e.Cb(n,10).ngClassDirty,e.Cb(n,10).ngClassValid,e.Cb(n,10).ngClassInvalid,e.Cb(n,10).ngClassPending),l(n,33,0,e.Cb(n,38).ngClassUntouched,e.Cb(n,38).ngClassTouched,e.Cb(n,38).ngClassPristine,e.Cb(n,38).ngClassDirty,e.Cb(n,38).ngClassValid,e.Cb(n,38).ngClassInvalid,e.Cb(n,38).ngClassPending)}))}function Sl(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,30,"div",[["class","form-inline mt-2"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"label",[],[[8,"htmlFor",0]],null,null,null,null)),(l()(),e.Kb(-1,null,["Tag"])),(l()(),e.qb(3,0,null,null,5,"input",[["class","form-control ml-2"],["size","3"],["type","text"]],[[8,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keyup.enter"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,u){var t=!0,a=l.component;return"input"===n&&(t=!1!==e.Cb(l,4)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,4).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Cb(l,4)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Cb(l,4)._compositionEnd(u.target.value)&&t),"ngModelChange"===n&&(t=!1!==(a.context.marcSearch.tags[l.context.index]=u)&&t),"keyup.enter"===n&&(t=!1!==a.searchByForm()&&t),t}),null,null)),e.pb(4,16384,null,0,s.d,[e.C,e.k,[2,s.a]],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.d]),e.pb(6,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(8,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(9,0,null,null,1,"label",[["class","ml-2"]],[[8,"htmlFor",0]],null,null,null,null)),(l()(),e.Kb(-1,null,["Subfield"])),(l()(),e.qb(11,0,null,null,5,"input",[["class","form-control ml-2"],["size","1"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keyup.enter"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,u){var t=!0,a=l.component;return"input"===n&&(t=!1!==e.Cb(l,12)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,12).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Cb(l,12)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Cb(l,12)._compositionEnd(u.target.value)&&t),"ngModelChange"===n&&(t=!1!==(a.context.marcSearch.subfields[l.context.index]=u)&&t),"keyup.enter"===n&&(t=!1!==a.searchByForm()&&t),t}),null,null)),e.pb(12,16384,null,0,s.d,[e.C,e.k,[2,s.a]],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.d]),e.pb(14,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(16,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(17,0,null,null,1,"label",[["class","ml-2"]],[[8,"htmlFor",0]],null,null,null,null)),(l()(),e.Kb(-1,null,["Value"])),(l()(),e.qb(19,0,null,null,5,"input",[["class","form-control ml-2"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keyup.enter"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,u){var t=!0,a=l.component;return"input"===n&&(t=!1!==e.Cb(l,20)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,20).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Cb(l,20)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Cb(l,20)._compositionEnd(u.target.value)&&t),"ngModelChange"===n&&(t=!1!==(a.context.marcSearch.values[l.context.index]=u)&&t),"keyup.enter"===n&&(t=!1!==a.searchByForm()&&t),t}),null,null)),e.pb(20,16384,null,0,s.d,[e.C,e.k,[2,s.a]],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.d]),e.pb(22,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(24,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(25,0,null,null,2,"button",[["class","btn btn-sm material-icon-button ml-2"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.addMarcSearchRow(l.context.index+1)&&e),e}),null,null)),(l()(),e.qb(26,0,null,null,1,"span",[["class","material-icons"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["add_circle_outline"])),(l()(),e.qb(28,0,null,null,2,"button",[["class","btn btn-sm material-icon-button ml-2"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.delMarcSearchRow(l.context.index)&&e),e}),null,null)),(l()(),e.qb(29,0,null,null,1,"span",[["class","material-icons"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["remove_circle_outline"]))],(function(l,n){var u=n.component;l(n,6,0,e.ub(1,"marc-tag-",n.context.index,""),u.context.marcSearch.tags[n.context.index]),l(n,14,0,e.ub(1,"marc-subfield-",n.context.index,""),u.context.marcSearch.subfields[n.context.index]),l(n,22,0,e.ub(1,"marc-value-",n.context.index,""),u.context.marcSearch.values[n.context.index])}),(function(l,n){var u=n.component;l(n,1,0,e.ub(1,"marc-tag-",n.context.index,"")),l(n,3,0,e.ub(1,"",0==n.context.index?"first-marc-tag":"",""),e.Cb(n,8).ngClassUntouched,e.Cb(n,8).ngClassTouched,e.Cb(n,8).ngClassPristine,e.Cb(n,8).ngClassDirty,e.Cb(n,8).ngClassValid,e.Cb(n,8).ngClassInvalid,e.Cb(n,8).ngClassPending),l(n,9,0,e.ub(1,"marc-subfield-",n.context.index,"")),l(n,11,0,e.Cb(n,16).ngClassUntouched,e.Cb(n,16).ngClassTouched,e.Cb(n,16).ngClassPristine,e.Cb(n,16).ngClassDirty,e.Cb(n,16).ngClassValid,e.Cb(n,16).ngClassInvalid,e.Cb(n,16).ngClassPending),l(n,17,0,e.ub(1,"marc-value-",n.context.index,"")),l(n,19,0,e.Cb(n,24).ngClassUntouched,e.Cb(n,24).ngClassTouched,e.Cb(n,24).ngClassPristine,e.Cb(n,24).ngClassDirty,e.Cb(n,24).ngClassValid,e.Cb(n,24).ngClassInvalid,e.Cb(n,24).ngClassPending),l(n,28,0,u.context.marcSearch.values.length<2)}))}function Tl(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,3,"div",[["class","row mt-4"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,2,"div",[["class","col-lg-12"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,Sl)),e.pb(3,278528,null,0,c.o,[e.N,e.K,e.r],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null)],(function(l,n){var u=n.component;l(n,3,0,u.context.marcSearch.values,u.trackByIdx)}),null)}function Kl(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,33,"div",[["class","row mt-4"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,32,"div",[["class","col-lg-12 form-inline"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,1,"label",[["for","field-class"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Browse for"])),(l()(),e.qb(4,0,null,null,21,"select",[["class","form-control ml-2"],["name","field-class"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0,a=l.component;return"change"===n&&(t=!1!==e.Cb(l,5).onChange(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,5).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(a.context.browseSearch.fieldClass=u)&&t),t}),null,null)),e.pb(5,16384,null,0,s.z,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.z]),e.pb(7,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(9,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(10,0,null,null,3,"option",[["value","title"]],null,null,null,null,null)),e.pb(11,147456,null,0,s.u,[e.k,e.C,[2,s.z]],{value:[0,"value"]},null),e.pb(12,147456,null,0,s.F,[e.k,e.C,[8,null]],{value:[0,"value"]},null),(l()(),e.Kb(-1,null,["Title"])),(l()(),e.qb(14,0,null,null,3,"option",[["value","author"]],null,null,null,null,null)),e.pb(15,147456,null,0,s.u,[e.k,e.C,[2,s.z]],{value:[0,"value"]},null),e.pb(16,147456,null,0,s.F,[e.k,e.C,[8,null]],{value:[0,"value"]},null),(l()(),e.Kb(-1,null,["Author"])),(l()(),e.qb(18,0,null,null,3,"option",[["value","subject"]],null,null,null,null,null)),e.pb(19,147456,null,0,s.u,[e.k,e.C,[2,s.z]],{value:[0,"value"]},null),e.pb(20,147456,null,0,s.F,[e.k,e.C,[8,null]],{value:[0,"value"]},null),(l()(),e.Kb(-1,null,["Subject"])),(l()(),e.qb(22,0,null,null,3,"option",[["value","series"]],null,null,null,null,null)),e.pb(23,147456,null,0,s.u,[e.k,e.C,[2,s.z]],{value:[0,"value"]},null),e.pb(24,147456,null,0,s.F,[e.k,e.C,[8,null]],{value:[0,"value"]},null),(l()(),e.Kb(-1,null,["Series"])),(l()(),e.qb(26,0,null,null,1,"label",[["class","ml-2"],["for","query"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,[" starting with "])),(l()(),e.qb(28,0,null,null,5,"input",[["class","form-control ml-2"],["id","browse-term-input"],["name","query"],["placeholder","Browse for..."],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keyup.enter"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,u){var t=!0,a=l.component;return"input"===n&&(t=!1!==e.Cb(l,29)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,29).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Cb(l,29)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Cb(l,29)._compositionEnd(u.target.value)&&t),"ngModelChange"===n&&(t=!1!==(a.context.browseSearch.value=u)&&t),"keyup.enter"===n&&(t=!1!==a.searchByForm()&&t),t}),null,null)),e.pb(29,16384,null,0,s.d,[e.C,e.k,[2,s.a]],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.d]),e.pb(31,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(33,16384,null,0,s.q,[[4,s.p]],null,null)],(function(l,n){var u=n.component;l(n,7,0,"field-class",u.context.browseSearch.fieldClass),l(n,11,0,"title"),l(n,12,0,"title"),l(n,15,0,"author"),l(n,16,0,"author"),l(n,19,0,"subject"),l(n,20,0,"subject"),l(n,23,0,"series"),l(n,24,0,"series"),l(n,31,0,"query",u.context.browseSearch.value)}),(function(l,n){l(n,4,0,e.Cb(n,9).ngClassUntouched,e.Cb(n,9).ngClassTouched,e.Cb(n,9).ngClassPristine,e.Cb(n,9).ngClassDirty,e.Cb(n,9).ngClassValid,e.Cb(n,9).ngClassInvalid,e.Cb(n,9).ngClassPending),l(n,28,0,e.Cb(n,33).ngClassUntouched,e.Cb(n,33).ngClassTouched,e.Cb(n,33).ngClassPristine,e.Cb(n,33).ngClassDirty,e.Cb(n,33).ngClassValid,e.Cb(n,33).ngClassInvalid,e.Cb(n,33).ngClassPending)}))}function Dl(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,9,"div",[["class","row mt-4"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,8,"div",[["class","col-lg-12 form-inline"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,1,"label",[["for","cnbrowse-term-input"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,[" Browse Call Numbers starting with "])),(l()(),e.qb(4,0,null,null,5,"input",[["class","form-control ml-2"],["id","cnbrowse-term-input"],["name","query"],["placeholder","Browse Call Numbers..."],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keyup.enter"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,u){var t=!0,a=l.component;return"input"===n&&(t=!1!==e.Cb(l,5)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,5).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Cb(l,5)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Cb(l,5)._compositionEnd(u.target.value)&&t),"ngModelChange"===n&&(t=!1!==(a.context.cnBrowseSearch.value=u)&&t),"keyup.enter"===n&&(t=!1!==a.searchByForm()&&t),t}),null,null)),e.pb(5,16384,null,0,s.d,[e.C,e.k,[2,s.a]],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.d]),e.pb(7,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(9,16384,null,0,s.q,[[4,s.p]],null,null)],(function(l,n){l(n,7,0,"query",n.component.context.cnBrowseSearch.value)}),(function(l,n){l(n,4,0,e.Cb(n,9).ngClassUntouched,e.Cb(n,9).ngClassTouched,e.Cb(n,9).ngClassPristine,e.Cb(n,9).ngClassDirty,e.Cb(n,9).ngClassValid,e.Cb(n,9).ngClassInvalid,e.Cb(n,9).ngClassPending)}))}function Nl(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,54,"div",[["class","row pt-3 pb-3 mb-3"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,33,"div",[["class","col-lg-8"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,32,"ngb-tabset",[],null,[[null,"tabChange"]],(function(l,n,u){var e=!0;return"tabChange"===n&&(e=!1!==l.component.onTabChange(u)&&e),e}),o.k,o.f)),e.pb(3,2146304,[["searchTabs",4]],1,b.eb,[b.fb],{activeId:[0,"activeId"]},{tabChange:"tabChange"}),e.Ib(603979776,1,{tabs:1}),(l()(),e.qb(5,0,null,null,5,"ngb-tab",[["id","term"],["title","Keyword Search"]],null,null,null,null,null)),e.pb(6,2113536,[[1,4]],2,b.bb,[],{id:[0,"id"],title:[1,"title"]},null),e.Ib(603979776,2,{titleTpls:1}),e.Ib(603979776,3,{contentTpls:1}),(l()(),e.fb(0,null,null,1,null,xl)),e.pb(10,16384,[[3,4]],0,b.cb,[e.K],null,null),(l()(),e.qb(11,0,null,null,5,"ngb-tab",[["id","ident"],["title","Numeric Search"]],null,null,null,null,null)),e.pb(12,2113536,[[1,4]],2,b.bb,[],{id:[0,"id"],title:[1,"title"]},null),e.Ib(603979776,4,{titleTpls:1}),e.Ib(603979776,5,{contentTpls:1}),(l()(),e.fb(0,null,null,1,null,Ml)),e.pb(16,16384,[[5,4]],0,b.cb,[e.K],null,null),(l()(),e.qb(17,0,null,null,5,"ngb-tab",[["id","marc"],["title","MARC Search"]],null,null,null,null,null)),e.pb(18,2113536,[[1,4]],2,b.bb,[],{id:[0,"id"],title:[1,"title"]},null),e.Ib(603979776,6,{titleTpls:1}),e.Ib(603979776,7,{contentTpls:1}),(l()(),e.fb(0,null,null,1,null,Tl)),e.pb(22,16384,[[7,4]],0,b.cb,[e.K],null,null),(l()(),e.qb(23,0,null,null,5,"ngb-tab",[["id","browse"],["title","Browse"]],null,null,null,null,null)),e.pb(24,2113536,[[1,4]],2,b.bb,[],{id:[0,"id"],title:[1,"title"]},null),e.Ib(603979776,8,{titleTpls:1}),e.Ib(603979776,9,{contentTpls:1}),(l()(),e.fb(0,null,null,1,null,Kl)),e.pb(28,16384,[[9,4]],0,b.cb,[e.K],null,null),(l()(),e.qb(29,0,null,null,5,"ngb-tab",[["id","cnbrowse"],["title","Shelf Browse"]],null,null,null,null,null)),e.pb(30,2113536,[[1,4]],2,b.bb,[],{id:[0,"id"],title:[1,"title"]},null),e.Ib(603979776,10,{titleTpls:1}),e.Ib(603979776,11,{contentTpls:1}),(l()(),e.fb(0,null,null,1,null,Dl)),e.pb(34,16384,[[11,4]],0,b.cb,[e.K],null,null),(l()(),e.qb(35,0,null,null,19,"div",[["class","col-lg-4"]],null,null,null,null,null)),(l()(),e.qb(36,0,null,null,10,"div",[["class","row"]],null,null,null,null,null)),(l()(),e.qb(37,0,null,null,9,"div",[["class","col-lg-12"]],null,null,null,null,null)),(l()(),e.qb(38,0,null,null,8,"div",[["class","card"]],null,null,null,null,null)),(l()(),e.qb(39,0,null,null,7,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),e.qb(40,0,null,null,6,"div",[["class","float-right d-flex"]],null,null,null,null,null)),(l()(),e.qb(41,0,null,null,1,"eg-org-select",[],null,[[null,"onChange"]],(function(l,n,u){var e=!0;return"onChange"===n&&(e=!1!==l.component.orgOnChange(u)&&e),e}),d.b,d.a)),e.pb(42,114688,null,0,p.a,[h.a,g.a,m.a,f.a],{placeholder:[0,"placeholder"],initialOrg:[1,"initialOrg"]},{onChange:"onChange"}),(l()(),e.qb(43,0,null,null,1,"button",[["class","btn btn-success mr-1 ml-1"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,u){var e=!0,t=l.component;return"click"===n&&(t.context.pager.offset=0,e=!1!==t.searchByForm()&&e),e}),null,null)),(l()(),e.Kb(-1,null,[" Search "])),(l()(),e.qb(45,0,null,null,1,"button",[["class","btn btn-warning mr-1"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.context.reset()&&e),e}),null,null)),(l()(),e.Kb(-1,null,[" Reset "])),(l()(),e.qb(47,0,null,null,3,"div",[["class","row mt-1"]],null,null,null,null,null)),(l()(),e.qb(48,0,null,null,2,"div",[["class","col-lg-12"]],null,null,null,null,null)),(l()(),e.qb(49,0,null,null,1,"eg-catalog-search-templates",[],null,null,null,V,P)),e.pb(50,114688,null,0,N,[m.a,g.a,_.a,K.a,I.a,x.a,M.a,T,b.E],{searchTab:[0,"searchTab"]},null),(l()(),e.qb(51,0,null,null,3,"div",[["class","row mt-1"]],null,null,null,null,null)),(l()(),e.qb(52,0,null,null,2,"div",[["class","col-lg-12"]],null,null,null,null,null)),(l()(),e.qb(53,0,null,null,1,"eg-catalog-basket-actions",[],null,null,null,ul,nl)),e.pb(54,114688,null,0,ll,[C.l,Q.b,h.a,X.a,Y.a],null,null)],(function(l,n){var u=n.component;l(n,3,0,u.searchTab),l(n,6,0,"term","Keyword Search"),l(n,12,0,"ident","Numeric Search"),l(n,18,0,"marc","MARC Search"),l(n,24,0,"browse","Browse"),l(n,30,0,"cnbrowse","Shelf Browse"),l(n,42,0,"Library",u.context.searchOrg),l(n,50,0,u.searchTab),l(n,54,0)}),(function(l,n){var u=n.component;l(n,43,0,u.searchIsActive()),l(n,45,0,u.searchIsActive())}))}function Pl(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,4,"div",[["id","staffcat-search-form"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,ol)),e.pb(2,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,Nl)),e.pb(4,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component;l(n,2,0,!u.showThyself),l(n,4,0,u.showThyself)}),null)}class Hl{constructor(l,n){this.basket=l,this.staffCat=n}ngOnInit(){this.staffCat.createContext()}}var Al=e.ob({encapsulation:2,styles:[],data:{}});function Fl(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,"eg-staff-banner",[["bannerText","Staff Catalog (Experimental)"]],null,null,null,i.b,i.a)),e.pb(1,49152,null,0,r.a,[],{bannerText:[0,"bannerText"]},null),(l()(),e.qb(2,0,null,null,1,"eg-catalog-search-form",[],null,null,null,Pl,al)),e.pb(3,4308992,null,0,tl,[e.C,C.l,C.a,m.a,x.a,T],null,null),(l()(),e.qb(4,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),e.pb(5,212992,null,0,C.p,[C.b,e.N,e.j,[8,null],e.h],null,null)],(function(l,n){l(n,1,0,"Staff Catalog (Experimental)"),l(n,3,0),l(n,5,0)}),null)}function Ol(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,"ng-component",[],null,null,null,Fl,Al)),e.pb(1,114688,null,0,Hl,[Y.a,T],null,null)],(function(l,n){l(n,1,0)}),null)}var El=e.mb("ng-component",Hl,Ol,{},{},[]),Rl=u("WZ78"),Bl=u("ayJW"),Ll=u("cUpR");const Ul={display:[{facetClass:"author",facetOrder:["personal","corporate"]},{facetClass:"subject",facetOrder:["topic"]},{facetClass:"identifier",facetOrder:["genre"]},{facetClass:"series",facetOrder:["seriestitle"]},{facetClass:"subject",facetOrder:["name","geographic"]}],displayCount:5};class jl{constructor(l,n,u){this.cat=l,this.catUrl=n,this.staffCat=u,this.facetConfig=Ul}ngOnInit(){this.searchContext=this.staffCat.searchContext}facetIsApplied(l,n,u){return this.searchContext.termSearch.hasFacet(new S.d(l,n,u))}getFacetUrlParams(l,n,u){const e=this.staffCat.cloneContext(this.searchContext);return e.termSearch.toggleFacet(new S.d(l,n,u)),e.pager.offset=0,this.catUrl.toUrlParams(e)}}var $l=e.ob({encapsulation:0,styles:[".facet-selected[_ngcontent-%COMP%] {\n    background-color: #DDD;\n  }\n  .card[_ngcontent-%COMP%] {\n    width: 100%;\n  }\n  .list-group-item[_ngcontent-%COMP%] {padding: .5rem .75rem .5rem .75rem}"],data:{}});function Vl(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,10,"li",[["class","list-group-item"]],null,null,null,null,null)),e.Hb(512,null,c.N,c.O,[e.r,e.s,e.k,e.C]),e.pb(2,278528,null,0,c.n,[c.N],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),e.Fb(3,{"facet-selected":0}),(l()(),e.qb(4,0,null,null,6,"div",[["class","row"]],null,null,null,null,null)),(l()(),e.qb(5,0,null,null,3,"div",[["class","col-lg-9"]],null,null,null,null,null)),(l()(),e.qb(6,0,null,null,2,"a",[["class","card-link"],["routerLink","/staff/catalog/search"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Cb(l,7).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.pb(7,671744,null,0,C.n,[C.l,C.a,c.m],{queryParams:[0,"queryParams"],routerLink:[1,"routerLink"]},null),(l()(),e.Kb(8,null,[" "," "])),(l()(),e.qb(9,0,null,null,1,"div",[["class","col-lg-3"]],null,null,null,null,null)),(l()(),e.Kb(10,null,["",""]))],(function(l,n){var u=n.component,e=l(n,3,0,u.facetIsApplied(n.parent.parent.parent.parent.context.$implicit.facetClass,n.parent.parent.context.$implicit,n.context.$implicit.value));l(n,2,0,"list-group-item",e),l(n,7,0,u.getFacetUrlParams(n.parent.parent.parent.parent.context.$implicit.facetClass,n.parent.parent.context.$implicit,n.context.$implicit.value),"/staff/catalog/search")}),(function(l,n){l(n,6,0,e.Cb(n,7).target,e.Cb(n,7).href),l(n,8,0,n.context.$implicit.value),l(n,10,0,n.context.$implicit.count)}))}function Gl(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,7,"div",[["class","row"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,6,"div",[["class","card mb-2"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,1,"h4",[["class","card-header"]],null,null,null,null,null)),(l()(),e.Kb(3,null,[" "," "])),(l()(),e.qb(4,0,null,null,3,"ul",[["class","list-group list-group-flush"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,2,null,Vl)),e.pb(6,278528,null,0,c.o,[e.N,e.K,e.r],{ngForOf:[0,"ngForOf"]},null),e.Eb(0,c.B,[])],(function(l,n){var u=n.component;l(n,6,0,e.Lb(n,6,0,e.Cb(n,7).transform(u.searchContext.result.facetData[n.parent.parent.parent.context.$implicit.facetClass][n.parent.context.$implicit].valueList,0,u.facetConfig.displayCount)))}),(function(l,n){l(n,3,0,n.component.searchContext.result.facetData[n.parent.parent.parent.context.$implicit.facetClass][n.parent.context.$implicit].cmfLabel)}))}function zl(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,Gl)),e.pb(2,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,2,0,n.component.searchContext.result.facetData[n.parent.parent.context.$implicit.facetClass][n.context.$implicit])}),null)}function Wl(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,zl)),e.pb(2,278528,null,0,c.o,[e.N,e.K,e.r],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,2,0,n.parent.context.$implicit.facetOrder)}),null)}function Jl(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,Wl)),e.pb(2,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,2,0,n.component.searchContext.result.facetData[n.context.$implicit.facetClass])}),null)}function Ql(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,Jl)),e.pb(2,278528,null,0,c.o,[e.N,e.K,e.r],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,2,0,n.component.facetConfig.display)}),null)}function Zl(l){return e.Mb(0,[(l()(),e.fb(16777216,null,null,1,null,Ql)),e.pb(1,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,1,0,n.component.searchContext.result.facetData)}),null)}var Yl=u("XKii");class Xl{constructor(){}ngOnInit(){}getDisplayStrings(){const l=this.usePlaceholder?"â€‡":"";return this.summary?(n=this.summary.displayHighlights[this.field]||this.summary.display[this.field],Array.isArray(n)?n:[n||l]):[l];var n}}var ln=e.ob({encapsulation:2,styles:[[".oils_SH{font-weight:bolder;background-color:#9f9}.oils_SH.identifier{font-weight:bolder;background-color:#42b0f4}"]],data:{}});function nn(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,null,null,null,null,null,null,null)),(l()(),e.Kb(1,null,[""," "]))],null,(function(l,n){l(n,1,0,n.component.joiner)}))}function un(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,3,null,null,null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,nn)),e.pb(2,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(3,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null))],(function(l,n){l(n,2,0,n.component.joiner&&!n.context.first)}),(function(l,n){l(n,3,0,n.context.$implicit)}))}function en(l){return e.Mb(0,[(l()(),e.fb(16777216,null,null,1,null,un)),e.pb(1,278528,null,0,c.o,[e.N,e.K,e.r],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,1,0,n.component.getDisplayStrings())}),null)}class tn{constructor(l,n,u,e,t,a,o,i){this.router=l,this.org=n,this.net=u,this.bib=e,this.cat=t,this.catUrl=a,this.staffCat=o,this.basket=i}ngOnInit(){this.searchContext=this.staffCat.searchContext,this.summary.getHoldCount(),this.isRecordSelected=this.basket.hasRecordId(this.summary.id),this.basketSub=this.basket.onChange.subscribe(()=>{this.isRecordSelected=this.basket.hasRecordId(this.summary.id)})}ngOnDestroy(){this.basketSub.unsubscribe()}orgName(l){return this.org.get(l).shortname()}iconFormatLabel(l){return this.cat.iconFormatLabel(l)}placeHold(){let l="T",n=this.summary.id;this.searchContext.termSearch.isMetarecordSearch()&&(l="M",n=this.summary.metabibId),this.router.navigate(["/staff/catalog/hold/"+l],{queryParams:{target:n}})}addToList(){alert("Adding to list for bib "+this.summary.id)}getAuthorSearchParams(l){return this.staffCat.getAuthorSearchParams(l)}appendFromMrParam(l){const n=this.staffCat.cloneContext(this.searchContext);return n.termSearch.fromMetarecord=l.metabibId,this.catUrl.toUrlParams(n)}hasMrConstituentRecords(l){return l.metabibId&&l.metabibRecords.length>1}currentParams(){return this.catUrl.toUrlParams(this.searchContext)}toggleBasketEntry(){return this.isRecordSelected?this.basket.addRecordIds([this.summary.id]):this.basket.removeRecordIds([this.summary.id])}}var an=e.ob({encapsulation:0,styles:[[".record-jacket-div[_ngcontent-%COMP%]{width:120px}.record-jacket-div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;max-height:158px;max-width:100px}"]],data:{}});function on(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,3,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,2,"a",[["routerLink","/staff/catalog/search"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Cb(l,2).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.pb(2,671744,null,0,C.n,[C.l,C.a,c.m],{queryParams:[0,"queryParams"],routerLink:[1,"routerLink"]},null),(l()(),e.qb(3,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null))],(function(l,n){var u=n.component;l(n,2,0,u.appendFromMrParam(u.summary),"/staff/catalog/search")}),(function(l,n){var u=n.component;l(n,1,0,e.Cb(n,2).target,e.Cb(n,2).href),l(n,3,0,e.ub(1,"/opac/extras/ac/jacket/medium/r/",u.summary.id,""))}))}function rn(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,3,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,2,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Cb(l,2).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.pb(2,671744,null,0,C.n,[C.l,C.a,c.m],{queryParams:[0,"queryParams"],routerLink:[1,"routerLink"]},null),(l()(),e.qb(3,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null))],(function(l,n){var u=n.component;l(n,2,0,u.currentParams(),e.ub(1,"/staff/catalog/record/",u.summary.id,""))}),(function(l,n){var u=n.component;l(n,1,0,e.Cb(n,2).target,e.Cb(n,2).href),l(n,3,0,e.ub(1,"/opac/extras/ac/jacket/medium/r/",u.summary.id,""))}))}function sn(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"div",[["class","pl-2 font-weight-bold"]],null,null,null,null,null)),(l()(),e.Kb(2,null,[" "," "," "," @ "," "]))],null,(function(l,n){var u=n.component;l(n,2,0,u.callNumber.prefix().label(),u.callNumber.label(),u.callNumber.suffix().label(),u.orgName(u.callNumber.owning_lib()))}))}function cn(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,4,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,3,"a",[["routerLink","/staff/catalog/search"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Cb(l,2).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.pb(2,671744,null,0,C.n,[C.l,C.a,c.m],{queryParams:[0,"queryParams"],routerLink:[1,"routerLink"]},null),(l()(),e.qb(3,0,null,null,1,"eg-bib-display-field",[["field","title"]],null,null,null,en,ln)),e.pb(4,114688,null,0,Xl,[],{summary:[0,"summary"],field:[1,"field"],usePlaceholder:[2,"usePlaceholder"]},null)],(function(l,n){var u=n.component;l(n,2,0,u.appendFromMrParam(u.summary),"/staff/catalog/search"),l(n,4,0,u.summary,"title",!0)}),(function(l,n){l(n,1,0,e.Cb(n,2).target,e.Cb(n,2).href)}))}function bn(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,4,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,3,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Cb(l,2).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.pb(2,671744,null,0,C.n,[C.l,C.a,c.m],{queryParams:[0,"queryParams"],routerLink:[1,"routerLink"]},null),(l()(),e.qb(3,0,null,null,1,"eg-bib-display-field",[["field","title"]],null,null,null,en,ln)),e.pb(4,114688,null,0,Xl,[],{summary:[0,"summary"],field:[1,"field"],usePlaceholder:[2,"usePlaceholder"]},null)],(function(l,n){var u=n.component;l(n,2,0,u.currentParams(),e.ub(1,"/staff/catalog/record/",u.summary.id,"")),l(n,4,0,u.summary,"title",!0)}),(function(l,n){l(n,1,0,e.Cb(n,2).target,e.Cb(n,2).href)}))}function dn(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,4,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,3,"span",[["class","pr-1"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,0,"img",[["class","pr-1"]],[[8,"src",4]],null,null,null,null)),(l()(),e.qb(3,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Kb(4,null,["",""]))],null,(function(l,n){var u=n.component;l(n,2,0,e.ub(1,"/images/format_icons/icon_format/",n.context.$implicit,".png")),l(n,4,0,u.iconFormatLabel(n.context.$implicit))}))}function pn(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,dn)),e.pb(2,278528,null,0,c.o,[e.N,e.K,e.r],{ngForOf:[0,"ngForOf"]},null),(l()(),e.fb(0,null,null,0))],(function(l,n){l(n,2,0,n.component.summary.attributes.icon_format)}),null)}function hn(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,4,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,3,"div",[["class","pb-1"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Phys. Desc.: "])),(l()(),e.qb(3,0,null,null,1,"eg-bib-display-field",[["field","physical_description"],["joiner",","]],null,null,null,en,ln)),e.pb(4,114688,null,0,Xl,[],{summary:[0,"summary"],field:[1,"field"],joiner:[2,"joiner"]},null)],(function(l,n){l(n,4,0,n.component.summary,"physical_description",",")}),null)}function gn(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,4,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,3,"div",[["class","pb-1"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Edition: "])),(l()(),e.qb(3,0,null,null,1,"eg-bib-display-field",[["field","edition"],["joiner",","]],null,null,null,en,ln)),e.pb(4,114688,null,0,Xl,[],{summary:[0,"summary"],field:[1,"field"],joiner:[2,"joiner"]},null)],(function(l,n){l(n,4,0,n.component.summary,"edition",",")}),null)}function mn(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,4,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,3,"div",[["class","pb-1"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Publisher: "])),(l()(),e.qb(3,0,null,null,1,"eg-bib-display-field",[["field","publisher"]],null,null,null,en,ln)),e.pb(4,114688,null,0,Xl,[],{summary:[0,"summary"],field:[1,"field"]},null)],(function(l,n){l(n,4,0,n.component.summary,"publisher")}),null)}function fn(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,3,"div",[["class","pb-1"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Pub Date: "])),(l()(),e.qb(2,0,null,null,1,"eg-bib-display-field",[["field","pubdate"]],null,null,null,en,ln)),e.pb(3,114688,null,0,Xl,[],{summary:[0,"summary"],field:[1,"field"]},null)],(function(l,n){l(n,3,0,n.component.summary,"pubdate")}),null)}function Cn(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,3,null,null,null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,mn)),e.pb(2,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(l()(),e.fb(0,[["pubDate",2]],null,0,null,fn))],(function(l,n){l(n,2,0,n.component.summary.display.publisher,e.Cb(n,3))}),null)}function vn(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,4,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,3,"div",[["class","pb-1"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["ISBN: "])),(l()(),e.qb(3,0,null,null,1,"eg-bib-display-field",[["field","isbn"],["joiner",","]],null,null,null,en,ln)),e.pb(4,114688,null,0,Xl,[],{summary:[0,"summary"],field:[1,"field"],joiner:[2,"joiner"]},null)],(function(l,n){l(n,4,0,n.component.summary,"isbn",",")}),null)}function yn(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,4,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,3,"div",[["class","pb-1"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["UPC: "])),(l()(),e.qb(3,0,null,null,1,"eg-bib-display-field",[["field","upc"],["joiner",","]],null,null,null,en,ln)),e.pb(4,114688,null,0,Xl,[],{summary:[0,"summary"],field:[1,"field"],joiner:[2,"joiner"]},null)],(function(l,n){l(n,4,0,n.component.summary,"upc",",")}),null)}function qn(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,4,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,3,"div",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["ISSN: "])),(l()(),e.qb(3,0,null,null,1,"eg-bib-display-field",[["field","issn"],["joiner",","]],null,null,null,en,ln)),e.pb(4,114688,null,0,Xl,[],{summary:[0,"summary"],field:[1,"field"],joiner:[2,"joiner"]},null)],(function(l,n){l(n,4,0,n.component.summary,"issn",",")}),null)}function kn(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,5,"div",[["class","w-100"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,2,"div",[["class","float-left text-left w-50"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,1,"span",[["class","pr-1"]],null,null,null,null,null)),(l()(),e.Kb(3,null,[" "," / "," items "])),(l()(),e.qb(4,0,null,null,1,"div",[["class","float-left w-50"]],null,null,null,null,null)),(l()(),e.Kb(5,null,[" @ "," "]))],null,(function(l,n){var u=n.component;l(n,3,0,n.parent.context.$implicit.available,n.parent.context.$implicit.count),l(n,5,0,u.orgName(n.parent.context.$implicit.org_unit))}))}function In(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,5,"div",[["class","row"]],null,null,null,null,null)),e.Hb(512,null,c.N,c.O,[e.r,e.s,e.k,e.C]),e.pb(2,278528,null,0,c.n,[c.N],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),e.Fb(3,{"pt-2":0}),(l()(),e.fb(16777216,null,null,1,null,kn)),e.pb(5,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=l(n,3,0,n.component.copyIndex>0);l(n,2,0,"row",u),l(n,5,0,"staff"==n.context.$implicit.type)}),null)}function _n(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,"a",[["target","_self"]],[[8,"href",4]],null,null,null,null)),(l()(),e.Kb(1,null,[" "," "]))],null,(function(l,n){var u=n.component;l(n,0,0,e.ub(1,"/eg/staff/circ/patron/",u.summary.record.creator().id(),"/checkout")),l(n,1,0,u.summary.record.creator().usrname())}))}function wn(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,[" ... "]))],null,null)}function xn(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,"a",[["target","_self"]],[[8,"href",4]],null,null,null,null)),(l()(),e.Kb(1,null,[" "," "]))],null,(function(l,n){var u=n.component;l(n,0,0,e.ub(1,"/eg/staff/circ/patron/",u.summary.record.editor().id(),"/checkout")),l(n,1,0,u.summary.record.editor().usrname())}))}function Mn(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,[" ... "]))],null,null)}function Sn(l){return e.Mb(0,[e.Eb(0,c.f,[e.t]),(l()(),e.qb(1,0,null,null,88,"div",[["class","col-lg-12 card tight-card mb-2 bg-light"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,87,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),e.qb(3,0,null,null,86,"div",[["class","row"]],null,null,null,null,null)),(l()(),e.qb(4,0,null,null,47,"div",[["class","col-lg-7 d-flex"]],null,null,null,null,null)),(l()(),e.qb(5,0,null,null,8,"label",[["class","checkbox"]],null,null,null,null,null)),(l()(),e.qb(6,0,null,null,1,"span",[["class","font-weight-bold font-italic"]],null,null,null,null,null)),(l()(),e.Kb(7,null,[" ",". "])),(l()(),e.qb(8,0,null,null,5,"input",[["class","pl-1"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0,a=l.component;return"change"===n&&(t=!1!==e.Cb(l,9).onChange(u.target.checked)&&t),"blur"===n&&(t=!1!==e.Cb(l,9).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(a.isRecordSelected=u)&&t),"change"===n&&(t=!1!==a.toggleBasketEntry()&&t),t}),null,null)),e.pb(9,16384,null,0,s.b,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.b]),e.pb(11,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(13,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(14,0,null,null,4,"div",[["class","pl-2 record-jacket-div"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,on)),e.pb(16,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,rn)),e.pb(18,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,sn)),e.pb(20,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(21,0,null,null,30,"div",[["class","flex-1 pl-2"]],null,null,null,null,null)),(l()(),e.qb(22,0,null,null,5,"div",[["class","row"]],null,null,null,null,null)),(l()(),e.qb(23,0,null,null,4,"div",[["class","col-lg-12 font-weight-bold"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,cn)),e.pb(25,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,bn)),e.pb(27,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(28,0,null,null,5,"div",[["class","row pt-2"]],null,null,null,null,null)),(l()(),e.qb(29,0,null,null,4,"div",[["class","col-lg-12"]],null,null,null,null,null)),(l()(),e.qb(30,0,null,null,3,"a",[["routerLink","/staff/catalog/search"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Cb(l,31).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.pb(31,671744,null,0,C.n,[C.l,C.a,c.m],{queryParams:[0,"queryParams"],routerLink:[1,"routerLink"]},null),(l()(),e.qb(32,0,null,null,1,"eg-bib-display-field",[["field","author"]],null,null,null,en,ln)),e.pb(33,114688,null,0,Xl,[],{summary:[0,"summary"],field:[1,"field"],usePlaceholder:[2,"usePlaceholder"]},null),(l()(),e.qb(34,0,null,null,3,"div",[["class","row pt-2"]],null,null,null,null,null)),(l()(),e.qb(35,0,null,null,2,"div",[["class","col-lg-12"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,pn)),e.pb(37,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(38,0,null,null,13,"div",[["class","row pt-2"]],null,null,null,null,null)),(l()(),e.qb(39,0,null,null,12,"div",[["class","col-lg-12"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,hn)),e.pb(41,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,gn)),e.pb(43,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,Cn)),e.pb(45,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,vn)),e.pb(47,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,yn)),e.pb(49,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,qn)),e.pb(51,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(52,0,null,null,2,"div",[["class","col-lg-2"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,In)),e.pb(54,278528,null,0,c.o,[e.N,e.K,e.r],{ngForOf:[0,"ngForOf"]},null),(l()(),e.qb(55,0,null,null,6,"div",[["class","col-lg-1"]],null,null,null,null,null)),(l()(),e.qb(56,0,null,null,2,"div",[["class","row"]],null,null,null,null,null)),(l()(),e.qb(57,0,null,null,1,"div",[["class","w-100"]],null,null,null,null,null)),(l()(),e.Kb(58,null,[" TCN: "," "])),(l()(),e.qb(59,0,null,null,2,"div",[["class","row"]],null,null,null,null,null)),(l()(),e.qb(60,0,null,null,1,"div",[["class","w-100"]],null,null,null,null,null)),(l()(),e.Kb(61,null,[" Holds: "," "])),(l()(),e.qb(62,0,null,null,27,"div",[["class","col-lg-2"]],null,null,null,null,null)),(l()(),e.qb(63,0,null,null,8,"div",[["class","row"]],null,null,null,null,null)),(l()(),e.qb(64,0,null,null,7,"div",[["class","col-lg-12"]],null,null,null,null,null)),(l()(),e.qb(65,0,null,null,6,"div",[["class","float-right small-text-1"]],null,null,null,null,null)),(l()(),e.Kb(66,null,[" Created "," by "])),e.Gb(67,2),(l()(),e.fb(16777216,null,null,1,null,_n)),e.pb(69,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,wn)),e.pb(71,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(72,0,null,null,8,"div",[["class","row pt-2"]],null,null,null,null,null)),(l()(),e.qb(73,0,null,null,7,"div",[["class","col-lg-12"]],null,null,null,null,null)),(l()(),e.qb(74,0,null,null,6,"div",[["class","float-right small-text-1"]],null,null,null,null,null)),(l()(),e.Kb(75,null,[" Edited "," by "])),e.Gb(76,2),(l()(),e.fb(16777216,null,null,1,null,xn)),e.pb(78,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,Mn)),e.pb(80,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(81,0,null,null,8,"div",[["class","row pt-2"]],null,null,null,null,null)),(l()(),e.qb(82,0,null,null,7,"div",[["class","col-lg-12"]],null,null,null,null,null)),(l()(),e.qb(83,0,null,null,6,"div",[["class","float-right"]],null,null,null,null,null)),(l()(),e.qb(84,0,null,null,5,"span",[],null,null,null,null,null)),(l()(),e.qb(85,0,null,null,4,"button",[["class","btn btn-sm btn-success label-with-material-icon small-text-1"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.placeHold()&&e),e}),null,null)),(l()(),e.qb(86,0,null,null,1,"span",[["class","material-icons"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["check"])),(l()(),e.qb(88,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Place Hold"]))],(function(l,n){var u=n.component;l(n,11,0,u.isRecordSelected),l(n,16,0,u.hasMrConstituentRecords(u.summary)),l(n,18,0,!u.hasMrConstituentRecords(u.summary)),l(n,20,0,u.callNumber),l(n,25,0,u.hasMrConstituentRecords(u.summary)),l(n,27,0,!u.hasMrConstituentRecords(u.summary)),l(n,31,0,u.getAuthorSearchParams(u.summary),"/staff/catalog/search"),l(n,33,0,u.summary,"author",!0),l(n,37,0,u.summary.attributes.icon_format&&u.summary.attributes.icon_format[0]),l(n,41,0,u.summary.display.physical_description),l(n,43,0,u.summary.display.edition),l(n,45,0,u.summary.display.publisher||u.summary.display.pubdate),l(n,47,0,u.summary.display.isbn),l(n,49,0,u.summary.display.upc),l(n,51,0,u.summary.display.issn),l(n,54,0,u.summary.holdingsSummary),l(n,69,0,u.summary.record.creator().usrname),l(n,71,0,!u.summary.record.creator().usrname),l(n,78,0,u.summary.record.editor().usrname),l(n,80,0,!u.summary.record.editor().usrname)}),(function(l,n){var u=n.component;l(n,7,0,u.index+1+u.searchContext.pager.offset),l(n,8,0,e.Cb(n,13).ngClassUntouched,e.Cb(n,13).ngClassTouched,e.Cb(n,13).ngClassPristine,e.Cb(n,13).ngClassDirty,e.Cb(n,13).ngClassValid,e.Cb(n,13).ngClassInvalid,e.Cb(n,13).ngClassPending),l(n,30,0,e.Cb(n,31).target,e.Cb(n,31).href),l(n,58,0,u.summary.record.tcn_value()),l(n,61,0,u.summary.holdCount);var t=e.Lb(n,66,0,l(n,67,0,e.Cb(n,0),u.summary.record.create_date(),"shortDate"));l(n,66,0,t);var a=e.Lb(n,75,0,l(n,76,0,e.Cb(n,0),u.summary.record.edit_date(),"shortDate"));l(n,75,0,a)}))}class Tn{constructor(l,n){this.cat=l,this.staffCat=n,this.numPages=10}ngOnInit(){this.searchContext=this.staffCat.searchContext}currentPageList(){const l=this.searchContext.pager;return l.pageRange(l.currentPage(),this.numPages)}nextPage(){this.searchContext.pager.increment(),this.staffCat.search()}prevPage(){this.searchContext.pager.decrement(),this.staffCat.search()}setPage(l){this.searchContext.pager.currentPage()!==l&&(this.searchContext.pager.setPage(l),this.staffCat.search())}}var Kn=e.ob({encapsulation:0,styles:[[".pagination[_ngcontent-%COMP%]{margin:0}.pagination[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(.active)   a[_ngcontent-%COMP%]{cursor:pointer}"]],data:{}});function Dn(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,7,"li",[["class","page-item"]],null,null,null,null,null)),e.Hb(512,null,c.N,c.O,[e.r,e.s,e.k,e.C]),e.pb(2,278528,null,0,c.n,[c.N],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),e.Fb(3,{active:0}),(l()(),e.qb(4,0,null,null,3,"a",[["class","page-link"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.setPage(l.context.$implicit)&&e),e}),null,null)),(l()(),e.Kb(5,null,[" "," "])),(l()(),e.qb(6,0,null,null,1,"span",[["class","sr-only"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["(current)"]))],(function(l,n){var u=l(n,3,0,n.component.searchContext.pager.currentPage()==n.context.$implicit);l(n,2,0,"page-item",u)}),(function(l,n){l(n,5,0,n.context.$implicit)}))}function Nn(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,16,"ul",[["class","pagination"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,6,"li",[["class","page-item"]],null,null,null,null,null)),e.Hb(512,null,c.N,c.O,[e.r,e.s,e.k,e.C]),e.pb(3,278528,null,0,c.n,[c.N],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),e.Fb(4,{disabled:0}),(l()(),e.qb(5,0,null,null,2,"a",[["aria-label","Previous"],["class","page-link"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.prevPage()&&e),e}),null,null)),(l()(),e.qb(6,0,null,null,1,"span",[["aria-hidden","true"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Â«"])),(l()(),e.fb(16777216,null,null,1,null,Dn)),e.pb(9,278528,null,0,c.o,[e.N,e.K,e.r],{ngForOf:[0,"ngForOf"]},null),(l()(),e.qb(10,0,null,null,6,"li",[["class","page-item"]],null,null,null,null,null)),e.Hb(512,null,c.N,c.O,[e.r,e.s,e.k,e.C]),e.pb(12,278528,null,0,c.n,[c.N],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),e.Fb(13,{disabled:0}),(l()(),e.qb(14,0,null,null,2,"a",[["aria-label","Next"],["class","page-link"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.nextPage()&&e),e}),null,null)),(l()(),e.qb(15,0,null,null,1,"span",[["aria-hidden","true"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Â»"]))],(function(l,n){var u=n.component,e=l(n,4,0,u.searchContext.pager.isFirstPage());l(n,3,0,"page-item",e),l(n,9,0,u.currentPageList());var t=l(n,13,0,u.searchContext.pager.isLastPage());l(n,12,0,"page-item",t)}),null)}var Pn=u("iA0r");class Hn{constructor(l,n,u,e,t,a,o){this.route=l,this.pcrud=n,this.cat=u,this.bib=e,this.catUrl=t,this.staffCat=a,this.basket=o,this.userCache={}}ngOnInit(){this.searchContext=this.staffCat.searchContext,this.routeSub=this.route.queryParamMap.subscribe(l=>{this.searchByUrl(l)}),this.searchSub=this.cat.onSearchComplete.subscribe(l=>this.applyRecordSelection()),this.basketSub=this.basket.onChange.subscribe(()=>this.applyRecordSelection())}ngOnDestroy(){this.routeSub&&(this.routeSub.unsubscribe(),this.searchSub.unsubscribe(),this.basketSub.unsubscribe())}applyRecordSelection(){const l=this.searchContext.currentResultIds();let n=!0;l.forEach(l=>{this.basket.hasRecordId(l)||(n=!1)}),this.allRecsSelected=n}searchByUrl(l){this.catUrl.applyUrlParams(this.searchContext,l),this.searchContext.isSearchable()&&this.cat.search(this.searchContext).then(l=>{this.cat.fetchFacets(this.searchContext),this.cat.fetchBibSummaries(this.searchContext).then(l=>this.fleshSearchResults())})}shouldStartRendering(){if(this.searchHasResults())switch(this.searchContext.currentResultIds().length){case 1:return this.searchContext.result.records[0];default:return this.searchContext.result.records[0]&&this.searchContext.result.records[1]}return!1}fleshSearchResults(){const l=this.searchContext.result.records;l&&0!==l.length&&this.bib.fleshBibUsers(l.map(l=>l.record))}searchIsDone(){return this.searchContext.searchState===S.c.COMPLETE}searchIsActive(){return this.searchContext.searchState===S.c.SEARCHING}searchHasResults(){return this.searchIsDone()&&this.searchContext.result.count>0}toggleAllRecsSelected(){const l=this.searchContext.currentResultIds();this.allRecsSelected?this.basket.addRecordIds(l):this.basket.removeRecordIds(l)}}var An=e.ob({encapsulation:2,styles:[],data:{}});function Fn(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"eg-title",[],null,null,null,Rl.b,Rl.a)),e.pb(2,4243456,null,0,Bl.a,[Ll.h],{prefix:[0,"prefix"]},null)],(function(l,n){l(n,2,0,e.ub(1,"Catalog Search - ",n.component.searchContext.result.count," Results"))}),null)}function On(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"eg-title",[["prefix","Catalog Search"]],null,null,null,Rl.b,Rl.a)),e.pb(2,4243456,null,0,Bl.a,[Ll.h],{prefix:[0,"prefix"]},null)],(function(l,n){l(n,2,0,"Catalog Search")}),null)}function En(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,5,"div",[["class","row"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,4,"div",[["class","col-lg-6 offset-lg-3 pt-3"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,3,"div",[["class","progress"]],null,null,null,null,null)),(l()(),e.qb(3,0,null,null,2,"div",[["aria-valuemax","100"],["aria-valuemin","0"],["aria-valuenow","100"],["class","progress-bar progress-bar-striped active w-100"],["role","progressbar"]],null,null,null,null,null)),(l()(),e.qb(4,0,null,null,1,"span",[["class","sr-only"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Searching.."]))],null,null)}function Rn(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,5,"div",[],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,4,"div",[["class","row pt-3"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,3,"div",[["class","col-lg-6 offset-lg-3"]],null,null,null,null,null)),(l()(),e.qb(3,0,null,null,2,"div",[["class","alert alert-warning"]],null,null,null,null,null)),(l()(),e.qb(4,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["No Maching Items Were Found"]))],null,null)}function Bn(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"h3",[],null,null,null,null,null)),(l()(),e.Kb(2,null,['Results for browse "','"']))],null,(function(l,n){l(n,2,0,n.component.searchContext.termSearch.browseEntry.value())}))}function Ln(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"h3",[],null,null,null,null,null)),(l()(),e.Kb(2,null,["Search Results (",")"]))],null,(function(l,n){l(n,2,0,n.component.searchContext.result.count)}))}function Un(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,4,"div",[["class","col-lg-2"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,Bn)),e.pb(2,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,Ln)),e.pb(4,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component;l(n,2,0,u.searchContext.termSearch.browseEntry),l(n,4,0,!u.searchContext.termSearch.browseEntry)}),null)}function jn(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,"div",[["class","col-lg-2"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"h3",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Basket View"]))],null,null)}function $n(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,8,"label",[["class","checkbox"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,5,"input",[["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0,a=l.component;return"change"===n&&(t=!1!==e.Cb(l,2).onChange(u.target.checked)&&t),"blur"===n&&(t=!1!==e.Cb(l,2).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(a.allRecsSelected=u)&&t),"change"===n&&(t=!1!==a.toggleAllRecsSelected()&&t),t}),null,null)),e.pb(2,16384,null,0,s.b,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.b]),e.pb(4,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(6,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(7,0,null,null,1,"span",[["class","pl-1"]],null,null,null,null,null)),(l()(),e.Kb(8,null,["Select "," - "," "]))],(function(l,n){l(n,4,0,n.component.allRecsSelected)}),(function(l,n){var u=n.component;l(n,1,0,e.Cb(n,6).ngClassUntouched,e.Cb(n,6).ngClassTouched,e.Cb(n,6).ngClassPristine,e.Cb(n,6).ngClassDirty,e.Cb(n,6).ngClassValid,e.Cb(n,6).ngClassInvalid,e.Cb(n,6).ngClassPending),l(n,8,0,u.searchContext.pager.rowNumber(0),u.searchContext.pager.rowNumber(u.searchContext.currentResultIds().length-1))}))}function Vn(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,"div",[["class","col-lg-2"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"eg-catalog-result-facets",[],null,null,null,Zl,$l)),e.pb(2,114688,null,0,jl,[x.a,M.a,T],null,null)],(function(l,n){l(n,2,0)}),null)}function Gn(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"eg-catalog-result-record",[],null,null,null,Sn,an)),e.pb(2,245760,null,0,tn,[C.l,m.a,Q.b,Yl.a,x.a,M.a,T,Y.a],{index:[0,"index"],summary:[1,"summary"]},null)],(function(l,n){l(n,2,0,n.parent.context.index,n.parent.context.$implicit)}),null)}function zn(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,Gn)),e.pb(2,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,2,0,n.context.$implicit)}),null)}function Wn(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,zn)),e.pb(2,278528,null,0,c.o,[e.N,e.K,e.r],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,2,0,n.component.searchContext.result.records)}),null)}function Jn(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,22,"div",[["id","staff-catalog-results-container"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,11,"div",[["class","row"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,Un)),e.pb(3,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,jn)),e.pb(5,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(6,0,null,null,2,"div",[["class","col-lg-2"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,$n)),e.pb(8,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(9,0,null,null,3,"div",[["class","col-lg-8"]],null,null,null,null,null)),(l()(),e.qb(10,0,null,null,2,"div",[["class","float-right"]],null,null,null,null,null)),(l()(),e.qb(11,0,null,null,1,"eg-catalog-result-pagination",[],null,null,null,Nn,Kn)),e.pb(12,114688,null,0,Tn,[x.a,T],null,null),(l()(),e.qb(13,0,null,null,9,"div",[],null,null,null,null,null)),(l()(),e.qb(14,0,null,null,8,"div",[["class","row mt-2"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,Vn)),e.pb(16,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(17,0,null,null,5,"div",[],null,null,null,null,null)),e.Hb(512,null,c.N,c.O,[e.r,e.s,e.k,e.C]),e.pb(19,278528,null,0,c.n,[c.N],{ngClass:[0,"ngClass"]},null),e.Fb(20,{"col-lg-10":0,"col-lg-12":1}),(l()(),e.fb(16777216,null,null,1,null,Wn)),e.pb(22,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component;l(n,3,0,!u.searchContext.basket),l(n,5,0,u.searchContext.basket),l(n,8,0,!u.searchContext.basket),l(n,12,0),l(n,16,0,!u.searchContext.basket);var e=l(n,20,0,!u.searchContext.basket,u.searchContext.basket);l(n,19,0,e),l(n,22,0,u.shouldStartRendering())}),null)}function Qn(l){return e.Mb(0,[(l()(),e.fb(16777216,null,null,1,null,Fn)),e.pb(1,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,On)),e.pb(3,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,En)),e.pb(5,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,Rn)),e.pb(7,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,Jn)),e.pb(9,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component;l(n,1,0,u.searchIsDone()),l(n,3,0,!u.searchIsDone()),l(n,5,0,u.searchIsActive()),l(n,7,0,u.searchIsDone()&&!u.searchHasResults()),l(n,9,0,u.searchHasResults())}),null)}function Zn(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,"eg-catalog-results",[],null,null,null,Qn,An)),e.pb(1,245760,null,0,Hn,[C.a,Pn.a,x.a,Yl.a,M.a,T,Y.a],null,null)],(function(l,n){l(n,1,0)}),null)}var Yn=e.mb("eg-catalog-results",Hn,Zn,{},{},[]),Xn=u("Qm07"),lu=u("9Zsr"),nu=u("ZvpF"),uu=u("DwFa"),eu=u("t7hH"),tu=u("LRne"),au=u("lJxs"),ou=u("MWGh");class iu{constructor(l,n,u){this.net=l,this.org=n,this.staffCat=u,this.initDone=!1,this.gridDataSource=new ou.c}set recordId(l){this.recId=l,this.initDone&&this.copyGrid.reload()}ngOnInit(){this.initDone=!0,this.gridDataSource.getRows=(l,n)=>this.fetchCopies(l),this.copyContext={holdable:l=>"t"===l.holdable&&"t"===l.location_holdable&&"t"===l.status_holdable},this.cellTextGenerator={callnumber:l=>(l.call_number_prefix_label+" "+`${l.call_number_label} ${l.call_number_suffix_label}`).trim(),holdable:l=>this.copyContext.holdable(l),barcode:l=>l.barcode}}collectData(){}orgName(l){return this.org.get(l).shortname()}fetchCopies(l){if(!this.recId)return Object(tu.a)([]);const n=this.staffCat.searchContext.global?this.org.root().ou_type().depth():this.staffCat.searchContext.searchOrg.ou_type().depth();return this.net.request("open-ils.search","open-ils.search.bib.copies.staff",this.recId,this.staffCat.searchContext.searchOrg.id(),n,l.limit,l.offset,this.staffCat.prefOrg?this.staffCat.prefOrg.id():null).pipe(Object(au.a)(l=>(l.active_date=l.active_date||l.create_date,l)))}}var ru=e.ob({encapsulation:2,styles:[],data:{}});function su(l){return e.Mb(0,[(l()(),e.Kb(0,null,[" "," "," ","\n"]))],null,(function(l,n){l(n,0,0,n.context.row.call_number_prefix_label,n.context.row.call_number_label,n.context.row.call_number_suffix_label)}))}function cu(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),e.Kb(1,null,["",""])),(l()(),e.qb(2,0,null,null,5,"div",[],null,null,null,null,null)),(l()(),e.qb(3,0,null,null,1,"a",[["class","pl-1"],["target","_blank"]],[[8,"href",4]],null,null,null,null)),(l()(),e.Kb(-1,null,["View"])),(l()(),e.Kb(-1,null,[" | "])),(l()(),e.qb(6,0,null,null,1,"a",[["class","pl-1"],["target","_blank"]],[[8,"href",4]],null,null,null,null)),(l()(),e.Kb(-1,null,["Edit"]))],null,(function(l,n){l(n,1,0,n.context.row.barcode),l(n,3,0,e.ub(1,"/eg/staff/cat/item/",n.context.row.id,"")),l(n,6,0,e.ub(1,"/eg/staff/cat/item/",n.context.row.id,"/edit"))}))}function bu(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,10,"span",[],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,4,"div",[["class","border-bottom"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,3,"a",[["queryParamsHandling","merge"],["routerLink","/staff/catalog/hold/C"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Cb(l,3).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.pb(3,671744,null,0,C.n,[C.l,C.a,c.m],{queryParams:[0,"queryParams"],queryParamsHandling:[1,"queryParamsHandling"],routerLink:[2,"routerLink"]},null),e.Fb(4,{target:0}),(l()(),e.Kb(-1,null,[" Item Hold "])),(l()(),e.qb(6,0,null,null,4,"div",[],null,null,null,null,null)),(l()(),e.qb(7,0,null,null,3,"a",[["queryParamsHandling","merge"],["routerLink","/staff/catalog/hold/V"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Cb(l,8).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.pb(8,671744,null,0,C.n,[C.l,C.a,c.m],{queryParams:[0,"queryParams"],queryParamsHandling:[1,"queryParamsHandling"],routerLink:[2,"routerLink"]},null),e.Fb(9,{target:0}),(l()(),e.Kb(-1,null,[" Call Number Hold "]))],(function(l,n){var u=l(n,4,0,n.parent.context.row.id);l(n,3,0,u,"merge","/staff/catalog/hold/C");var e=l(n,9,0,n.parent.context.row.call_number);l(n,8,0,e,"merge","/staff/catalog/hold/V")}),(function(l,n){l(n,2,0,e.Cb(n,3).target,e.Cb(n,3).href),l(n,7,0,e.Cb(n,8).target,e.Cb(n,8).href)}))}function du(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["No"]))],null,null)}function pu(l){return e.Mb(0,[(l()(),e.fb(16777216,null,null,1,null,bu)),e.pb(1,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,du)),e.pb(3,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(0,null,null,0))],(function(l,n){var u=n.context.userContext.holdable(n.context.row);l(n,1,0,u);var e=!n.context.userContext.holdable(n.context.row);l(n,3,0,e)}),null)}function hu(l){return e.Mb(0,[e.Ib(402653184,1,{copyGrid:0}),(l()(),e.fb(0,[["cnTemplate",2]],null,0,null,su)),(l()(),e.fb(0,[["barcodeTemplate",2]],null,0,null,cu)),(l()(),e.fb(0,[["holdableTemplate",2]],null,0,null,pu)),(l()(),e.qb(4,0,null,null,24,"div",[["class","eg-copies w-100 mt-3"]],null,null,null,null,null)),(l()(),e.qb(5,0,null,null,23,"eg-grid",[["persistKey","catalog.record.copies"]],null,null,null,Xn.b,Xn.a)),e.pb(6,4440064,[[1,4],["copyGrid",4]],0,lu.a,[J.a,m.a,_.a,nu.a],{dataSource:[0,"dataSource"],sortable:[1,"sortable"],persistKey:[2,"persistKey"],disableSelect:[3,"disableSelect"],cellTextGenerator:[4,"cellTextGenerator"]},null),(l()(),e.qb(7,0,null,null,1,"eg-grid-column",[["label","Item ID"],["path","id"]],null,null,null,uu.b,uu.a)),e.pb(8,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],index:[2,"index"],hidden:[3,"hidden"]},null),(l()(),e.qb(9,0,null,null,1,"eg-grid-column",[["datatype","org_unit"],["label","Location"],["path","circ_lib"]],null,null,null,uu.b,uu.a)),e.pb(10,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],datatype:[2,"datatype"]},null),(l()(),e.qb(11,0,null,null,1,"eg-grid-column",[["label","Call Number / Item Notes"],["name","callnumber"]],null,null,null,uu.b,uu.a)),e.pb(12,114688,null,0,eu.a,[lu.a],{name:[0,"name"],label:[1,"label"],cellTemplate:[2,"cellTemplate"]},null),(l()(),e.qb(13,0,null,null,1,"eg-grid-column",[["label","Barcode"],["name","barcode"]],null,null,null,uu.b,uu.a)),e.pb(14,114688,null,0,eu.a,[lu.a],{name:[0,"name"],label:[1,"label"],cellTemplate:[2,"cellTemplate"]},null),(l()(),e.qb(15,0,null,null,1,"eg-grid-column",[["label","Shelving Location"],["path","copy_location"]],null,null,null,uu.b,uu.a)),e.pb(16,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"]},null),(l()(),e.qb(17,0,null,null,1,"eg-grid-column",[["label","Circulation Modifier"],["path","circ_modifier"]],null,null,null,uu.b,uu.a)),e.pb(18,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"]},null),(l()(),e.qb(19,0,null,null,1,"eg-grid-column",[["label","Age Hold Protection"],["path","age_protect"]],null,null,null,uu.b,uu.a)),e.pb(20,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"]},null),(l()(),e.qb(21,0,null,null,1,"eg-grid-column",[["datatype","timestamp"],["label","Active/Create Date"],["path","active_date"]],null,null,null,uu.b,uu.a)),e.pb(22,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],datatype:[2,"datatype"]},null),(l()(),e.qb(23,0,null,null,1,"eg-grid-column",[["label","Holdable?"],["name","holdable"]],null,null,null,uu.b,uu.a)),e.pb(24,114688,null,0,eu.a,[lu.a],{name:[0,"name"],label:[1,"label"],cellContext:[2,"cellContext"],cellTemplate:[3,"cellTemplate"]},null),(l()(),e.qb(25,0,null,null,1,"eg-grid-column",[["label","Status"],["path","copy_status"]],null,null,null,uu.b,uu.a)),e.pb(26,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"]},null),(l()(),e.qb(27,0,null,null,1,"eg-grid-column",[["datatype","timestamp"],["label","Due Date"],["path","due_date"]],null,null,null,uu.b,uu.a)),e.pb(28,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],datatype:[2,"datatype"]},null)],(function(l,n){var u=n.component;l(n,6,0,u.gridDataSource,!1,"catalog.record.copies",!0,u.cellTextGenerator),l(n,8,0,"id","Item ID",!0,!0),l(n,10,0,"circ_lib","Location","org_unit"),l(n,12,0,"callnumber","Call Number / Item Notes",e.Cb(n,1)),l(n,14,0,"barcode","Barcode",e.Cb(n,2)),l(n,16,0,"copy_location","Shelving Location"),l(n,18,0,"circ_modifier","Circulation Modifier"),l(n,20,0,"age_protect","Age Hold Protection"),l(n,22,0,"active_date","Active/Create Date","timestamp"),l(n,24,0,"holdable","Holdable?",u.copyContext,e.Cb(n,3)),l(n,26,0,"copy_status","Status"),l(n,28,0,"due_date","Due Date","timestamp")}),null)}var gu=u("F4VR"),mu=u("1kwX"),fu=u("WC/f"),Cu=u("yp+x"),vu=u("2XLs");class yu{constructor(l,n,u){this.net=l,this.org=n,this.auth=u,this.onShowList=new e.m}set holdId(l){this._holdId=l,this.initDone&&this.fetchHold()}set wideHold(l){this.hold=l}ngOnInit(){this.initDone=!0,this.fetchHold()}fetchHold(){this._holdId&&this.net.request("open-ils.circ","open-ils.circ.hold.wide_hash.stream",this.auth.token(),{id:this._holdId}).subscribe(l=>{this.hold=l})}getOrgName(l){if(l)return this.org.get(l).shortname()}showListView(){this.onShowList.emit()}}var qu=e.ob({encapsulation:2,styles:[],data:{}});function ku(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Unknown Error"]))],null,null)}function Iu(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Waiting for Item"]))],null,null)}function _u(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Waiting for Capture"]))],null,null)}function wu(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["In Transit"]))],null,null)}function xu(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Ready for Pickup"]))],null,null)}function Mu(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Hold Shelf Delay"]))],null,null)}function Su(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Canceled"]))],null,null)}function Tu(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Suspended"]))],null,null)}function Ku(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Wrong Shelf"]))],null,null)}function Du(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Fulfilled"]))],null,null)}function Nu(l){return e.Mb(0,[e.Eb(0,nu.b,[nu.a]),(l()(),e.qb(1,0,null,null,1,"eg-staff-banner",[],null,null,null,i.b,i.a)),e.pb(2,49152,null,0,r.a,[],{bannerText:[0,"bannerText"]},null),(l()(),e.qb(3,0,null,null,3,"div",[["class","row"]],null,null,null,null,null)),(l()(),e.qb(4,0,null,null,2,"div",[["class","col-lg-3"]],null,null,null,null,null)),(l()(),e.qb(5,0,null,null,1,"button",[["class","btn btn-info"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.showListView()&&e),e}),null,null)),(l()(),e.Kb(-1,null,["List View"])),(l()(),e.qb(7,0,null,null,117,"div",[["class","well-table"]],null,null,null,null,null)),(l()(),e.qb(8,0,null,null,15,"div",[["class","well-row"]],null,null,null,null,null)),(l()(),e.qb(9,0,null,null,1,"div",[["class","well-label"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Request Date"])),(l()(),e.qb(11,0,null,null,2,"div",[["class","well-value"]],null,null,null,null,null)),(l()(),e.Kb(12,null,["",""])),e.Gb(13,2),(l()(),e.qb(14,0,null,null,1,"div",[["class","well-label"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Capture Date"])),(l()(),e.qb(16,0,null,null,2,"div",[["class","well-value"]],null,null,null,null,null)),(l()(),e.Kb(17,null,["",""])),e.Gb(18,2),(l()(),e.qb(19,0,null,null,1,"div",[["class","well-label"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Available On"])),(l()(),e.qb(21,0,null,null,2,"div",[["class","well-value"]],null,null,null,null,null)),(l()(),e.Kb(22,null,["",""])),e.Gb(23,2),(l()(),e.qb(24,0,null,null,13,"div",[["class","well-row"]],null,null,null,null,null)),(l()(),e.qb(25,0,null,null,1,"div",[["class","well-label"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["hold Type"])),(l()(),e.qb(27,0,null,null,1,"div",[["class","well-value"]],null,null,null,null,null)),(l()(),e.Kb(28,null,[" "," "])),(l()(),e.qb(29,0,null,null,1,"div",[["class","well-label"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Current Item"])),(l()(),e.qb(31,0,null,null,2,"div",[["class","well-value"]],null,null,null,null,null)),(l()(),e.qb(32,0,null,null,1,"a",[],[[8,"href",4]],null,null,null,null)),(l()(),e.Kb(33,null,["",""])),(l()(),e.qb(34,0,null,null,1,"div",[["class","well-label"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Call Number"])),(l()(),e.qb(36,0,null,null,1,"div",[["class","well-value"]],null,null,null,null,null)),(l()(),e.Kb(37,null,["",""])),(l()(),e.qb(38,0,null,null,33,"div",[["class","well-row"]],null,null,null,null,null)),(l()(),e.qb(39,0,null,null,1,"div",[["class","well-label"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Pickup Lib"])),(l()(),e.qb(41,0,null,null,1,"div",[["class","well-value"]],null,null,null,null,null)),(l()(),e.Kb(42,null,["",""])),(l()(),e.qb(43,0,null,null,1,"div",[["class","well-label"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Status"])),(l()(),e.qb(45,0,null,null,22,"div",[["class","well-value"]],null,null,null,null,null)),(l()(),e.qb(46,0,null,null,21,null,null,null,null,null,null,null)),e.pb(47,16384,null,0,c.v,[],{ngSwitch:[0,"ngSwitch"]},null),(l()(),e.fb(16777216,null,null,1,null,ku)),e.pb(49,278528,null,0,c.w,[e.N,e.K,c.v],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),e.fb(16777216,null,null,1,null,Iu)),e.pb(51,278528,null,0,c.w,[e.N,e.K,c.v],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),e.fb(16777216,null,null,1,null,_u)),e.pb(53,278528,null,0,c.w,[e.N,e.K,c.v],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),e.fb(16777216,null,null,1,null,wu)),e.pb(55,278528,null,0,c.w,[e.N,e.K,c.v],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),e.fb(16777216,null,null,1,null,xu)),e.pb(57,278528,null,0,c.w,[e.N,e.K,c.v],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),e.fb(16777216,null,null,1,null,Mu)),e.pb(59,278528,null,0,c.w,[e.N,e.K,c.v],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),e.fb(16777216,null,null,1,null,Su)),e.pb(61,278528,null,0,c.w,[e.N,e.K,c.v],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),e.fb(16777216,null,null,1,null,Tu)),e.pb(63,278528,null,0,c.w,[e.N,e.K,c.v],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),e.fb(16777216,null,null,1,null,Ku)),e.pb(65,278528,null,0,c.w,[e.N,e.K,c.v],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),e.fb(16777216,null,null,1,null,Du)),e.pb(67,278528,null,0,c.w,[e.N,e.K,c.v],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),e.qb(68,0,null,null,1,"div",[["class","well-label"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Behind Desk"])),(l()(),e.qb(70,0,null,null,1,"div",[["class","well-value"]],null,null,null,null,null)),(l()(),e.Kb(71,null,["",""])),(l()(),e.qb(72,0,null,null,12,"div",[["class","well-row"]],null,null,null,null,null)),(l()(),e.qb(73,0,null,null,1,"div",[["class","well-label"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Current Shelf Lib"])),(l()(),e.qb(75,0,null,null,1,"div",[["class","well-value"]],null,null,null,null,null)),(l()(),e.Kb(76,null,["",""])),(l()(),e.qb(77,0,null,null,1,"div",[["class","well-label"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Current Shelving Location"])),(l()(),e.qb(79,0,null,null,1,"div",[["class","well-value"]],null,null,null,null,null)),(l()(),e.Kb(80,null,["",""])),(l()(),e.qb(81,0,null,null,1,"div",[["class","well-label"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Force Item Quality"])),(l()(),e.qb(83,0,null,null,1,"div",[["class","well-value"]],null,null,null,null,null)),(l()(),e.Kb(84,null,["",""])),(l()(),e.qb(85,0,null,null,12,"div",[["class","well-row"]],null,null,null,null,null)),(l()(),e.qb(86,0,null,null,1,"div",[["class","well-label"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Email Notify"])),(l()(),e.qb(88,0,null,null,1,"div",[["class","well-value"]],null,null,null,null,null)),(l()(),e.Kb(89,null,["",""])),(l()(),e.qb(90,0,null,null,1,"div",[["class","well-label"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Phone Notify"])),(l()(),e.qb(92,0,null,null,1,"div",[["class","well-value"]],null,null,null,null,null)),(l()(),e.Kb(93,null,["",""])),(l()(),e.qb(94,0,null,null,1,"div",[["class","well-label"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["SMS Notify"])),(l()(),e.qb(96,0,null,null,1,"div",[["class","well-value"]],null,null,null,null,null)),(l()(),e.Kb(97,null,["",""])),(l()(),e.qb(98,0,null,null,13,"div",[["class","well-row"]],null,null,null,null,null)),(l()(),e.qb(99,0,null,null,1,"div",[["class","well-label"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Cancel Cause"])),(l()(),e.qb(101,0,null,null,1,"div",[["class","well-value"]],null,null,null,null,null)),(l()(),e.Kb(102,null,["",""])),(l()(),e.qb(103,0,null,null,1,"div",[["class","well-label"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Cancel Time"])),(l()(),e.qb(105,0,null,null,2,"div",[["class","well-value"]],null,null,null,null,null)),(l()(),e.Kb(106,null,["",""])),e.Gb(107,2),(l()(),e.qb(108,0,null,null,1,"div",[["class","well-label"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Cancel Note"])),(l()(),e.qb(110,0,null,null,1,"div",[["class","well-value"]],null,null,null,null,null)),(l()(),e.Kb(111,null,["",""])),(l()(),e.qb(112,0,null,null,12,"div",[["class","well-row"]],null,null,null,null,null)),(l()(),e.qb(113,0,null,null,1,"div",[["class","well-label"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Patron Name"])),(l()(),e.qb(115,0,null,null,2,"div",[["class","well-value"]],null,null,null,null,null)),(l()(),e.qb(116,0,null,null,1,"a",[],[[8,"href",4]],null,null,null,null)),(l()(),e.Kb(117,null,[" "," "])),(l()(),e.qb(118,0,null,null,1,"div",[["class","well-label"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Patron Barcode"])),(l()(),e.qb(120,0,null,null,2,"div",[["class","well-value"]],null,null,null,null,null)),(l()(),e.qb(121,0,null,null,1,"a",[],[[8,"href",4]],null,null,null,null)),(l()(),e.Kb(122,null,[" "," "])),(l()(),e.qb(123,0,null,null,0,"div",[["class","well-label"]],null,null,null,null,null)),(l()(),e.qb(124,0,null,null,0,"div",[["class","well-label"]],null,null,null,null,null))],(function(l,n){var u=n.component;l(n,2,0,e.ub(1,"Hold Details (#",u.hold.id,")")),l(n,47,0,u.hold.hold_status),l(n,49,0,-1),l(n,51,0,1),l(n,53,0,2),l(n,55,0,3),l(n,57,0,4),l(n,59,0,5),l(n,61,0,6),l(n,63,0,7),l(n,65,0,8),l(n,67,0,9)}),(function(l,n){var u=n.component,t=e.Lb(n,12,0,l(n,13,0,e.Cb(n,0),u.hold.request_time,"timestamp"));l(n,12,0,t);var a=e.Lb(n,17,0,l(n,18,0,e.Cb(n,0),u.hold.capture_time,"timestamp"));l(n,17,0,a);var o=e.Lb(n,22,0,l(n,23,0,e.Cb(n,0),u.hold.shelf_time,"timestamp"));l(n,22,0,o),l(n,28,0,u.hold.hold_type),l(n,32,0,e.ub(1,"/eg/staff/cat/item/",u.hold.cp_id,"")),l(n,33,0,u.hold.cp_barcode),l(n,37,0,u.hold.cn_full_label),l(n,42,0,u.hold.pl_shortname),l(n,71,0,"1"==u.hold.behind_desk),l(n,76,0,u.getOrgName(u.hold.current_shelf_lib)),l(n,80,0,u.hold.acpl_name),l(n,84,0,"1"==u.hold.mint_condition),l(n,89,0,"1"==u.hold.email_notify),l(n,93,0,u.hold.phone_notify),l(n,97,0,u.hold.sms_notify),l(n,102,0,u.hold.cancel_cause);var i=e.Lb(n,106,0,l(n,107,0,e.Cb(n,0),u.hold.cancel_time,"timestamp"));l(n,106,0,i),l(n,111,0,u.hold.cancel_note),l(n,116,0,e.ub(1,"/eg/staff/circ/patron/",u.hold.usr_id,"/checkout")),l(n,117,0,u.hold.usr_display_name),l(n,121,0,e.ub(1,"/eg/staff/circ/patron/",u.hold.usr_id,"/checkout")),l(n,122,0,u.hold.ucard_barcode)}))}var Pu=u("GlUJ"),Hu=u("gtj8"),Au=u("y+3C"),Fu=u("QGNW"),Ou=u("Ghns"),Eu=u("KBUj"),Ru=u("mrSG"),Bu=u("z6cu");class Lu extends w.a{constructor(l,n,u,e,t,a){super(l),this.modal=l,this.toast=n,this.store=u,this.net=e,this.evt=t,this.auth=a}ngOnInit(){}open(l){return this.holdIds=[].concat(this.holdIds),this.transferTarget=this.store.getLocalItem("eg.circ.hold.title_transfer_target"),this.transferTarget?super.open(l):(this.targetNeeded.current().then(l=>this.toast.warning(l)),Object(Bu.a)("Transfer Target Required"))}transferHolds(){return Object(Ru.a)(this,void 0,void 0,(function*(){return this.net.request("open-ils.circ","open-ils.circ.hold.change_title.specific_holds",this.auth.token(),this.transferTarget,this.holdIds).toPromise().then(l=>Object(Ru.a)(this,void 0,void 0,(function*(){1===Number(l)?(this.numSucceeded++,this.toast.success(yield this.successMsg.current())):(this.numFailed++,console.error("Retarget Failed",this.evt.parse(l)),this.toast.warning(yield this.errorMsg.current()))})))}))}transferBatch(){return Object(Ru.a)(this,void 0,void 0,(function*(){this.numSucceeded=0,this.numFailed=0,yield this.transferHolds(),this.close(this.numSucceeded>0)}))}}var Uu=e.ob({encapsulation:2,styles:[],data:{}});function ju(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,3,"div",[["class","row"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,2,"div",[["class","col-lg-12"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,1,"div",[["class","alert alert-warning"]],null,null,null,null,null)),(l()(),e.Kb(3,null,[" "," Hold(s) Failed to Transfer. "]))],null,(function(l,n){l(n,3,0,n.component.numFailed)}))}function $u(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,4,"div",[["class","row"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"div",[["class","col-lg-12"]],null,null,null,null,null)),(l()(),e.Kb(2,null,[" "," Hold(s) Successfully Transferred. "])),(l()(),e.fb(16777216,null,null,1,null,ju)),e.pb(4,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,4,0,n.component.numFailed>0)}),(function(l,n){l(n,2,0,n.component.numSucceeded)}))}function Vu(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,4,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"button",[["class","btn btn-warning"],["type","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.close()&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Cancel"])),(l()(),e.qb(3,0,null,null,1,"button",[["class","btn btn-success"],["type","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.transferBatch()&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Transfer"]))],null,null)}function Gu(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,6,"div",[["class","modal-header bg-info"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,2,"h4",[["class","modal-title"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Transfer Hold(s) To Marked Target"])),(l()(),e.qb(4,0,null,null,2,"button",[["aria-label","Close"],["class","close"],["type","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.close()&&e),e}),null,null)),(l()(),e.qb(5,0,null,null,1,"span",[["aria-hidden","true"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Ã—"])),(l()(),e.qb(7,0,null,null,5,"div",[["class","modal-body"]],null,null,null,null,null)),(l()(),e.qb(8,0,null,null,2,"div",[["class","row d-flex justify-content-center"]],null,null,null,null,null)),(l()(),e.qb(9,0,null,null,1,"h5",[],null,null,null,null,null)),(l()(),e.Kb(10,null,["Transfer "," Holds To Record ","?"])),(l()(),e.fb(16777216,null,null,1,null,$u)),e.pb(12,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(13,0,null,null,2,"div",[["class","modal-footer"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,Vu)),e.pb(15,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component;l(n,12,0,u.numSucceeded>0),l(n,15,0,!u.chargeResponse)}),(function(l,n){var u=n.component;l(n,10,0,u.holdIds.length,u.transferTarget)}))}function zu(l){return e.Mb(0,[e.Ib(671088640,1,{dialogContent:0}),e.Ib(402653184,2,{successMsg:0}),e.Ib(402653184,3,{errorMsg:0}),e.Ib(402653184,4,{targetNeeded:0}),(l()(),e.qb(4,0,null,null,1,"eg-string",[["text","Successfully Transfered Hold"]],null,null,null,q.b,q.a)),e.pb(5,114688,[[2,4],["successMsg",4]],0,k.a,[e.k,I.a],{text:[0,"text"]},null),(l()(),e.qb(6,0,null,null,1,"eg-string",[["text","Failed To Transfer Hold"]],null,null,null,q.b,q.a)),e.pb(7,114688,[[3,4],["errorMsg",4]],0,k.a,[e.k,I.a],{text:[0,"text"]},null),(l()(),e.qb(8,0,null,null,1,"eg-string",[["text","Transfer Target Required"]],null,null,null,q.b,q.a)),e.pb(9,114688,[[4,4],["targetNeeded",4]],0,k.a,[e.k,I.a],{text:[0,"text"]},null),(l()(),e.fb(0,[[1,2],["dialogContent",2]],null,0,null,Gu))],(function(l,n){l(n,5,0,"Successfully Transfered Hold"),l(n,7,0,"Failed To Transfer Hold"),l(n,9,0,"Transfer Target Required")}),null)}var Wu=u("nUl2"),Ju=u("9rfo"),Qu=u("Cfvw"),Zu=u("eIep");class Yu extends w.a{constructor(l,n,u,e,t,a,o,i){super(l),this.modal=l,this.toast=n,this.net=u,this.evt=e,this.pcrud=t,this.org=a,this.bib=o,this.auth=i,this.billingTypes=[]}ngOnInit(){}open(l){return this.reset(),this.copyId?Object(Qu.a)(this.getBillingTypes().then(l=>this.getData())).pipe(Object(Zu.a)(n=>super.open(l))):Object(Bu.a)("copy ID required")}getBillingTypes(){return this.billingTypes.length>1?Promise.resolve():this.pcrud.search("cbt",{owner:this.org.fullPath(this.auth.user().ws_ou(),!0)},{},{atomic:!0}).toPromise().then(l=>{this.billingTypes=l.sort((l,n)=>l.name()<n.name()?-1:1).map(l=>({id:l.id(),label:l.name()}))})}getData(){return this.pcrud.retrieve("acp",this.copyId,{flesh:1,flesh_fields:{acp:["call_number"]}}).toPromise().then(l=>(this.copy=l,this.bib.getBibSummary(l.call_number().record()).toPromise())).then(l=>{this.bibSummary=l})}reset(){this.copy=null,this.bibSummary=null,this.chargeResponse=null,this.newCharge=null,this.newNote=null,this.amountChangeRequested=!1}bTypeChange(l){this.newBtype=l.id}markDamaged(l){this.chargeResponse=null,l&&"apply"===l.apply_fines&&(l.override_amount=this.newCharge,l.override_btype=this.newBtype,l.override_note=this.newNote),this.net.request("open-ils.circ","open-ils.circ.mark_item_damaged",this.auth.token(),this.copyId,l).subscribe(l=>{if(console.debug("Mark damaged returned",l),1===Number(l))return this.successMsg.current().then(l=>this.toast.success(l)),void this.close(!0);const n=this.evt.parse(l);"DAMAGE_CHARGE"===n.textcode&&(this.chargeResponse=n.payload,this.newCharge=this.chargeResponse.charge)},l=>{this.errorMsg.current().then(l=>this.toast.danger(l)),console.error(l)})}}var Xu=e.ob({encapsulation:2,styles:[],data:{}});function le(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,31,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,7,"li",[["class","list-group-item"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,6,"div",[["class","row"]],null,null,null,null,null)),(l()(),e.qb(3,0,null,null,1,"div",[["class","col-lg-3"],["i8n",""]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Billing Type"])),(l()(),e.qb(5,0,null,null,3,"div",[["class","col-lg-6"]],null,null,null,null,null)),(l()(),e.qb(6,0,null,null,2,"eg-combobox",[["placeholder","Billing Type..."]],null,[[null,"onChange"]],(function(l,n,u){var e=!0;return"onChange"===n&&(e=!1!==(l.component.newBtype=u.id)&&e),e}),Wu.b,Wu.a)),e.Hb(5120,null,s.o,(function(l){return[l]}),[Ju.a]),e.pb(8,114688,null,0,Ju.a,[e.k,g.a,J.a,Pn.a],{placeholder:[0,"placeholder"],entries:[1,"entries"]},{onChange:"onChange"}),(l()(),e.qb(9,0,null,null,11,"li",[["class","list-group-item"]],null,null,null,null,null)),(l()(),e.qb(10,0,null,null,10,"div",[["class","row"]],null,null,null,null,null)),(l()(),e.qb(11,0,null,null,1,"div",[["class","col-lg-3"],["i8n",""]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Charge Amount"])),(l()(),e.qb(13,0,null,null,7,"div",[["class","col-lg-6"]],null,null,null,null,null)),(l()(),e.qb(14,0,null,null,6,"input",[["class","form-control"],["min","0"],["step","0.01"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(l,n,u){var t=!0,a=l.component;return"input"===n&&(t=!1!==e.Cb(l,15)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,15).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Cb(l,15)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Cb(l,15)._compositionEnd(u.target.value)&&t),"change"===n&&(t=!1!==e.Cb(l,16).onChange(u.target.value)&&t),"input"===n&&(t=!1!==e.Cb(l,16).onChange(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,16).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(a.newCharge=u)&&t),t}),null,null)),e.pb(15,16384,null,0,s.d,[e.C,e.k,[2,s.a]],null,null),e.pb(16,16384,null,0,s.v,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l,n){return[l,n]}),[s.d,s.v]),e.pb(18,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(20,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(21,0,null,null,10,"li",[["class","list-group-item"]],null,null,null,null,null)),(l()(),e.qb(22,0,null,null,9,"div",[["class","row"]],null,null,null,null,null)),(l()(),e.qb(23,0,null,null,1,"div",[["class","col-lg-3"],["i8n",""]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Note"])),(l()(),e.qb(25,0,null,null,6,"div",[["class","col-lg-6"]],null,null,null,null,null)),(l()(),e.qb(26,0,null,null,5,"textarea",[["class","form-control"],["rows","3"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,u){var t=!0,a=l.component;return"input"===n&&(t=!1!==e.Cb(l,27)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,27).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Cb(l,27)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Cb(l,27)._compositionEnd(u.target.value)&&t),"ngModelChange"===n&&(t=!1!==(a.newNote=u)&&t),t}),null,null)),e.pb(27,16384,null,0,s.d,[e.C,e.k,[2,s.a]],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.d]),e.pb(29,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(31,16384,null,0,s.q,[[4,s.p]],null,null)],(function(l,n){var u=n.component;l(n,8,0,"Billing Type...",u.billingTypes),l(n,18,0,u.newCharge),l(n,29,0,u.newNote)}),(function(l,n){l(n,14,0,e.Cb(n,20).ngClassUntouched,e.Cb(n,20).ngClassTouched,e.Cb(n,20).ngClassPristine,e.Cb(n,20).ngClassDirty,e.Cb(n,20).ngClassValid,e.Cb(n,20).ngClassInvalid,e.Cb(n,20).ngClassPending),l(n,26,0,e.Cb(n,31).ngClassUntouched,e.Cb(n,31).ngClassTouched,e.Cb(n,31).ngClassPristine,e.Cb(n,31).ngClassDirty,e.Cb(n,31).ngClassValid,e.Cb(n,31).ngClassInvalid,e.Cb(n,31).ngClassPending)}))}function ne(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,21,"div",[["class","card mt-3"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"div",[["class","card-header"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,[" Item was previously checked out "])),(l()(),e.qb(3,0,null,null,18,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),e.qb(4,0,null,null,17,"ul",[["class","list-group list-group-flush"]],null,null,null,null,null)),(l()(),e.qb(5,0,null,null,4,"li",[["class","list-group-item"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,[" Item was last checked out by patron "])),(l()(),e.qb(7,0,null,null,1,"a",[],[[8,"href",4]],null,null,null,null)),(l()(),e.Kb(8,null,[" ",", "," (",") "])),(l()(),e.Kb(-1,null,[". "])),(l()(),e.qb(10,0,null,null,3,"li",[["class","list-group-item"]],null,null,null,null,null)),(l()(),e.Kb(11,null,[" Item was due "," and returned ",". "])),e.Gb(12,2),e.Gb(13,2),(l()(),e.qb(14,0,null,null,5,"li",[["class","list-group-item"]],null,null,null,null,null)),(l()(),e.qb(15,0,null,null,4,"span",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,[" Calucated fine amount is "])),(l()(),e.qb(17,0,null,null,2,"span",[["class","font-weight-bold text-danger"]],null,null,null,null,null)),(l()(),e.Kb(18,null,[" "," "])),e.Gb(19,1),(l()(),e.fb(16777216,null,null,1,null,le)),e.pb(21,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,21,0,n.component.amountChangeRequested)}),(function(l,n){var u=n.component;l(n,7,0,e.ub(1,"/eg/staff/circ/patron/",u.chargeResponse.circ.usr().id(),"/checkout")),l(n,8,0,u.chargeResponse.circ.usr().family_name(),u.chargeResponse.circ.usr().first_given_name(),u.chargeResponse.circ.usr().usrname());var t=e.Lb(n,11,0,l(n,12,0,e.Cb(n.parent.parent,0),u.chargeResponse.circ.due_date(),"timestamp")),a=e.Lb(n,11,1,l(n,13,0,e.Cb(n.parent.parent,1),u.chargeResponse.circ.checkin_time(),"MM/dd/yy H:mm a"));l(n,11,0,t,a);var o=e.Lb(n,18,0,l(n,19,0,e.Cb(n.parent.parent,2),u.chargeResponse.charge));l(n,18,0,o)}))}function ue(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,4,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"button",[["class","btn btn-warning"],["type","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.close(!1)&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Cancel"])),(l()(),e.qb(3,0,null,null,1,"button",[["class","btn btn-success"],["type","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.markDamaged()&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Mark Damaged"]))],null,null)}function ee(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,8,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"button",[["class","btn btn-warning"],["type","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.close(!1)&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Cancel"])),(l()(),e.qb(3,0,null,null,1,"button",[["class","btn btn-info mr-2"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=0!=(l.component.amountChangeRequested=!0)&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Change Amount"])),(l()(),e.qb(5,0,null,null,1,"button",[["class","btn btn-secondary mr-2"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.markDamaged({apply_fines:"noapply"})&&e),e}),null,null)),(l()(),e.Kb(-1,null,["No Charge"])),(l()(),e.qb(7,0,null,null,1,"button",[["class","btn btn-success mr-2"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.markDamaged({apply_fines:"apply"})&&e),e}),null,null)),(l()(),e.Kb(-1,null,["OK"]))],null,null)}function te(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,6,"div",[["class","modal-header bg-info"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,2,"h4",[["class","modal-title"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Mark Item Damaged"])),(l()(),e.qb(4,0,null,null,2,"button",[["aria-label","Close"],["class","close"],["type","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.close(!1)&&e),e}),null,null)),(l()(),e.qb(5,0,null,null,1,"span",[["aria-hidden","true"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Ã—"])),(l()(),e.qb(7,0,null,null,17,"div",[["class","modal-body"]],null,null,null,null,null)),(l()(),e.qb(8,0,null,null,4,"div",[["class","row"]],null,null,null,null,null)),(l()(),e.qb(9,0,null,null,1,"div",[["class","col-lg-1"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Barcode:"])),(l()(),e.qb(11,0,null,null,1,"div",[["class","col-lg-11 font-weight-bold"]],null,null,null,null,null)),(l()(),e.Kb(12,null,["",""])),(l()(),e.qb(13,0,null,null,4,"div",[["class","row"]],null,null,null,null,null)),(l()(),e.qb(14,0,null,null,1,"div",[["class","col-lg-1"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Title:"])),(l()(),e.qb(16,0,null,null,1,"div",[["class","col-lg-11"]],null,null,null,null,null)),(l()(),e.Kb(17,null,["",""])),(l()(),e.qb(18,0,null,null,4,"div",[["class","row"]],null,null,null,null,null)),(l()(),e.qb(19,0,null,null,1,"div",[["class","col-lg-1"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Author:"])),(l()(),e.qb(21,0,null,null,1,"div",[["class","col-lg-11"]],null,null,null,null,null)),(l()(),e.Kb(22,null,["",""])),(l()(),e.fb(16777216,null,null,1,null,ne)),e.pb(24,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(25,0,null,null,4,"div",[["class","modal-footer"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,ue)),e.pb(27,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,ee)),e.pb(29,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component;l(n,24,0,u.chargeResponse),l(n,27,0,!u.chargeResponse),l(n,29,0,u.chargeResponse)}),(function(l,n){var u=n.component;l(n,12,0,u.copy.barcode()),l(n,17,0,u.bibSummary.display.title),l(n,22,0,u.bibSummary.display.author)}))}function ae(l){return e.Mb(0,[e.Eb(0,nu.b,[nu.a]),e.Eb(0,c.f,[e.t]),e.Eb(0,c.d,[e.t]),e.Ib(671088640,1,{dialogContent:0}),e.Ib(402653184,2,{successMsg:0}),e.Ib(402653184,3,{errorMsg:0}),(l()(),e.qb(6,0,null,null,1,"eg-string",[["text","Successfully Marked Item Damaged"]],null,null,null,q.b,q.a)),e.pb(7,114688,[[2,4],["successMsg",4]],0,k.a,[e.k,I.a],{text:[0,"text"]},null),(l()(),e.qb(8,0,null,null,1,"eg-string",[["text","Failed To Mark Item Damaged"]],null,null,null,q.b,q.a)),e.pb(9,114688,[[3,4],["errorMsg",4]],0,k.a,[e.k,I.a],{text:[0,"text"]},null),(l()(),e.fb(0,[[1,2],["dialogContent",2]],null,0,null,te))],(function(l,n){l(n,7,0,"Successfully Marked Item Damaged"),l(n,9,0,"Failed To Mark Item Damaged")}),null)}class oe extends w.a{constructor(l,n,u,e,t){super(l),this.modal=l,this.toast=n,this.net=u,this.evt=e,this.auth=t}ngOnInit(){}markOneItemMissing(l){return Object(Ru.a)(this,void 0,void 0,(function*(){if(0===l.length)return Promise.resolve();const n=l.pop();return this.net.request("open-ils.circ","open-ils.circ.mark_item_missing",this.auth.token(),n).toPromise().then(n=>Object(Ru.a)(this,void 0,void 0,(function*(){return 1===Number(n)?(this.numSucceeded++,this.toast.success(yield this.successMsg.current())):(this.numFailed++,console.error("Mark missing failed ",this.evt.parse(n)),this.toast.warning(yield this.errorMsg.current())),this.markOneItemMissing(l)})))}))}markItemsMissing(){return Object(Ru.a)(this,void 0,void 0,(function*(){this.numSucceeded=0,this.numFailed=0;const l=[].concat(this.copyIds);yield this.markOneItemMissing(l),this.close(this.numSucceeded>0)}))}}var ie=e.ob({encapsulation:2,styles:[],data:{}});function re(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,"div",[["class","row"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"div",[["class","col-lg-12"]],null,null,null,null,null)),(l()(),e.Kb(2,null,[" "," Items(s) Successfully Marked Missing "]))],null,(function(l,n){l(n,2,0,n.component.numSucceeded)}))}function se(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,3,"div",[["class","row"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,2,"div",[["class","col-lg-12"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,1,"div",[["class","alert alert-warning"]],null,null,null,null,null)),(l()(),e.Kb(3,null,[" "," Items(s) Failed to be Marked Missing "]))],null,(function(l,n){l(n,3,0,n.component.numFailed)}))}function ce(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,4,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"button",[["class","btn btn-warning"],["type","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.close()&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Cancel"])),(l()(),e.qb(3,0,null,null,1,"button",[["class","btn btn-success"],["type","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.markItemsMissing()&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Mark Missing"]))],null,null)}function be(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,6,"div",[["class","modal-header bg-info"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,2,"h4",[["class","modal-title"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Mark Item Missing"])),(l()(),e.qb(4,0,null,null,2,"button",[["aria-label","Close"],["class","close"],["type","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.close()&&e),e}),null,null)),(l()(),e.qb(5,0,null,null,1,"span",[["aria-hidden","true"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Ã—"])),(l()(),e.qb(7,0,null,null,7,"div",[["class","modal-body"]],null,null,null,null,null)),(l()(),e.qb(8,0,null,null,2,"div",[["class","row d-flex justify-content-center"]],null,null,null,null,null)),(l()(),e.qb(9,0,null,null,1,"h5",[],null,null,null,null,null)),(l()(),e.Kb(10,null,["Mark "," Item(s) Missing?"])),(l()(),e.fb(16777216,null,null,1,null,re)),e.pb(12,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,se)),e.pb(14,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(15,0,null,null,2,"div",[["class","modal-footer"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,ce)),e.pb(17,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component;l(n,12,0,u.numSucceeded>0),l(n,14,0,u.numFailed>0),l(n,17,0,!u.chargeResponse)}),(function(l,n){l(n,10,0,n.component.copyIds.length)}))}function de(l){return e.Mb(0,[e.Ib(671088640,1,{dialogContent:0}),e.Ib(402653184,2,{successMsg:0}),e.Ib(402653184,3,{errorMsg:0}),(l()(),e.qb(3,0,null,null,1,"eg-string",[["text","Successfully Marked Item Missing"]],null,null,null,q.b,q.a)),e.pb(4,114688,[[2,4],["successMsg",4]],0,k.a,[e.k,I.a],{text:[0,"text"]},null),(l()(),e.qb(5,0,null,null,1,"eg-string",[["text","Failed To Mark Item Missing"]],null,null,null,q.b,q.a)),e.pb(6,114688,[[3,4],["errorMsg",4]],0,k.a,[e.k,I.a],{text:[0,"text"]},null),(l()(),e.fb(0,[[1,2],["dialogContent",2]],null,0,null,be))],(function(l,n){l(n,4,0,"Successfully Marked Item Missing"),l(n,6,0,"Failed To Mark Item Missing")}),null)}class pe extends w.a{constructor(l,n,u,e,t){super(l),this.modal=l,this.toast=n,this.net=u,this.evt=e,this.auth=t}ngOnInit(){}open(l){return this.holdIds=[].concat(this.holdIds),super.open(l)}retargetNext(l){return Object(Ru.a)(this,void 0,void 0,(function*(){return 0===l.length?Promise.resolve():this.net.request("open-ils.circ","open-ils.circ.hold.reset",this.auth.token(),l.pop()).toPromise().then(n=>Object(Ru.a)(this,void 0,void 0,(function*(){1===Number(n)?(this.numSucceeded++,this.toast.success(yield this.successMsg.current())):(this.numFailed++,console.error(this.evt.parse(n)),this.toast.warning(yield this.errorMsg.current())),this.retargetNext(l)})))}))}retargetBatch(){return Object(Ru.a)(this,void 0,void 0,(function*(){this.numSucceeded=0,this.numFailed=0;const l=[].concat(this.holdIds);yield this.retargetNext(l),this.close(this.numSucceeded>0)}))}}var he=e.ob({encapsulation:2,styles:[],data:{}});function ge(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,"div",[["class","row"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"div",[["class","col-lg-12"]],null,null,null,null,null)),(l()(),e.Kb(2,null,[" "," Hold(s) Successfully Retargeted "]))],null,(function(l,n){l(n,2,0,n.component.numSucceeded)}))}function me(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,3,"div",[["class","row"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,2,"div",[["class","col-lg-12"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,1,"div",[["class","alert alert-warning"]],null,null,null,null,null)),(l()(),e.Kb(3,null,[" "," Hold(s) Failed to Retarget. "]))],null,(function(l,n){l(n,3,0,n.component.numFailed)}))}function fe(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,4,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"button",[["class","btn btn-warning"],["type","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.close()&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Cancel"])),(l()(),e.qb(3,0,null,null,1,"button",[["class","btn btn-success"],["type","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.retargetBatch()&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Retarget"]))],null,null)}function Ce(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,6,"div",[["class","modal-header bg-info"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,2,"h4",[["class","modal-title"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Retarget Hold"])),(l()(),e.qb(4,0,null,null,2,"button",[["aria-label","Close"],["class","close"],["type","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.close()&&e),e}),null,null)),(l()(),e.qb(5,0,null,null,1,"span",[["aria-hidden","true"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Ã—"])),(l()(),e.qb(7,0,null,null,7,"div",[["class","modal-body"]],null,null,null,null,null)),(l()(),e.qb(8,0,null,null,2,"div",[["class","row d-flex justify-content-center"]],null,null,null,null,null)),(l()(),e.qb(9,0,null,null,1,"h5",[],null,null,null,null,null)),(l()(),e.Kb(10,null,["Retarget "," Holds?"])),(l()(),e.fb(16777216,null,null,1,null,ge)),e.pb(12,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,me)),e.pb(14,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(15,0,null,null,2,"div",[["class","modal-footer"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,fe)),e.pb(17,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component;l(n,12,0,u.numSucceeded>0),l(n,14,0,u.numFailed>0),l(n,17,0,!u.chargeResponse)}),(function(l,n){l(n,10,0,n.component.holdIds.length)}))}function ve(l){return e.Mb(0,[e.Ib(671088640,1,{dialogContent:0}),e.Ib(402653184,2,{successMsg:0}),e.Ib(402653184,3,{errorMsg:0}),(l()(),e.qb(3,0,null,null,1,"eg-string",[["text","Successfully Retargetd Hold"]],null,null,null,q.b,q.a)),e.pb(4,114688,[[2,4],["successMsg",4]],0,k.a,[e.k,I.a],{text:[0,"text"]},null),(l()(),e.qb(5,0,null,null,1,"eg-string",[["text","Failed To Retarget Hold"]],null,null,null,q.b,q.a)),e.pb(6,114688,[[3,4],["errorMsg",4]],0,k.a,[e.k,I.a],{text:[0,"text"]},null),(l()(),e.fb(0,[[1,2],["dialogContent",2]],null,0,null,Ce))],(function(l,n){l(n,4,0,"Successfully Retargetd Hold"),l(n,6,0,"Failed To Retarget Hold")}),null)}class ye extends w.a{constructor(l,n,u,e,t,a){super(l),this.modal=l,this.toast=n,this.net=u,this.evt=e,this.pcrud=t,this.auth=a,this.cancelReasons=[]}ngOnInit(){}open(l){return 0===this.cancelReasons.length&&this.pcrud.retrieveAll("ahrcc",{},{atomic:!0}).toPromise().then(l=>{this.cancelReasons=l.map(l=>({id:l.id(),label:l.label()}))}),super.open(l)}cancelNext(l){return Object(Ru.a)(this,void 0,void 0,(function*(){return 0===l.length?Promise.resolve():this.net.request("open-ils.circ","open-ils.circ.hold.cancel",this.auth.token(),l.pop(),this.cancelReason,this.cancelNote).toPromise().then(n=>Object(Ru.a)(this,void 0,void 0,(function*(){1===Number(n)?(this.numSucceeded++,this.toast.success(yield this.successMsg.current())):(this.numFailed++,console.error(this.evt.parse(n)),this.toast.warning(yield this.errorMsg.current())),this.cancelNext(l)})))}))}cancelBatch(){return Object(Ru.a)(this,void 0,void 0,(function*(){this.numSucceeded=0,this.numFailed=0;const l=[].concat(this.holdIds);yield this.cancelNext(l),this.close(this.numSucceeded>0)}))}}var qe=e.ob({encapsulation:2,styles:[],data:{}});function ke(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,3,"div",[["class","row"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,2,"div",[["class","col-lg-12"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,1,"div",[["class","alert alert-warning"]],null,null,null,null,null)),(l()(),e.Kb(3,null,[" "," Hold(s) Failed to Cancel. "]))],null,(function(l,n){l(n,3,0,n.component.numFailed)}))}function Ie(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,4,"div",[["class","row mt-2"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"div",[["class","col-lg-12"]],null,null,null,null,null)),(l()(),e.Kb(2,null,[" "," Hold(s) Successfully Canceled "])),(l()(),e.fb(16777216,null,null,1,null,ke)),e.pb(4,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,4,0,n.component.numFailed>0)}),(function(l,n){l(n,2,0,n.component.numSucceeded)}))}function _e(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,4,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"button",[["class","btn btn-warning"],["type","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.close()&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Cancel"])),(l()(),e.qb(3,0,null,null,1,"button",[["class","btn btn-success"],["type","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.cancelBatch()&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Cancel Hold"]))],null,null)}function we(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,6,"div",[["class","modal-header bg-info"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,2,"h4",[["class","modal-title"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Cancel Hold"])),(l()(),e.qb(4,0,null,null,2,"button",[["aria-label","Close"],["class","close"],["type","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.close()&&e),e}),null,null)),(l()(),e.qb(5,0,null,null,1,"span",[["aria-hidden","true"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Ã—"])),(l()(),e.qb(7,0,null,null,24,"div",[["class","modal-body"]],null,null,null,null,null)),(l()(),e.qb(8,0,null,null,2,"div",[["class","row d-flex justify-content-center"]],null,null,null,null,null)),(l()(),e.qb(9,0,null,null,1,"h5",[],null,null,null,null,null)),(l()(),e.Kb(10,null,["Cancel "," Holds?"])),(l()(),e.qb(11,0,null,null,7,"div",[["class","row mt-2"]],null,null,null,null,null)),(l()(),e.qb(12,0,null,null,2,"div",[["class","col-lg-4"]],null,null,null,null,null)),(l()(),e.qb(13,0,null,null,1,"label",[["for","cance-reasons"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Cancel Reason"])),(l()(),e.qb(15,0,null,null,3,"div",[["class","col-lg-8"]],null,null,null,null,null)),(l()(),e.qb(16,0,null,null,2,"eg-combobox",[["id","cancel-reasons"]],null,[[null,"onChange"]],(function(l,n,u){var e=!0;return"onChange"===n&&(e=!1!==(l.component.cancelReason=u?u.id:null)&&e),e}),Wu.b,Wu.a)),e.Hb(5120,null,s.o,(function(l){return[l]}),[Ju.a]),e.pb(18,114688,null,0,Ju.a,[e.k,g.a,J.a,Pn.a],{startId:[0,"startId"],entries:[1,"entries"]},{onChange:"onChange"}),(l()(),e.qb(19,0,null,null,10,"div",[["class","row mt-2"]],null,null,null,null,null)),(l()(),e.qb(20,0,null,null,2,"div",[["class","col-lg-4"]],null,null,null,null,null)),(l()(),e.qb(21,0,null,null,1,"label",[["for","cance-note"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Cancel Note"])),(l()(),e.qb(23,0,null,null,6,"div",[["class","col-lg-8"]],null,null,null,null,null)),(l()(),e.qb(24,0,null,null,5,"textarea",[["class","form-control"],["id","cancel-note"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,u){var t=!0,a=l.component;return"input"===n&&(t=!1!==e.Cb(l,25)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,25).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Cb(l,25)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Cb(l,25)._compositionEnd(u.target.value)&&t),"ngModelChange"===n&&(t=!1!==(a.cancelNote=u)&&t),t}),null,null)),e.pb(25,16384,null,0,s.d,[e.C,e.k,[2,s.a]],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.d]),e.pb(27,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(29,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.fb(16777216,null,null,1,null,Ie)),e.pb(31,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(32,0,null,null,2,"div",[["class","modal-footer"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,_e)),e.pb(34,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component;l(n,18,0,5,u.cancelReasons),l(n,27,0,u.cancelNote),l(n,31,0,u.numSucceeded>0),l(n,34,0,!u.chargeResponse)}),(function(l,n){l(n,10,0,n.component.holdIds.length),l(n,24,0,e.Cb(n,29).ngClassUntouched,e.Cb(n,29).ngClassTouched,e.Cb(n,29).ngClassPristine,e.Cb(n,29).ngClassDirty,e.Cb(n,29).ngClassValid,e.Cb(n,29).ngClassInvalid,e.Cb(n,29).ngClassPending)}))}function xe(l){return e.Mb(0,[e.Ib(671088640,1,{dialogContent:0}),e.Ib(402653184,2,{successMsg:0}),e.Ib(402653184,3,{errorMsg:0}),(l()(),e.qb(3,0,null,null,1,"eg-string",[["text","Successfully Canceled Hold"]],null,null,null,q.b,q.a)),e.pb(4,114688,[[2,4],["successMsg",4]],0,k.a,[e.k,I.a],{text:[0,"text"]},null),(l()(),e.qb(5,0,null,null,1,"eg-string",[["text","Failed To Cancel Hold"]],null,null,null,q.b,q.a)),e.pb(6,114688,[[3,4],["errorMsg",4]],0,k.a,[e.k,I.a],{text:[0,"text"]},null),(l()(),e.fb(0,[[1,2],["dialogContent",2]],null,0,null,we))],(function(l,n){l(n,4,0,"Successfully Canceled Hold"),l(n,6,0,"Failed To Cancel Hold")}),null)}var Me=u("MisT"),Se=u("LTyc"),Te=u("5+tZ");class Ke{constructor(l,n,u,e){this.evt=l,this.net=n,this.auth=u,this.bib=e}placeHold(l){let n="open-ils.circ.holds.test_and_create.batch";return l.override&&(n+=".override"),this.net.request("open-ils.circ",n,this.auth.token(),{patronid:l.recipient,pickup_lib:l.pickupLib,hold_type:l.holdType,email_notify:l.notifyEmail,phone_notify:l.notifyPhone,thaw_date:l.thawDate,frozen:l.frozen,sms_notify:l.notifySms,sms_carrier:l.smsCarrier,holdable_formats_map:l.holdableFormats},[l.holdTarget]).pipe(Object(au.a)(n=>{let u=n.result;const e={success:!0};return Number(u)>0?(e.holdId=u,console.debug("Hold successfully placed "+u)):(e.success=!1,console.info("Hold request failed: ",u),Array.isArray(u)&&(u=u[0]),e.evt=this.evt.parse(u)?this.evt.parse(u):this.evt.parse(u.last_event)),l.result=e,l}))}getHoldTargetMeta(l,n,u){const e=[].concat(n);return this.net.request("open-ils.circ","open-ils.circ.hold.get_metadata",l,e,u).pipe(Object(Te.a)(l=>{const n=l;return n.bibId=n.bibrecord.id(),n.callNum=l.volume,this.bib.getBibSummary(n.bibId).pipe(Object(au.a)(l=>(n.bibSummary=l,n)))}))}updateHolds(l){return this.net.request("open-ils.circ","open-ils.circ.hold.update.batch",this.auth.token(),l).pipe(Object(au.a)(l=>{if(Number(l)>0)return Number(l);Array.isArray(l)&&(l=l[0]);const n=this.evt.parse(l);return console.warn("Hold update returned event",n),n}))}}class De{constructor(l,n,u,t){this.idl=l,this.org=n,this.pcrud=u,this.holds=t,this.onComplete=new e.m,this.smsCarriers=[],this.holdIds=[],this.activeFields={}}ngOnInit(){this.org.settings("sms.enable").then(l=>{this.smsEnabled=l["sms.enable"],this.smsEnabled&&this.pcrud.search("csc",{active:"t"},{order_by:{csc:"name"}}).subscribe(l=>{this.smsCarriers.push({id:l.id(),label:l.name()})})}),this.fetchHold()}fetchHold(){this.hold=null,0!==this.holdIds.length&&(this.isBatch()?this.hold=this.idl.create("ahr"):this.pcrud.retrieve("ahr",this.holdIds[0]).subscribe(l=>this.hold=l))}toFormData(){}isBatch(){return this.holdIds.length>1}pickupLibChanged(l){l&&this.hold.pickup_lib(l.id())}save(){if(this.isBatch()){const l=Object.keys(this.activeFields).filter(l=>this.activeFields[l]),n=[];this.pcrud.search("ahr",{id:this.holdIds}).subscribe(u=>{l.forEach(l=>u[l](this.hold[l]())),n.push(u)},l=>{},()=>{this.saveBatch(n)})}else this.saveBatch([this.hold])}saveBatch(l){let n=0;this.holds.updateHolds(l).subscribe(l=>{Number(l)>0&&(n++,console.debug("hold update succeeded with ",l))},l=>console.error("hold update failed with ",l),()=>{n===l.length?this.onComplete.emit(!0):console.error("Some holds failed to update")})}exit(){this.onComplete.emit(!1)}}var Ne=e.ob({encapsulation:2,styles:[],data:{}});function Pe(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,7,"div",[["class",""]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,6,"div",[["class","form-check form-check-inline"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,5,"input",[["class","form-check-input"],["name","active_pickup_lib"],["title","Activate Column Editing"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0,a=l.component;return"change"===n&&(t=!1!==e.Cb(l,3).onChange(u.target.checked)&&t),"blur"===n&&(t=!1!==e.Cb(l,3).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(a.activeFields.pickup_lib=u)&&t),t}),null,null)),e.pb(3,16384,null,0,s.b,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.b]),e.pb(5,671744,null,0,s.t,[[2,s.c],[8,null],[8,null],[6,s.o]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(7,16384,null,0,s.q,[[4,s.p]],null,null)],(function(l,n){l(n,5,0,"active_pickup_lib",n.component.activeFields.pickup_lib)}),(function(l,n){l(n,2,0,e.Cb(n,7).ngClassUntouched,e.Cb(n,7).ngClassTouched,e.Cb(n,7).ngClassPristine,e.Cb(n,7).ngClassDirty,e.Cb(n,7).ngClassValid,e.Cb(n,7).ngClassInvalid,e.Cb(n,7).ngClassPending)}))}function He(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,7,"div",[["class",""]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,6,"div",[["class","form-check form-check-inline"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,5,"input",[["class","form-check-input"],["name","active_mint_condition"],["title","Activate Column Editing"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0,a=l.component;return"change"===n&&(t=!1!==e.Cb(l,3).onChange(u.target.checked)&&t),"blur"===n&&(t=!1!==e.Cb(l,3).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(a.activeFields.mint_condition=u)&&t),t}),null,null)),e.pb(3,16384,null,0,s.b,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.b]),e.pb(5,671744,null,0,s.t,[[2,s.c],[8,null],[8,null],[6,s.o]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(7,16384,null,0,s.q,[[4,s.p]],null,null)],(function(l,n){l(n,5,0,"active_mint_condition",n.component.activeFields.mint_condition)}),(function(l,n){l(n,2,0,e.Cb(n,7).ngClassUntouched,e.Cb(n,7).ngClassTouched,e.Cb(n,7).ngClassPristine,e.Cb(n,7).ngClassDirty,e.Cb(n,7).ngClassValid,e.Cb(n,7).ngClassInvalid,e.Cb(n,7).ngClassPending)}))}function Ae(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,7,"div",[["class",""]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,6,"div",[["class","form-check form-check-inline"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,5,"input",[["class","form-check-input"],["name","active_frozen"],["title","Activate Column Editing"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0,a=l.component;return"change"===n&&(t=!1!==e.Cb(l,3).onChange(u.target.checked)&&t),"blur"===n&&(t=!1!==e.Cb(l,3).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(a.activeFields.frozen=u)&&t),t}),null,null)),e.pb(3,16384,null,0,s.b,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.b]),e.pb(5,671744,null,0,s.t,[[2,s.c],[8,null],[8,null],[6,s.o]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(7,16384,null,0,s.q,[[4,s.p]],null,null)],(function(l,n){l(n,5,0,"active_frozen",n.component.activeFields.frozen)}),(function(l,n){l(n,2,0,e.Cb(n,7).ngClassUntouched,e.Cb(n,7).ngClassTouched,e.Cb(n,7).ngClassPristine,e.Cb(n,7).ngClassDirty,e.Cb(n,7).ngClassValid,e.Cb(n,7).ngClassInvalid,e.Cb(n,7).ngClassPending)}))}function Fe(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,7,"div",[["class",""]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,6,"div",[["class","form-check form-check-inline"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,5,"input",[["class","form-check-input"],["name","active_cut_in_line"],["title","Activate Column Editing"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0,a=l.component;return"change"===n&&(t=!1!==e.Cb(l,3).onChange(u.target.checked)&&t),"blur"===n&&(t=!1!==e.Cb(l,3).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(a.activeFields.cut_in_line=u)&&t),t}),null,null)),e.pb(3,16384,null,0,s.b,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.b]),e.pb(5,671744,null,0,s.t,[[2,s.c],[8,null],[8,null],[6,s.o]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(7,16384,null,0,s.q,[[4,s.p]],null,null)],(function(l,n){l(n,5,0,"active_cut_in_line",n.component.activeFields.cut_in_line)}),(function(l,n){l(n,2,0,e.Cb(n,7).ngClassUntouched,e.Cb(n,7).ngClassTouched,e.Cb(n,7).ngClassPristine,e.Cb(n,7).ngClassDirty,e.Cb(n,7).ngClassValid,e.Cb(n,7).ngClassInvalid,e.Cb(n,7).ngClassPending)}))}function Oe(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,7,"div",[["class",""]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,6,"div",[["class","form-check form-check-inline"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,5,"input",[["class","form-check-input"],["name","active_thaw_date"],["title","Activate Column Editing"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0,a=l.component;return"change"===n&&(t=!1!==e.Cb(l,3).onChange(u.target.checked)&&t),"blur"===n&&(t=!1!==e.Cb(l,3).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(a.activeFields.thaw_date=u)&&t),t}),null,null)),e.pb(3,16384,null,0,s.b,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.b]),e.pb(5,671744,null,0,s.t,[[2,s.c],[8,null],[8,null],[6,s.o]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(7,16384,null,0,s.q,[[4,s.p]],null,null)],(function(l,n){l(n,5,0,"active_thaw_date",n.component.activeFields.thaw_date)}),(function(l,n){l(n,2,0,e.Cb(n,7).ngClassUntouched,e.Cb(n,7).ngClassTouched,e.Cb(n,7).ngClassPristine,e.Cb(n,7).ngClassDirty,e.Cb(n,7).ngClassValid,e.Cb(n,7).ngClassInvalid,e.Cb(n,7).ngClassPending)}))}function Ee(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,7,"div",[["class",""]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,6,"div",[["class","form-check form-check-inline"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,5,"input",[["class","form-check-input"],["name","active_request_time"],["title","Activate Column Editing"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0,a=l.component;return"change"===n&&(t=!1!==e.Cb(l,3).onChange(u.target.checked)&&t),"blur"===n&&(t=!1!==e.Cb(l,3).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(a.activeFields.request_time=u)&&t),t}),null,null)),e.pb(3,16384,null,0,s.b,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.b]),e.pb(5,671744,null,0,s.t,[[2,s.c],[8,null],[8,null],[6,s.o]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(7,16384,null,0,s.q,[[4,s.p]],null,null)],(function(l,n){l(n,5,0,"active_request_time",n.component.activeFields.request_time)}),(function(l,n){l(n,2,0,e.Cb(n,7).ngClassUntouched,e.Cb(n,7).ngClassTouched,e.Cb(n,7).ngClassPristine,e.Cb(n,7).ngClassDirty,e.Cb(n,7).ngClassValid,e.Cb(n,7).ngClassInvalid,e.Cb(n,7).ngClassPending)}))}function Re(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,7,"div",[["class",""]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,6,"div",[["class","form-check form-check-inline"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,5,"input",[["class","form-check-input"],["name","active_expire_time"],["title","Activate Column Editing"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0,a=l.component;return"change"===n&&(t=!1!==e.Cb(l,3).onChange(u.target.checked)&&t),"blur"===n&&(t=!1!==e.Cb(l,3).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(a.activeFields.expire_time=u)&&t),t}),null,null)),e.pb(3,16384,null,0,s.b,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.b]),e.pb(5,671744,null,0,s.t,[[2,s.c],[8,null],[8,null],[6,s.o]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(7,16384,null,0,s.q,[[4,s.p]],null,null)],(function(l,n){l(n,5,0,"active_expire_time",n.component.activeFields.expire_time)}),(function(l,n){l(n,2,0,e.Cb(n,7).ngClassUntouched,e.Cb(n,7).ngClassTouched,e.Cb(n,7).ngClassPristine,e.Cb(n,7).ngClassDirty,e.Cb(n,7).ngClassValid,e.Cb(n,7).ngClassInvalid,e.Cb(n,7).ngClassPending)}))}function Be(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,7,"div",[["class",""]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,6,"div",[["class","form-check form-check-inline"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,5,"input",[["class","form-check-input"],["name","active_shelf_expire_time"],["title","Activate Column Editing"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0,a=l.component;return"change"===n&&(t=!1!==e.Cb(l,3).onChange(u.target.checked)&&t),"blur"===n&&(t=!1!==e.Cb(l,3).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(a.activeFields.shelf_expire_time=u)&&t),t}),null,null)),e.pb(3,16384,null,0,s.b,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.b]),e.pb(5,671744,null,0,s.t,[[2,s.c],[8,null],[8,null],[6,s.o]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(7,16384,null,0,s.q,[[4,s.p]],null,null)],(function(l,n){l(n,5,0,"active_shelf_expire_time",n.component.activeFields.shelf_expire_time)}),(function(l,n){l(n,2,0,e.Cb(n,7).ngClassUntouched,e.Cb(n,7).ngClassTouched,e.Cb(n,7).ngClassPristine,e.Cb(n,7).ngClassDirty,e.Cb(n,7).ngClassValid,e.Cb(n,7).ngClassInvalid,e.Cb(n,7).ngClassPending)}))}function Le(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,7,"div",[["class",""]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,6,"div",[["class","form-check form-check-inline"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,5,"input",[["class","form-check-input"],["name","active_email_notify"],["title","Activate Column Editing"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0,a=l.component;return"change"===n&&(t=!1!==e.Cb(l,3).onChange(u.target.checked)&&t),"blur"===n&&(t=!1!==e.Cb(l,3).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(a.activeFields.email_notify=u)&&t),t}),null,null)),e.pb(3,16384,null,0,s.b,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.b]),e.pb(5,671744,null,0,s.t,[[2,s.c],[8,null],[8,null],[6,s.o]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(7,16384,null,0,s.q,[[4,s.p]],null,null)],(function(l,n){l(n,5,0,"active_email_notify",n.component.activeFields.email_notify)}),(function(l,n){l(n,2,0,e.Cb(n,7).ngClassUntouched,e.Cb(n,7).ngClassTouched,e.Cb(n,7).ngClassPristine,e.Cb(n,7).ngClassDirty,e.Cb(n,7).ngClassValid,e.Cb(n,7).ngClassInvalid,e.Cb(n,7).ngClassPending)}))}function Ue(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,7,"div",[["class",""]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,6,"div",[["class","form-check form-check-inline"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,5,"input",[["class","form-check-input"],["name","active_phone_notify"],["title","Activate Column Editing"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0,a=l.component;return"change"===n&&(t=!1!==e.Cb(l,3).onChange(u.target.checked)&&t),"blur"===n&&(t=!1!==e.Cb(l,3).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(a.activeFields.phone_notify=u)&&t),t}),null,null)),e.pb(3,16384,null,0,s.b,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.b]),e.pb(5,671744,null,0,s.t,[[2,s.c],[8,null],[8,null],[6,s.o]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(7,16384,null,0,s.q,[[4,s.p]],null,null)],(function(l,n){l(n,5,0,"active_phone_notify",n.component.activeFields.phone_notify)}),(function(l,n){l(n,2,0,e.Cb(n,7).ngClassUntouched,e.Cb(n,7).ngClassTouched,e.Cb(n,7).ngClassPristine,e.Cb(n,7).ngClassDirty,e.Cb(n,7).ngClassValid,e.Cb(n,7).ngClassInvalid,e.Cb(n,7).ngClassPending)}))}function je(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,7,"div",[["class",""]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,6,"div",[["class","form-check form-check-inline"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,5,"input",[["class","form-check-input"],["name","active_sms_notify"],["title","Activate Column Editing"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0,a=l.component;return"change"===n&&(t=!1!==e.Cb(l,3).onChange(u.target.checked)&&t),"blur"===n&&(t=!1!==e.Cb(l,3).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(a.activeFields.sms_notify=u)&&t),t}),null,null)),e.pb(3,16384,null,0,s.b,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.b]),e.pb(5,671744,null,0,s.t,[[2,s.c],[8,null],[8,null],[6,s.o]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(7,16384,null,0,s.q,[[4,s.p]],null,null)],(function(l,n){l(n,5,0,"active_sms_notify",n.component.activeFields.sms_notify)}),(function(l,n){l(n,2,0,e.Cb(n,7).ngClassUntouched,e.Cb(n,7).ngClassTouched,e.Cb(n,7).ngClassPristine,e.Cb(n,7).ngClassDirty,e.Cb(n,7).ngClassValid,e.Cb(n,7).ngClassInvalid,e.Cb(n,7).ngClassPending)}))}function $e(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,7,"div",[["class",""]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,6,"div",[["class","form-check form-check-inline"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,5,"input",[["class","form-check-input"],["name","active_sms_carrier"],["title","Activate Column Editing"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0,a=l.component;return"change"===n&&(t=!1!==e.Cb(l,3).onChange(u.target.checked)&&t),"blur"===n&&(t=!1!==e.Cb(l,3).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(a.activeFields.sms_carrier=u)&&t),t}),null,null)),e.pb(3,16384,null,0,s.b,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.b]),e.pb(5,671744,null,0,s.t,[[2,s.c],[8,null],[8,null],[6,s.o]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(7,16384,null,0,s.q,[[4,s.p]],null,null)],(function(l,n){l(n,5,0,"active_sms_carrier",n.component.activeFields.sms_carrier)}),(function(l,n){l(n,2,0,e.Cb(n,7).ngClassUntouched,e.Cb(n,7).ngClassTouched,e.Cb(n,7).ngClassPristine,e.Cb(n,7).ngClassDirty,e.Cb(n,7).ngClassValid,e.Cb(n,7).ngClassInvalid,e.Cb(n,7).ngClassPending)}))}function Ve(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,24,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,23,"div",[["class","form-group row"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,5,"div",[["class","col-lg-2 d-flex"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,je)),e.pb(4,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(5,0,null,null,2,"div",[["class","flex-1"]],null,null,null,null,null)),(l()(),e.qb(6,0,null,null,1,"label",[["for","sms_notify"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Text/SMS Number:"])),(l()(),e.qb(8,0,null,null,6,"div",[["class","col-lg-4"]],null,null,null,null,null)),(l()(),e.qb(9,0,null,null,5,"input",[["class","form-control"],["id","sms_notify"],["name","sms_notify"],["placeholder","SMS Number..."],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,u){var t=!0,a=l.component;return"input"===n&&(t=!1!==e.Cb(l,10)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,10).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Cb(l,10)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Cb(l,10)._compositionEnd(u.target.value)&&t),"ngModelChange"===n&&(t=!1!==a.hold.sms_notify(u)&&t),t}),null,null)),e.pb(10,16384,null,0,s.d,[e.C,e.k,[2,s.a]],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.d]),e.pb(12,671744,null,0,s.t,[[2,s.c],[8,null],[8,null],[6,s.o]],{name:[0,"name"],isDisabled:[1,"isDisabled"],model:[2,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(14,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(15,0,null,null,5,"div",[["class","col-lg-2 d-flex"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,$e)),e.pb(17,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(18,0,null,null,2,"div",[["class","flex-1"]],null,null,null,null,null)),(l()(),e.qb(19,0,null,null,1,"label",[["for","sms_carrier"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Text/SMS Number:"])),(l()(),e.qb(21,0,null,null,3,"div",[["class","col-lg-4"]],null,null,null,null,null)),(l()(),e.qb(22,0,null,null,2,"eg-combobox",[["id","sms_carrier"],["placeholder","SMS Carrier..."]],null,[[null,"onChange"]],(function(l,n,u){var e=!0;return"onChange"===n&&(e=!1!==l.component.hold.sms_carrier(u.id)&&e),e}),Wu.b,Wu.a)),e.Hb(5120,null,s.o,(function(l){return[l]}),[Ju.a]),e.pb(24,114688,null,0,Ju.a,[e.k,g.a,J.a,Pn.a],{placeholder:[0,"placeholder"],disabled:[1,"disabled"],startId:[2,"startId"],entries:[3,"entries"]},{onChange:"onChange"})],(function(l,n){var u=n.component;l(n,4,0,u.isBatch()),l(n,12,0,"sms_notify",u.isBatch()&&!u.activeFields.sms_notify,u.hold.sms_notify()),l(n,17,0,u.isBatch()),l(n,24,0,"SMS Carrier...",u.isBatch()&&!u.activeFields.sms_carrier,u.hold.sms_carrier(),u.smsCarriers)}),(function(l,n){l(n,9,0,e.Cb(n,14).ngClassUntouched,e.Cb(n,14).ngClassTouched,e.Cb(n,14).ngClassPristine,e.Cb(n,14).ngClassDirty,e.Cb(n,14).ngClassValid,e.Cb(n,14).ngClassInvalid,e.Cb(n,14).ngClassPending)}))}function Ge(l){return e.Mb(0,[(l()(),e.qb(0,0,[["holdManageForm",1]],null,138,"form",[["class","form-validated common-form striped-odd"],["novalidate",""],["role","form"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(l,n,u){var t=!0;return"submit"===n&&(t=!1!==e.Cb(l,2).onSubmit(u)&&t),"reset"===n&&(t=!1!==e.Cb(l,2).onReset()&&t),t}),null,null)),e.pb(1,16384,null,0,s.G,[],null,null),e.pb(2,4210688,null,0,s.s,[[8,null],[8,null]],null,null),e.Hb(2048,null,s.c,null,[s.s]),e.pb(4,16384,null,0,s.r,[[4,s.c]],null,null),(l()(),e.qb(5,0,null,null,25,"div",[["class","form-group row d-flex"]],null,null,null,null,null)),(l()(),e.qb(6,0,null,null,5,"div",[["class","col-lg-2 d-flex"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,Pe)),e.pb(8,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(9,0,null,null,2,"div",[["class","flex-1"]],null,null,null,null,null)),(l()(),e.qb(10,0,null,null,1,"label",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Pickup Library:"])),(l()(),e.qb(12,0,null,null,2,"div",[["class","col-lg-4"]],null,null,null,null,null)),(l()(),e.qb(13,0,null,null,1,"eg-org-select",[],null,[[null,"onChange"]],(function(l,n,u){var e=!0;return"onChange"===n&&(e=!1!==l.component.pickupLibChanged(u)&&e),e}),d.b,d.a)),e.pb(14,114688,null,0,p.a,[h.a,g.a,m.a,f.a],{disabled:[0,"disabled"],initialOrgId:[1,"initialOrgId"]},{onChange:"onChange"}),(l()(),e.qb(15,0,null,null,5,"div",[["class","col-lg-2 d-flex"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,He)),e.pb(17,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(18,0,null,null,2,"div",[["class","flex-1"]],null,null,null,null,null)),(l()(),e.qb(19,0,null,null,1,"label",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Desired Item Condition:"])),(l()(),e.qb(21,0,null,null,9,"div",[["class","col-lg-4"]],null,null,null,null,null)),(l()(),e.qb(22,0,null,null,8,"div",[["class","form-check form-check-inline"]],null,null,null,null,null)),(l()(),e.qb(23,0,null,null,5,"input",[["class","form-check-input"],["id","mint-condition"],["name","mint"],["type","checkbox"],["value","mint"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0,a=l.component;return"change"===n&&(t=!1!==e.Cb(l,24).onChange(u.target.checked)&&t),"blur"===n&&(t=!1!==e.Cb(l,24).onTouched()&&t),"ngModelChange"===n&&(t=!1!==a.hold.mint_condition(u?"t":"f")&&t),t}),null,null)),e.pb(24,16384,null,0,s.b,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.b]),e.pb(26,671744,null,0,s.t,[[2,s.c],[8,null],[8,null],[6,s.o]],{name:[0,"name"],isDisabled:[1,"isDisabled"],model:[2,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(28,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(29,0,null,null,1,"label",[["class","form-check-label"],["for","mint-condition"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,[" Good Condition Only "])),(l()(),e.qb(31,0,null,null,28,"div",[["class","form-group row"]],null,null,null,null,null)),(l()(),e.qb(32,0,null,null,5,"div",[["class","col-lg-2 d-flex"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,Ae)),e.pb(34,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(35,0,null,null,2,"div",[["class","flex-1"]],null,null,null,null,null)),(l()(),e.qb(36,0,null,null,1,"label",[["for","frozen"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Hold is Suspended:"])),(l()(),e.qb(38,0,null,null,7,"div",[["class","col-lg-4"]],null,null,null,null,null)),(l()(),e.qb(39,0,null,null,6,"div",[["class","form-check form-check-inline"]],null,null,null,null,null)),(l()(),e.qb(40,0,null,null,5,"input",[["class","form-check-input"],["id","frozen"],["name","frozen"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0,a=l.component;return"change"===n&&(t=!1!==e.Cb(l,41).onChange(u.target.checked)&&t),"blur"===n&&(t=!1!==e.Cb(l,41).onTouched()&&t),"ngModelChange"===n&&(t=!1!==a.hold.frozen(u?"t":"f")&&t),t}),null,null)),e.pb(41,16384,null,0,s.b,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.b]),e.pb(43,671744,null,0,s.t,[[2,s.c],[8,null],[8,null],[6,s.o]],{name:[0,"name"],isDisabled:[1,"isDisabled"],model:[2,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(45,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(46,0,null,null,5,"div",[["class","col-lg-2 d-flex"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,Fe)),e.pb(48,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(49,0,null,null,2,"div",[["class","flex-1"]],null,null,null,null,null)),(l()(),e.qb(50,0,null,null,1,"label",[["for","cut_in_line"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Top of Queue:"])),(l()(),e.qb(52,0,null,null,7,"div",[["class","col-lg-4"]],null,null,null,null,null)),(l()(),e.qb(53,0,null,null,6,"div",[["class","form-check form-check-inline"]],null,null,null,null,null)),(l()(),e.qb(54,0,null,null,5,"input",[["class","form-check-input"],["id","cut_in_line"],["name","cut_in_line"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0,a=l.component;return"change"===n&&(t=!1!==e.Cb(l,55).onChange(u.target.checked)&&t),"blur"===n&&(t=!1!==e.Cb(l,55).onTouched()&&t),"ngModelChange"===n&&(t=!1!==a.hold.cut_in_line(u?"t":"f")&&t),t}),null,null)),e.pb(55,16384,null,0,s.b,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.b]),e.pb(57,671744,null,0,s.t,[[2,s.c],[8,null],[8,null],[6,s.o]],{name:[0,"name"],isDisabled:[1,"isDisabled"],model:[2,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(59,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(60,0,null,null,42,"div",[["class","w-100 border border-primary rounded"]],null,null,null,null,null)),(l()(),e.qb(61,0,null,null,20,"div",[["class","form-group row"]],null,null,null,null,null)),(l()(),e.qb(62,0,null,null,5,"div",[["class","col-lg-2 d-flex"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,Oe)),e.pb(64,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(65,0,null,null,2,"div",[["class","flex-1"]],null,null,null,null,null)),(l()(),e.qb(66,0,null,null,1,"label",[["for","thaw_date"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Activate Date:"])),(l()(),e.qb(68,0,null,null,3,"div",[["class","col-lg-4"]],null,null,null,null,null)),(l()(),e.qb(69,0,null,null,2,"eg-date-select",[["domId","thaw_date"]],null,[[null,"onChangeAsIso"]],(function(l,n,u){var e=!0;return"onChangeAsIso"===n&&(e=!1!==l.component.hold.thaw_date(u)&&e),e}),Me.b,Me.a)),e.Hb(5120,null,s.o,(function(l){return[l]}),[Se.a]),e.pb(71,114688,null,0,Se.a,[],{initialIso:[0,"initialIso"],domId:[1,"domId"],disabled:[2,"disabled"]},{onChangeAsIso:"onChangeAsIso"}),(l()(),e.qb(72,0,null,null,5,"div",[["class","col-lg-2 d-flex"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,Ee)),e.pb(74,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(75,0,null,null,2,"div",[["class","flex-1"]],null,null,null,null,null)),(l()(),e.qb(76,0,null,null,1,"label",[["for","request_time"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Request Date:"])),(l()(),e.qb(78,0,null,null,3,"div",[["class","col-lg-4"]],null,null,null,null,null)),(l()(),e.qb(79,0,null,null,2,"eg-date-select",[["domId","request_time"]],null,[[null,"onChangeAsIso"]],(function(l,n,u){var e=!0;return"onChangeAsIso"===n&&(e=!1!==l.component.hold.request_time(u)&&e),e}),Me.b,Me.a)),e.Hb(5120,null,s.o,(function(l){return[l]}),[Se.a]),e.pb(81,114688,null,0,Se.a,[],{initialIso:[0,"initialIso"],domId:[1,"domId"],disabled:[2,"disabled"]},{onChangeAsIso:"onChangeAsIso"}),(l()(),e.qb(82,0,null,null,20,"div",[["class","form-group row"]],null,null,null,null,null)),(l()(),e.qb(83,0,null,null,5,"div",[["class","col-lg-2 d-flex"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,Re)),e.pb(85,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(86,0,null,null,2,"div",[["class","flex-1"]],null,null,null,null,null)),(l()(),e.qb(87,0,null,null,1,"label",[["for","expire_time"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Expire Date:"])),(l()(),e.qb(89,0,null,null,3,"div",[["class","col-lg-4"]],null,null,null,null,null)),(l()(),e.qb(90,0,null,null,2,"eg-date-select",[["domId","expire_time"]],null,[[null,"onChangeAsIso"]],(function(l,n,u){var e=!0;return"onChangeAsIso"===n&&(e=!1!==l.component.hold.expire_time(u)&&e),e}),Me.b,Me.a)),e.Hb(5120,null,s.o,(function(l){return[l]}),[Se.a]),e.pb(92,114688,null,0,Se.a,[],{initialIso:[0,"initialIso"],domId:[1,"domId"],disabled:[2,"disabled"]},{onChangeAsIso:"onChangeAsIso"}),(l()(),e.qb(93,0,null,null,5,"div",[["class","col-lg-2 d-flex"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,Be)),e.pb(95,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(96,0,null,null,2,"div",[["class","flex-1"]],null,null,null,null,null)),(l()(),e.qb(97,0,null,null,1,"label",[["for","shelf_expire_time"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Shelf Expire Date:"])),(l()(),e.qb(99,0,null,null,3,"div",[["class","col-lg-4"]],null,null,null,null,null)),(l()(),e.qb(100,0,null,null,2,"eg-date-select",[["domId","shelf_expire_time"]],null,[[null,"onChangeAsIso"]],(function(l,n,u){var e=!0;return"onChangeAsIso"===n&&(e=!1!==l.component.hold.shelf_expire_time(u)&&e),e}),Me.b,Me.a)),e.Hb(5120,null,s.o,(function(l){return[l]}),[Se.a]),e.pb(102,114688,null,0,Se.a,[],{initialIso:[0,"initialIso"],domId:[1,"domId"],disabled:[2,"disabled"]},{onChangeAsIso:"onChangeAsIso"}),(l()(),e.qb(103,0,null,null,27,"div",[["class","form-group row"]],null,null,null,null,null)),(l()(),e.qb(104,0,null,null,5,"div",[["class","col-lg-2 d-flex"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,Le)),e.pb(106,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(107,0,null,null,2,"div",[["class","flex-1"]],null,null,null,null,null)),(l()(),e.qb(108,0,null,null,1,"label",[["for","email"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Send Emails:"])),(l()(),e.qb(110,0,null,null,7,"div",[["class","col-lg-4"]],null,null,null,null,null)),(l()(),e.qb(111,0,null,null,6,"div",[["class","form-check form-check-inline"]],null,null,null,null,null)),(l()(),e.qb(112,0,null,null,5,"input",[["class","form-check-input"],["id","email"],["name","email"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0,a=l.component;return"change"===n&&(t=!1!==e.Cb(l,113).onChange(u.target.checked)&&t),"blur"===n&&(t=!1!==e.Cb(l,113).onTouched()&&t),"ngModelChange"===n&&(t=!1!==a.hold.email_notify(u?"t":"f")&&t),t}),null,null)),e.pb(113,16384,null,0,s.b,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.b]),e.pb(115,671744,null,0,s.t,[[2,s.c],[8,null],[8,null],[6,s.o]],{name:[0,"name"],isDisabled:[1,"isDisabled"],model:[2,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(117,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(118,0,null,null,5,"div",[["class","col-lg-2 d-flex"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,Ue)),e.pb(120,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(121,0,null,null,2,"div",[["class","flex-1"]],null,null,null,null,null)),(l()(),e.qb(122,0,null,null,1,"label",[["for","phone"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Phone Number:"])),(l()(),e.qb(124,0,null,null,6,"div",[["class","col-lg-4"]],null,null,null,null,null)),(l()(),e.qb(125,0,null,null,5,"input",[["class","form-control"],["id","phone"],["name","phone"],["placeholder","Phone Number..."],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,u){var t=!0,a=l.component;return"input"===n&&(t=!1!==e.Cb(l,126)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,126).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Cb(l,126)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Cb(l,126)._compositionEnd(u.target.value)&&t),"ngModelChange"===n&&(t=!1!==a.hold.phone_notify(u)&&t),t}),null,null)),e.pb(126,16384,null,0,s.d,[e.C,e.k,[2,s.a]],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.d]),e.pb(128,671744,null,0,s.t,[[2,s.c],[8,null],[8,null],[6,s.o]],{name:[0,"name"],isDisabled:[1,"isDisabled"],model:[2,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(130,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.fb(16777216,null,null,1,null,Ve)),e.pb(132,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(133,0,null,null,5,"div",[["class","row d-flex justify-content-end"]],null,null,null,null,null)),(l()(),e.qb(134,0,null,null,4,"div",[],null,null,null,null,null)),(l()(),e.qb(135,0,null,null,1,"button",[["class","btn btn-warning"],["type","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.exit()&&e),e}),null,null)),(l()(),e.Kb(-1,null,[" Cancel "])),(l()(),e.qb(137,0,null,null,1,"button",[["class","btn btn-success ml-2"],["type","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.save()&&e),e}),null,null)),(l()(),e.Kb(-1,null,[" Apply "]))],(function(l,n){var u=n.component;l(n,8,0,u.isBatch()),l(n,14,0,u.isBatch()&&!u.activeFields.pickup_lib,u.hold.pickup_lib()),l(n,17,0,u.isBatch()),l(n,26,0,"mint",u.isBatch()&&!u.activeFields.mint_condition,"t"==u.hold.mint_condition()),l(n,34,0,u.isBatch()),l(n,43,0,"frozen",u.isBatch()&&!u.activeFields.frozen,"t"==u.hold.frozen()),l(n,48,0,u.isBatch()),l(n,57,0,"cut_in_line",u.isBatch()&&!u.activeFields.cut_in_line,"t"==u.hold.cut_in_line()),l(n,64,0,u.isBatch()),l(n,71,0,u.hold.thaw_date(),"thaw_date",u.isBatch()&&!u.activeFields.thaw_date),l(n,74,0,u.isBatch()),l(n,81,0,u.hold.request_time(),"request_time",u.isBatch()&&!u.activeFields.request_time),l(n,85,0,u.isBatch()),l(n,92,0,u.hold.expire_time(),"expire_time",u.isBatch()&&!u.activeFields.expire_time),l(n,95,0,u.isBatch()),l(n,102,0,u.hold.shelf_expire_time(),"shelf_expire_time",u.isBatch()&&!u.activeFields.shelf_expire_time),l(n,106,0,u.isBatch()),l(n,115,0,"email",u.isBatch()&&!u.activeFields.email_notify,"t"==u.hold.email_notify()),l(n,120,0,u.isBatch()),l(n,128,0,"phone",u.isBatch()&&!u.activeFields.phone_notify,u.hold.phone_notify()),l(n,132,0,u.smsEnabled)}),(function(l,n){l(n,0,0,e.Cb(n,4).ngClassUntouched,e.Cb(n,4).ngClassTouched,e.Cb(n,4).ngClassPristine,e.Cb(n,4).ngClassDirty,e.Cb(n,4).ngClassValid,e.Cb(n,4).ngClassInvalid,e.Cb(n,4).ngClassPending),l(n,23,0,e.Cb(n,28).ngClassUntouched,e.Cb(n,28).ngClassTouched,e.Cb(n,28).ngClassPristine,e.Cb(n,28).ngClassDirty,e.Cb(n,28).ngClassValid,e.Cb(n,28).ngClassInvalid,e.Cb(n,28).ngClassPending),l(n,40,0,e.Cb(n,45).ngClassUntouched,e.Cb(n,45).ngClassTouched,e.Cb(n,45).ngClassPristine,e.Cb(n,45).ngClassDirty,e.Cb(n,45).ngClassValid,e.Cb(n,45).ngClassInvalid,e.Cb(n,45).ngClassPending),l(n,54,0,e.Cb(n,59).ngClassUntouched,e.Cb(n,59).ngClassTouched,e.Cb(n,59).ngClassPristine,e.Cb(n,59).ngClassDirty,e.Cb(n,59).ngClassValid,e.Cb(n,59).ngClassInvalid,e.Cb(n,59).ngClassPending),l(n,112,0,e.Cb(n,117).ngClassUntouched,e.Cb(n,117).ngClassTouched,e.Cb(n,117).ngClassPristine,e.Cb(n,117).ngClassDirty,e.Cb(n,117).ngClassValid,e.Cb(n,117).ngClassInvalid,e.Cb(n,117).ngClassPending),l(n,125,0,e.Cb(n,130).ngClassUntouched,e.Cb(n,130).ngClassTouched,e.Cb(n,130).ngClassPristine,e.Cb(n,130).ngClassDirty,e.Cb(n,130).ngClassValid,e.Cb(n,130).ngClassInvalid,e.Cb(n,130).ngClassPending)}))}function ze(l){return e.Mb(0,[(l()(),e.fb(16777216,null,null,1,null,Ge)),e.pb(1,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,1,0,n.component.hold)}),null)}class We extends w.a{constructor(l){super(l),this.modal=l}open(l){return super.open(l)}onComplete(l){this.close(l)}}var Je=e.ob({encapsulation:2,styles:[],data:{}});function Qe(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"h4",[["class","modal-title"]],null,null,null,null,null)),(l()(),e.Kb(2,null,["Modify Hold (#",")"]))],null,(function(l,n){l(n,2,0,n.component.holdIds[0])}))}function Ze(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"h4",[["class","modal-title"]],null,null,null,null,null)),(l()(),e.Kb(2,null,["Batch Modify "," Holds"]))],null,(function(l,n){l(n,2,0,n.component.holdIds.length)}))}function Ye(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,7,"div",[["class","modal-header bg-info"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,Qe)),e.pb(2,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,Ze)),e.pb(4,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(5,0,null,null,2,"button",[["aria-label","Close"],["class","close"],["type","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.close()&&e),e}),null,null)),(l()(),e.qb(6,0,null,null,1,"span",[["aria-hidden","true"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Ã—"])),(l()(),e.qb(8,0,null,null,2,"div",[["class","modal-body"]],null,null,null,null,null)),(l()(),e.qb(9,0,null,null,1,"eg-hold-manage",[],null,[[null,"onComplete"]],(function(l,n,u){var e=!0;return"onComplete"===n&&(e=!1!==l.component.onComplete(u)&&e),e}),ze,Ne)),e.pb(10,114688,null,0,De,[J.a,m.a,Pn.a,Ke],{holdIds:[0,"holdIds"]},{onComplete:"onComplete"})],(function(l,n){var u=n.component;l(n,2,0,1==u.holdIds.length),l(n,4,0,u.holdIds.length>1),l(n,10,0,u.holdIds)}),null)}function Xe(l){return e.Mb(0,[e.Ib(671088640,1,{dialogContent:0}),(l()(),e.fb(0,[[1,2],["dialogContent",2]],null,0,null,Ye))],null,null)}var lt=u("HDdC"),nt=u("Q4dc");class ut{constructor(l,n,u,e,t){this.net=l,this.org=n,this.store=u,this.auth=e,this.printer=t,this.mode="list",this.initDone=!1,this.gridDataSource=new ou.c,this.enablePreFetch=null}set recordId(l){this._recordId=l,this.initDone&&this.holdsGrid.reload()}set userId(l){this._userId=l,this.initDone&&this.holdsGrid.reload()}set showCanceledSince(l){this._showCanceledSince=l,this.initDone&&this.holdsGrid.reload()}set showFulfilledSince(l){this._showFulfilledSince=l,this.initDone&&this.holdsGrid.reload()}ngOnInit(){this.initDone=!0,this.pickupLib=this.org.get(this.initialPickupLib),this.preFetchSetting&&this.store.getItem(this.preFetchSetting).then(l=>this.enablePreFetch=Boolean(l)),this.defaultSort||(this.defaultSort=[{name:"request_time",dir:"asc"}]),this.gridDataSource.getRows=(l,n)=>this.fetchHolds(l,n=n.length>0?n:this.defaultSort),this.cellTextGenerator={title:l=>l.title,cp_barcode:l=>null==l.cp_barcode?"":l.cp_barcode,patron_barcode:l=>l.ucard_barcode}}initComplete(){return null!==this.enablePreFetch}pickupLibChanged(l){this.pickupLib=l,this.holdsGrid.reload()}preFetchHolds(l){this.enablePreFetch=l,l&&setTimeout(()=>this.holdsGrid.reload()),this.preFetchSetting&&this.store.setItem(this.preFetchSetting,l)}applyFilters(){const l={is_staff_request:!0,fulfillment_time:this._showFulfilledSince?this._showFulfilledSince.toISOString():null,cancel_time:this._showCanceledSince?this._showCanceledSince.toISOString():null};return this.pickupLib&&(l.pickup_lib=this.org.descendants(this.pickupLib,!0)),this._recordId&&(l.record_id=this._recordId),this._userId&&(l.usr_id=this._userId),l}fetchHolds(l,n){if(!this._recordId&&!this.pickupLib&&!this._userId)return Object(tu.a)([]);const u=this.applyFilters(),e=[];n.length>0&&n.forEach(l=>{const n={};n[l.name]={dir:l.dir,nulls:"last"},e.push(n)});const t=this.enablePreFetch?null:l.limit,a=this.enablePreFetch?0:l.offset;let o;const i=new lt.a(l=>o=l);this.progressDialog.open(),this.progressDialog.update({value:0,max:1});let r=!0,s=0;return this.net.request("open-ils.circ","open-ils.circ.hold.wide_hash.stream",this.auth.token(),u,e,t,a).subscribe(l=>{r?(this.holdsCount=Number(l),r=!1):(this.progressDialog.update({value:++s,max:this.holdsCount}),o.next(l))},l=>{this.progressDialog.close(),o.error(l)},()=>{this.progressDialog.close(),o.complete()}),i}showDetails(l){this.showDetail(l[0])}showDetail(l){l&&(this.mode="detail",this.detailHold=l)}showManager(l){l.length&&(this.mode="manage",this.editHolds=l.map(l=>l.id))}handleModify(l){this.mode="list",l&&setTimeout(()=>this.holdsGrid.reload())}showRecentCircs(l){l.length&&window.open("/eg/staff/cat/item/"+l[0].cp_id+"/circ_list","_blank")}showPatron(l){l.length&&window.open("/eg/staff/circ/patron/"+l[0].usr_id+"/checkout","_blank")}showManageDialog(l){const n=l.map(l=>l.id).filter(l=>Boolean(l));n.length>0&&(this.manageDialog.holdIds=n,this.manageDialog.open({size:"lg"}).subscribe(l=>{l&&this.holdsGrid.reload()}))}showTransferDialog(l){const n=l.map(l=>l.id).filter(l=>Boolean(l));n.length>0&&(this.transferDialog.holdIds=n,this.transferDialog.open({}).subscribe(l=>{l&&this.holdsGrid.reload()}))}showMarkDamagedDialog(l){return Object(Ru.a)(this,void 0,void 0,(function*(){const n=l.map(l=>l.cp_id).filter(l=>Boolean(l));if(0===n.length)return;let u=!1;const e=l=>Object(Ru.a)(this,void 0,void 0,(function*(){return 0===l.length?Promise.resolve():(this.markDamagedDialog.copyId=l.pop(),this.markDamagedDialog.open({size:"lg"}).subscribe(n=>(n&&(u=!0),e(l)),n=>e(l)))}));yield e(n),u&&this.holdsGrid.reload()}))}showMarkMissingDialog(l){const n=l.map(l=>l.cp_id).filter(l=>Boolean(l));n.length>0&&(this.markMissingDialog.copyIds=n,this.markMissingDialog.open({}).subscribe(l=>{l&&this.holdsGrid.reload()}))}showRetargetDialog(l){const n=l.map(l=>l.id).filter(l=>Boolean(l));n.length>0&&(this.retargetDialog.holdIds=n,this.retargetDialog.open({}).subscribe(l=>{l&&this.holdsGrid.reload()}))}showCancelDialog(l){const n=l.map(l=>l.id).filter(l=>Boolean(l));n.length>0&&(this.cancelDialog.holdIds=n,this.cancelDialog.open({}).subscribe(l=>{l&&this.holdsGrid.reload()}))}printHolds(){const l=new nt.a;l.offset=0,l.limit=null,0===this.gridDataSource.sort.length&&(this.gridDataSource.sort=this.defaultSort),this.gridDataSource.requestPage(l).then(()=>{this.gridDataSource.data.length>0&&this.printer.print({templateName:this.printTemplate||"holds_for_bib",contextData:this.gridDataSource.data,printContext:"default"})})}}var et=e.ob({encapsulation:2,styles:[],data:{}});function tt(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"eg-hold-detail",[],null,[[null,"onShowList"]],(function(l,n,u){var e=!0;return"onShowList"===n&&(e=!1!==(l.component.mode="list")&&e),e}),Nu,qu)),e.pb(2,114688,null,0,yu,[Q.b,m.a,h.a],{wideHold:[0,"wideHold"]},{onShowList:"onShowList"})],(function(l,n){l(n,2,0,n.component.detailHold)}),null)}function at(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,7,"div",[["class","row"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,6,"div",[["class","col-lg-4"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,5,"div",[["class","input-group"]],null,null,null,null,null)),(l()(),e.qb(3,0,null,null,2,"div",[["class","input-group-prepend"]],null,null,null,null,null)),(l()(),e.qb(4,0,null,null,1,"div",[["class","input-group-text"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Pickup Library"])),(l()(),e.qb(6,0,null,null,1,"eg-org-select",[],null,[[null,"onChange"]],(function(l,n,u){var e=!0;return"onChange"===n&&(e=!1!==l.component.pickupLibChanged(u)&&e),e}),d.b,d.a)),e.pb(7,114688,null,0,p.a,[h.a,g.a,m.a,f.a],{initialOrg:[0,"initialOrg"]},{onChange:"onChange"})],(function(l,n){l(n,7,0,n.component.pickupLib)}),null)}function ot(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,"a",[],[[8,"href",4]],null,null,null,null)),(l()(),e.Kb(1,null,[" "," "]))],null,(function(l,n){l(n,0,0,e.ub(1,"/eg/staff/cat/item/",n.context.row.cp_id,"/summary")),l(n,1,0,n.context.row.cp_barcode)}))}function it(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,"a",[],[[8,"href",4]],null,null,null,null)),(l()(),e.Kb(1,null,[" "," "]))],null,(function(l,n){l(n,0,0,e.ub(1,"/eg/staff/circ/patron/",n.context.row.usr_id,"/checkout")),l(n,1,0,n.context.row.ucard_barcode)}))}function rt(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,"a",[["class","no-href"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Cb(l,1).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.pb(1,671744,null,0,C.n,[C.l,C.a,c.m],{routerLink:[0,"routerLink"]},null),(l()(),e.Kb(2,null,[" "," "]))],(function(l,n){l(n,1,0,e.ub(1,"/staff/catalog/record/",n.context.row.record_id,""))}),(function(l,n){l(n,0,0,e.Cb(n,1).target,e.Cb(n,1).href),l(n,2,0,n.context.row.title)}))}function st(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,291,null,null,null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,at)),e.pb(2,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(3,0,null,null,288,"eg-grid",[],null,[[null,"onRowActivate"]],(function(l,n,u){var e=!0;return"onRowActivate"===n&&(e=!1!==l.component.showDetail(u)&&e),e}),Xn.b,Xn.a)),e.pb(4,4440064,[[1,4],["holdsGrid",4]],0,lu.a,[J.a,m.a,_.a,nu.a],{dataSource:[0,"dataSource"],sortable:[1,"sortable"],multiSortable:[2,"multiSortable"],useLocalSort:[3,"useLocalSort"],persistKey:[4,"persistKey"],cellTextGenerator:[5,"cellTextGenerator"]},{onRowActivate:"onRowActivate"}),(l()(),e.qb(5,0,null,null,1,"eg-grid-toolbar-checkbox",[["label","Pre-Fetch All Holds"]],null,[[null,"onChange"]],(function(l,n,u){var e=!0;return"onChange"===n&&(e=!1!==l.component.preFetchHolds(u)&&e),e}),Pu.b,Pu.a)),e.pb(6,114688,null,0,Hu.a,[lu.a],{label:[0,"label"],initialValue:[1,"initialValue"]},{onChange:"onChange"}),(l()(),e.qb(7,0,null,null,1,"eg-grid-toolbar-action",[["group","Hold"],["label","Show Hold Details"]],null,[[null,"onClick"]],(function(l,n,u){var e=!0;return"onClick"===n&&(e=!1!==l.component.showDetails(u)&&e),e}),Au.b,Au.a)),e.pb(8,114688,null,0,Fu.a,[lu.a],{label:[0,"label"],group:[1,"group"]},{onClick:"onClick"}),(l()(),e.qb(9,0,null,null,1,"eg-grid-toolbar-action",[["group","Hold"],["label","Modify Hold(s)"]],null,[[null,"onClick"]],(function(l,n,u){var e=!0;return"onClick"===n&&(e=!1!==l.component.showManageDialog(u)&&e),e}),Au.b,Au.a)),e.pb(10,114688,null,0,Fu.a,[lu.a],{label:[0,"label"],group:[1,"group"]},{onClick:"onClick"}),(l()(),e.qb(11,0,null,null,1,"eg-grid-toolbar-action",[["group","Item"],["label","Show Last Few Circulations"]],null,[[null,"onClick"]],(function(l,n,u){var e=!0;return"onClick"===n&&(e=!1!==l.component.showRecentCircs(u)&&e),e}),Au.b,Au.a)),e.pb(12,114688,null,0,Fu.a,[lu.a],{label:[0,"label"],group:[1,"group"]},{onClick:"onClick"}),(l()(),e.qb(13,0,null,null,1,"eg-grid-toolbar-action",[["group","Patron"],["label","Retrieve Patron"]],null,[[null,"onClick"]],(function(l,n,u){var e=!0;return"onClick"===n&&(e=!1!==l.component.showPatron(u)&&e),e}),Au.b,Au.a)),e.pb(14,114688,null,0,Fu.a,[lu.a],{label:[0,"label"],group:[1,"group"]},{onClick:"onClick"}),(l()(),e.qb(15,0,null,null,1,"eg-grid-toolbar-action",[["group","Hold"],["label","Transfer To Marked Title"]],null,[[null,"onClick"]],(function(l,n,u){var e=!0;return"onClick"===n&&(e=!1!==l.component.showTransferDialog(u)&&e),e}),Au.b,Au.a)),e.pb(16,114688,null,0,Fu.a,[lu.a],{label:[0,"label"],group:[1,"group"]},{onClick:"onClick"}),(l()(),e.qb(17,0,null,null,1,"eg-grid-toolbar-action",[["group","Item"],["label","Mark Item Damaged"]],null,[[null,"onClick"]],(function(l,n,u){var e=!0;return"onClick"===n&&(e=!1!==l.component.showMarkDamagedDialog(u)&&e),e}),Au.b,Au.a)),e.pb(18,114688,null,0,Fu.a,[lu.a],{label:[0,"label"],group:[1,"group"]},{onClick:"onClick"}),(l()(),e.qb(19,0,null,null,1,"eg-grid-toolbar-action",[["group","Item"],["label","Mark Item Missing"]],null,[[null,"onClick"]],(function(l,n,u){var e=!0;return"onClick"===n&&(e=!1!==l.component.showMarkMissingDialog(u)&&e),e}),Au.b,Au.a)),e.pb(20,114688,null,0,Fu.a,[lu.a],{label:[0,"label"],group:[1,"group"]},{onClick:"onClick"}),(l()(),e.qb(21,0,null,null,1,"eg-grid-toolbar-action",[["group","Hold"],["label","Find Another Target"]],null,[[null,"onClick"]],(function(l,n,u){var e=!0;return"onClick"===n&&(e=!1!==l.component.showRetargetDialog(u)&&e),e}),Au.b,Au.a)),e.pb(22,114688,null,0,Fu.a,[lu.a],{label:[0,"label"],group:[1,"group"]},{onClick:"onClick"}),(l()(),e.qb(23,0,null,null,1,"eg-grid-toolbar-action",[["group","Hold"],["i18-group",""],["label","Cancel Hold"]],null,[[null,"onClick"]],(function(l,n,u){var e=!0;return"onClick"===n&&(e=!1!==l.component.showCancelDialog(u)&&e),e}),Au.b,Au.a)),e.pb(24,114688,null,0,Fu.a,[lu.a],{label:[0,"label"],group:[1,"group"]},{onClick:"onClick"}),(l()(),e.qb(25,0,null,null,1,"eg-grid-toolbar-action",[["group","Hold"],["i18-group",""],["label","Print Holds"]],null,[[null,"onClick"]],(function(l,n,u){var e=!0;return"onClick"===n&&(e=!1!==l.component.printHolds()&&e),e}),Au.b,Au.a)),e.pb(26,114688,null,0,Fu.a,[lu.a],{label:[0,"label"],group:[1,"group"]},{onClick:"onClick"}),(l()(),e.qb(27,0,null,null,1,"eg-grid-column",[["datatype","id"],["label","Hold ID"],["path","id"]],null,null,null,uu.b,uu.a)),e.pb(28,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],index:[2,"index"],datatype:[3,"datatype"]},null),(l()(),e.fb(0,[["barcodeTmpl",2]],null,0,null,ot)),(l()(),e.qb(30,0,null,null,1,"eg-grid-column",[["label","Current Item"],["name","cp_barcode"]],null,null,null,uu.b,uu.a)),e.pb(31,114688,null,0,eu.a,[lu.a],{name:[0,"name"],label:[1,"label"],cellTemplate:[2,"cellTemplate"]},null),(l()(),e.fb(0,[["userBarcodeTmpl",2]],null,0,null,it)),(l()(),e.qb(33,0,null,null,1,"eg-grid-column",[["label","Patron Barcode"],["name","patron_barcode"]],null,null,null,uu.b,uu.a)),e.pb(34,114688,null,0,eu.a,[lu.a],{name:[0,"name"],label:[1,"label"],hidden:[2,"hidden"],cellTemplate:[3,"cellTemplate"]},null),(l()(),e.qb(35,0,null,null,1,"eg-grid-column",[["label","Patron alias"],["path","usr_alias"]],null,null,null,uu.b,uu.a)),e.pb(36,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"]},null),(l()(),e.qb(37,0,null,null,1,"eg-grid-column",[["datatype","timestamp"],["label","Request Date"],["path","request_time"]],null,null,null,uu.b,uu.a)),e.pb(38,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],datatype:[2,"datatype"],datePlusTime:[3,"datePlusTime"]},null),(l()(),e.qb(39,0,null,null,1,"eg-grid-column",[["datatype","timestamp"],["label","Capture Date"],["path","capture_time"]],null,null,null,uu.b,uu.a)),e.pb(40,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],datatype:[2,"datatype"]},null),(l()(),e.qb(41,0,null,null,1,"eg-grid-column",[["datatype","timestamp"],["label","Available Date"],["path","shelf_time"]],null,null,null,uu.b,uu.a)),e.pb(42,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],datatype:[2,"datatype"]},null),(l()(),e.qb(43,0,null,null,1,"eg-grid-column",[["label","Hold Type"],["path","hold_type"]],null,null,null,uu.b,uu.a)),e.pb(44,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"]},null),(l()(),e.qb(45,0,null,null,1,"eg-grid-column",[["label","Pickup Library"],["path","pl_shortname"]],null,null,null,uu.b,uu.a)),e.pb(46,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"]},null),(l()(),e.fb(0,[["titleTmpl",2]],null,0,null,rt)),(l()(),e.qb(48,0,null,null,1,"eg-grid-column",[["label","Title"],["name","title"]],null,null,null,uu.b,uu.a)),e.pb(49,114688,null,0,eu.a,[lu.a],{name:[0,"name"],label:[1,"label"],hidden:[2,"hidden"],cellTemplate:[3,"cellTemplate"]},null),(l()(),e.qb(50,0,null,null,1,"eg-grid-column",[["label","Author"],["path","author"]],null,null,null,uu.b,uu.a)),e.pb(51,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(52,0,null,null,1,"eg-grid-column",[["datatype","int"],["label","Potential Items"],["path","potentials"]],null,null,null,uu.b,uu.a)),e.pb(53,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],datatype:[2,"datatype"]},null),(l()(),e.qb(54,0,null,null,1,"eg-grid-column",[["label","Status"],["path","status_string"]],null,null,null,uu.b,uu.a)),e.pb(55,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"]},null),(l()(),e.qb(56,0,null,null,1,"eg-grid-column",[["datatype","int"],["label","Queue Position"],["path","relative_queue_position"]],null,null,null,uu.b,uu.a)),e.pb(57,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"],datatype:[3,"datatype"]},null),(l()(),e.qb(58,0,null,null,1,"eg-grid-column",[["label","User ID"],["path","usr_id"]],null,null,null,uu.b,uu.a)),e.pb(59,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(60,0,null,null,1,"eg-grid-column",[["label","Username"],["path","usr_usrname"]],null,null,null,uu.b,uu.a)),e.pb(61,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(62,0,null,null,1,"eg-grid-column",[["label","First Name"],["path","usr_first_given_name"]],null,null,null,uu.b,uu.a)),e.pb(63,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(64,0,null,null,1,"eg-grid-column",[["label","Last Name"],["path","usr_family_name"]],null,null,null,uu.b,uu.a)),e.pb(65,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(66,0,null,null,1,"eg-grid-column",[["label","Requestor ID"],["path","rusr_id"]],null,null,null,uu.b,uu.a)),e.pb(67,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(68,0,null,null,1,"eg-grid-column",[["label","Requestor Username"],["path","rusr_usrname"]],null,null,null,uu.b,uu.a)),e.pb(69,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(70,0,null,null,1,"eg-grid-column",[["label","Item Status"],["path","cs_name"]],null,null,null,uu.b,uu.a)),e.pb(71,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(72,0,null,null,1,"eg-grid-column",[["label","CN Prefix"],["path","acnp_label"]],null,null,null,uu.b,uu.a)),e.pb(73,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(74,0,null,null,1,"eg-grid-column",[["label","CN Suffix"],["path","acns_label"]],null,null,null,uu.b,uu.a)),e.pb(75,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(76,0,null,null,1,"eg-grid-column",[["parent-idl-class","mvr"],["path","mvr.*"]],null,null,null,uu.b,uu.a)),e.pb(77,114688,null,0,eu.a,[lu.a],{path:[0,"path"],hidden:[1,"hidden"]},null),(l()(),e.qb(78,0,null,null,1,"eg-grid-column",[["datatype","timestamp"],["label","Fulfillment Date/Time"],["path","fulfillment_time"]],null,null,null,uu.b,uu.a)),e.pb(79,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"],datatype:[3,"datatype"]},null),(l()(),e.qb(80,0,null,null,1,"eg-grid-column",[["datatype","timestamp"],["label","Checkin Time"],["path","checkin_time"]],null,null,null,uu.b,uu.a)),e.pb(81,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"],datatype:[3,"datatype"]},null),(l()(),e.qb(82,0,null,null,1,"eg-grid-column",[["datatype","timestamp"],["label","Return Time"],["path","return_time"]],null,null,null,uu.b,uu.a)),e.pb(83,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"],datatype:[3,"datatype"]},null),(l()(),e.qb(84,0,null,null,1,"eg-grid-column",[["datatype","timestamp"],["label","Last Targeting Date/Time"],["path","prev_check_time"]],null,null,null,uu.b,uu.a)),e.pb(85,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"],datatype:[3,"datatype"]},null),(l()(),e.qb(86,0,null,null,1,"eg-grid-column",[["datatype","timestamp"],["label","Expire Time"],["path","expire_time"]],null,null,null,uu.b,uu.a)),e.pb(87,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"],datatype:[3,"datatype"]},null),(l()(),e.qb(88,0,null,null,1,"eg-grid-column",[["datatype","timestamp"],["label","Hold Cancel Date/Time"],["path","cancel_time"]],null,null,null,uu.b,uu.a)),e.pb(89,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"],datatype:[3,"datatype"]},null),(l()(),e.qb(90,0,null,null,1,"eg-grid-column",[["label","Cancelation note"],["path","cancel_note"]],null,null,null,uu.b,uu.a)),e.pb(91,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(92,0,null,null,1,"eg-grid-column",[["label","Hold Target"],["path","target"]],null,null,null,uu.b,uu.a)),e.pb(93,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(94,0,null,null,1,"eg-grid-column",[["label","Current Item"],["path","current_copy"]],null,null,null,uu.b,uu.a)),e.pb(95,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(96,0,null,null,1,"eg-grid-column",[["label","Fulfilling Staff"],["path","fulfillment_staff"]],null,null,null,uu.b,uu.a)),e.pb(97,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(98,0,null,null,1,"eg-grid-column",[["label","Fulfilling Library"],["path","fulfillment_lib"]],null,null,null,uu.b,uu.a)),e.pb(99,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(100,0,null,null,1,"eg-grid-column",[["label","Requesting Library"],["path","request_lib"]],null,null,null,uu.b,uu.a)),e.pb(101,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(102,0,null,null,1,"eg-grid-column",[["label","Requesting User"],["path","requestor"]],null,null,null,uu.b,uu.a)),e.pb(103,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(104,0,null,null,1,"eg-grid-column",[["label","User"],["path","usr"]],null,null,null,uu.b,uu.a)),e.pb(105,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(106,0,null,null,1,"eg-grid-column",[["label","Selection Library"],["path","selection_ou"]],null,null,null,uu.b,uu.a)),e.pb(107,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(108,0,null,null,1,"eg-grid-column",[["label","Item Selection Depth"],["path","selection_depth"]],null,null,null,uu.b,uu.a)),e.pb(109,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(110,0,null,null,1,"eg-grid-column",[["label","Holdable Formats (for M-type hold)"],["path","holdable_formats"]],null,null,null,uu.b,uu.a)),e.pb(111,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(112,0,null,null,1,"eg-grid-column",[["label","Notifications Phone Number"],["path","phone_notify"]],null,null,null,uu.b,uu.a)),e.pb(113,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(114,0,null,null,1,"eg-grid-column",[["label","Notifications SMS Number"],["path","sms_notify"]],null,null,null,uu.b,uu.a)),e.pb(115,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(116,0,null,null,1,"eg-grid-column",[["datatype","bool"],["label","Notify by Email?"],["path","email_notify"]],null,null,null,uu.b,uu.a)),e.pb(117,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"],datatype:[3,"datatype"]},null),(l()(),e.qb(118,0,null,null,1,"eg-grid-column",[["label","SMS Carrier"],["path","sms_carrier"]],null,null,null,uu.b,uu.a)),e.pb(119,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(120,0,null,null,1,"eg-grid-column",[["datatype","bool"],["label","Currently Frozen"],["path","frozen"]],null,null,null,uu.b,uu.a)),e.pb(121,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"],datatype:[3,"datatype"]},null),(l()(),e.qb(122,0,null,null,1,"eg-grid-column",[["datatype","timestamp"],["label","Activation Date"],["path","thaw_date"]],null,null,null,uu.b,uu.a)),e.pb(123,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"],datatype:[3,"datatype"]},null),(l()(),e.qb(124,0,null,null,1,"eg-grid-column",[["datatype","bool"],["label","Top of Queue"],["path","cut_in_line"]],null,null,null,uu.b,uu.a)),e.pb(125,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"],datatype:[3,"datatype"]},null),(l()(),e.qb(126,0,null,null,1,"eg-grid-column",[["datatype","bool"],["label","Is Mint Condition"],["path","mint_condition"]],null,null,null,uu.b,uu.a)),e.pb(127,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"],datatype:[3,"datatype"]},null),(l()(),e.qb(128,0,null,null,1,"eg-grid-column",[["datatype","timestamp"],["label","Shelf Expire Time"],["path","shelf_expire_time"]],null,null,null,uu.b,uu.a)),e.pb(129,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"],datatype:[3,"datatype"]},null),(l()(),e.qb(130,0,null,null,1,"eg-grid-column",[["label","Current Shelf Library"],["path","current_shelf_lib"]],null,null,null,uu.b,uu.a)),e.pb(131,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(132,0,null,null,1,"eg-grid-column",[["datatype","bool"],["label","Behind Desk"],["path","behind_desk"]],null,null,null,uu.b,uu.a)),e.pb(133,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"],datatype:[3,"datatype"]},null),(l()(),e.qb(134,0,null,null,1,"eg-grid-column",[["label","Status"],["path","hold_status"]],null,null,null,uu.b,uu.a)),e.pb(135,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(136,0,null,null,1,"eg-grid-column",[["datatype","bool"],["label","Clearable"],["path","clear_me"]],null,null,null,uu.b,uu.a)),e.pb(137,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"],datatype:[3,"datatype"]},null),(l()(),e.qb(138,0,null,null,1,"eg-grid-column",[["datatype","bool"],["label","Is Staff-placed Hold"],["path","is_staff_hold"]],null,null,null,uu.b,uu.a)),e.pb(139,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"],datatype:[3,"datatype"]},null),(l()(),e.qb(140,0,null,null,1,"eg-grid-column",[["label","Cancelation Cause ID"],["path","cc_id"]],null,null,null,uu.b,uu.a)),e.pb(141,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(142,0,null,null,1,"eg-grid-column",[["label","Cancelation Cause"],["path","cc_label"]],null,null,null,uu.b,uu.a)),e.pb(143,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(144,0,null,null,1,"eg-grid-column",[["label","Pickup Library"],["path","pl_shortname"]],null,null,null,uu.b,uu.a)),e.pb(145,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"]},null),(l()(),e.qb(146,0,null,null,1,"eg-grid-column",[["label","Pickup Library Name"],["path","pl_name"]],null,null,null,uu.b,uu.a)),e.pb(147,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(148,0,null,null,1,"eg-grid-column",[["label","Pickup Library Email"],["path","pl_email"]],null,null,null,uu.b,uu.a)),e.pb(149,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(150,0,null,null,1,"eg-grid-column",[["label","Pickup Library Phone"],["path","pl_phone"]],null,null,null,uu.b,uu.a)),e.pb(151,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(152,0,null,null,1,"eg-grid-column",[["label","Pickup Library Opac Visible"],["path","pl_opac_visible"]],null,null,null,uu.b,uu.a)),e.pb(153,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(154,0,null,null,1,"eg-grid-column",[["label","Transit ID"],["path","tr_id"]],null,null,null,uu.b,uu.a)),e.pb(155,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(156,0,null,null,1,"eg-grid-column",[["datatype","timestamp"],["label","Transit Send Time"],["path","tr_source_send_time"]],null,null,null,uu.b,uu.a)),e.pb(157,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"],datatype:[3,"datatype"]},null),(l()(),e.qb(158,0,null,null,1,"eg-grid-column",[["datatype","timestamp"],["label","Transit Receive Time"],["path","tr_dest_recv_time"]],null,null,null,uu.b,uu.a)),e.pb(159,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"],datatype:[3,"datatype"]},null),(l()(),e.qb(160,0,null,null,1,"eg-grid-column",[["label","Transit Item"],["path","tr_target_copy"]],null,null,null,uu.b,uu.a)),e.pb(161,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(162,0,null,null,1,"eg-grid-column",[["label","Transit Source"],["path","tr_source"]],null,null,null,uu.b,uu.a)),e.pb(163,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(164,0,null,null,1,"eg-grid-column",[["label","Transit Destination"],["path","tr_dest"]],null,null,null,uu.b,uu.a)),e.pb(165,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(166,0,null,null,1,"eg-grid-column",[["label","Transit Item Status"],["path","tr_copy_status"]],null,null,null,uu.b,uu.a)),e.pb(167,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(168,0,null,null,1,"eg-grid-column",[["label","Transit Hold"],["path","tr_hold"]],null,null,null,uu.b,uu.a)),e.pb(169,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(170,0,null,null,1,"eg-grid-column",[["datatype","timestamp"],["label","Transit Cancel Time"],["path","tr_cancel_time"]],null,null,null,uu.b,uu.a)),e.pb(171,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"],datatype:[3,"datatype"]},null),(l()(),e.qb(172,0,null,null,1,"eg-grid-column",[["label","Hold Note Count"],["path","note_count"]],null,null,null,uu.b,uu.a)),e.pb(173,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(174,0,null,null,1,"eg-grid-column",[["label","User Display Name"],["path","usr_display_name"]],null,null,null,uu.b,uu.a)),e.pb(175,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(176,0,null,null,1,"eg-grid-column",[["label","Requestor Username"],["path","rusr_usrname"]],null,null,null,uu.b,uu.a)),e.pb(177,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(178,0,null,null,1,"eg-grid-column",[["label","Item ID"],["path","cp_id"]],null,null,null,uu.b,uu.a)),e.pb(179,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(180,0,null,null,1,"eg-grid-column",[["label","Item Number on Call Number"],["path","cp_copy_number"]],null,null,null,uu.b,uu.a)),e.pb(181,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(182,0,null,null,1,"eg-grid-column",[["label","Fine Level"],["path","cp_fine_level"]],null,null,null,uu.b,uu.a)),e.pb(183,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(184,0,null,null,1,"eg-grid-column",[["datatype","bool"],["label","Can Circulate"],["path","cp_circulate"]],null,null,null,uu.b,uu.a)),e.pb(185,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"],datatype:[3,"datatype"]},null),(l()(),e.qb(186,0,null,null,1,"eg-grid-column",[["datatype","bool"],["label","Deposit Amount"],["path","cp_deposit_amount"]],null,null,null,uu.b,uu.a)),e.pb(187,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"],datatype:[3,"datatype"]},null),(l()(),e.qb(188,0,null,null,1,"eg-grid-column",[["datatype","bool"],["label","Is Deposit Required"],["path","cp_deposit"]],null,null,null,uu.b,uu.a)),e.pb(189,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"],datatype:[3,"datatype"]},null),(l()(),e.qb(190,0,null,null,1,"eg-grid-column",[["datatype","bool"],["label","Is Reference"],["path","cp_ref"]],null,null,null,uu.b,uu.a)),e.pb(191,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"],datatype:[3,"datatype"]},null),(l()(),e.qb(192,0,null,null,1,"eg-grid-column",[["datatype","bool"],["label","Is Holdable"],["path","cp_holdable"]],null,null,null,uu.b,uu.a)),e.pb(193,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"],datatype:[3,"datatype"]},null),(l()(),e.qb(194,0,null,null,1,"eg-grid-column",[["label","Price"],["path","cp_price"]],null,null,null,uu.b,uu.a)),e.pb(195,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(196,0,null,null,1,"eg-grid-column",[["label","Item Barcode"],["path","cp_barcode"]],null,null,null,uu.b,uu.a)),e.pb(197,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(198,0,null,null,1,"eg-grid-column",[["label","Circulation Modifier"],["path","cp_circ_modifier"]],null,null,null,uu.b,uu.a)),e.pb(199,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(200,0,null,null,1,"eg-grid-column",[["label","Circulate as MARC Type"],["path","cp_circ_as_type"]],null,null,null,uu.b,uu.a)),e.pb(201,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(202,0,null,null,1,"eg-grid-column",[["label","Precat Dummy Title"],["path","cp_dummy_title"]],null,null,null,uu.b,uu.a)),e.pb(203,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(204,0,null,null,1,"eg-grid-column",[["label","Precat Dummy Author"],["path","cp_dummy_author"]],null,null,null,uu.b,uu.a)),e.pb(205,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(206,0,null,null,1,"eg-grid-column",[["label","Item Alert Message (deprecated)"],["path","cp_alert_message"]],null,null,null,uu.b,uu.a)),e.pb(207,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(208,0,null,null,1,"eg-grid-column",[["datatype","bool"],["label","Item OPAC Visible"],["path","cp_opac_visible"]],null,null,null,uu.b,uu.a)),e.pb(209,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"],datatype:[3,"datatype"]},null),(l()(),e.qb(210,0,null,null,1,"eg-grid-column",[["datatype","bool"],["label","Item Deleted"],["path","cp_deleted"]],null,null,null,uu.b,uu.a)),e.pb(211,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"],datatype:[3,"datatype"]},null),(l()(),e.qb(212,0,null,null,1,"eg-grid-column",[["label","Floating Group"],["path","cp_floating"]],null,null,null,uu.b,uu.a)),e.pb(213,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(214,0,null,null,1,"eg-grid-column",[["label","Precat Dummy ISBN"],["path","cp_dummy_isbn"]],null,null,null,uu.b,uu.a)),e.pb(215,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(216,0,null,null,1,"eg-grid-column",[["datatype","timestamp"],["label","Item Status Change Time"],["path","cp_status_change_time"]],null,null,null,uu.b,uu.a)),e.pb(217,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"],datatype:[3,"datatype"]},null),(l()(),e.qb(218,0,null,null,1,"eg-grid-column",[["datatype","timestamp"],["label","Item Active Date"],["path","cp_active_date"]],null,null,null,uu.b,uu.a)),e.pb(219,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"],datatype:[3,"datatype"]},null),(l()(),e.qb(220,0,null,null,1,"eg-grid-column",[["datatype","bool"],["label","Item Is Mint Condition"],["path","cp_mint_condition"]],null,null,null,uu.b,uu.a)),e.pb(221,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"],datatype:[3,"datatype"]},null),(l()(),e.qb(222,0,null,null,1,"eg-grid-column",[["label","Cost"],["path","cp_cost"]],null,null,null,uu.b,uu.a)),e.pb(223,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(224,0,null,null,1,"eg-grid-column",[["datatype","bool"],["label","Status Is Holdable"],["path","cs_holdable"]],null,null,null,uu.b,uu.a)),e.pb(225,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"],datatype:[3,"datatype"]},null),(l()(),e.qb(226,0,null,null,1,"eg-grid-column",[["datatype","bool"],["label","Status Is OPAC Visible"],["path","cs_opac_visible"]],null,null,null,uu.b,uu.a)),e.pb(227,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"],datatype:[3,"datatype"]},null),(l()(),e.qb(228,0,null,null,1,"eg-grid-column",[["datatype","bool"],["label","Status Is Item-Active"],["path","cs_copy_active"]],null,null,null,uu.b,uu.a)),e.pb(229,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"],datatype:[3,"datatype"]},null),(l()(),e.qb(230,0,null,null,1,"eg-grid-column",[["datatype","bool"],["label","Status Is Deleted"],["path","cs_restrict_copy_delete"]],null,null,null,uu.b,uu.a)),e.pb(231,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"],datatype:[3,"datatype"]},null),(l()(),e.qb(232,0,null,null,1,"eg-grid-column",[["datatype","bool"],["label","Status Is Available"],["path","cs_is_available"]],null,null,null,uu.b,uu.a)),e.pb(233,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"],datatype:[3,"datatype"]},null),(l()(),e.qb(234,0,null,null,1,"eg-grid-column",[["label","Issuance i18n-label label"],["path","issuance_label"]],null,null,null,uu.b,uu.a)),e.pb(235,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(236,0,null,null,1,"eg-grid-column",[["label","Call Number ID"],["path","cn_id"]],null,null,null,uu.b,uu.a)),e.pb(237,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(238,0,null,null,1,"eg-grid-column",[["label","CN i18n-label label"],["path","cn_label"]],null,null,null,uu.b,uu.a)),e.pb(239,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(240,0,null,null,1,"eg-grid-column",[["label","CN i18n-label label Class"],["path","cn_label_class"]],null,null,null,uu.b,uu.a)),e.pb(241,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(242,0,null,null,1,"eg-grid-column",[["label","CN Sort Key"],["path","cn_label_sortkey"]],null,null,null,uu.b,uu.a)),e.pb(243,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(244,0,null,null,1,"eg-grid-column",[["label","Part ID"],["path","p_id"]],null,null,null,uu.b,uu.a)),e.pb(245,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(246,0,null,null,1,"eg-grid-column",[["label","Part i18n-label label"],["path","p_label"]],null,null,null,uu.b,uu.a)),e.pb(247,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(248,0,null,null,1,"eg-grid-column",[["label","Part Sort Key"],["path","p_label_sortkey"]],null,null,null,uu.b,uu.a)),e.pb(249,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(250,0,null,null,1,"eg-grid-column",[["datatype","bool"],["label","Part Is Deleted"],["path","p_deleted"]],null,null,null,uu.b,uu.a)),e.pb(251,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"],datatype:[3,"datatype"]},null),(l()(),e.qb(252,0,null,null,1,"eg-grid-column",[["label","CN Full i18n-label label"],["path","cn_full_label"]],null,null,null,uu.b,uu.a)),e.pb(253,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(254,0,null,null,1,"eg-grid-column",[["label","Record ID"],["path","record_id"]],null,null,null,uu.b,uu.a)),e.pb(255,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(256,0,null,null,1,"eg-grid-column",[["label","Item Location ID"],["path","acpl_id"]],null,null,null,uu.b,uu.a)),e.pb(257,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(258,0,null,null,1,"eg-grid-column",[["label","Item Location"],["path","acpl_name"]],null,null,null,uu.b,uu.a)),e.pb(259,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(260,0,null,null,1,"eg-grid-column",[["datatype","bool"],["label","Item Location Holdable"],["path","acpl_holdable"]],null,null,null,uu.b,uu.a)),e.pb(261,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"],datatype:[3,"datatype"]},null),(l()(),e.qb(262,0,null,null,1,"eg-grid-column",[["datatype","bool"],["label","Item Location Hold-Verify"],["path","acpl_hold_verify"]],null,null,null,uu.b,uu.a)),e.pb(263,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"],datatype:[3,"datatype"]},null),(l()(),e.qb(264,0,null,null,1,"eg-grid-column",[["datatype","bool"],["label","Item Location OPAC Visible"],["path","acpl_opac_visible"]],null,null,null,uu.b,uu.a)),e.pb(265,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"],datatype:[3,"datatype"]},null),(l()(),e.qb(266,0,null,null,1,"eg-grid-column",[["datatype","bool"],["label","Item Location Can Circulate"],["path","acpl_circulate"]],null,null,null,uu.b,uu.a)),e.pb(267,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"],datatype:[3,"datatype"]},null),(l()(),e.qb(268,0,null,null,1,"eg-grid-column",[["label","Item Location Prefix"],["path","acpl_label_prefix"]],null,null,null,uu.b,uu.a)),e.pb(269,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(270,0,null,null,1,"eg-grid-column",[["label","Item Location Suffix"],["path","acpl_label_suffix"]],null,null,null,uu.b,uu.a)),e.pb(271,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(272,0,null,null,1,"eg-grid-column",[["datatype","bool"],["label","Item Location Checkin Alert"],["path","acpl_checkin_alert"]],null,null,null,uu.b,uu.a)),e.pb(273,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"],datatype:[3,"datatype"]},null),(l()(),e.qb(274,0,null,null,1,"eg-grid-column",[["datatype","bool"],["label","Item Location Is Deleted"],["path","acpl_deleted"]],null,null,null,uu.b,uu.a)),e.pb(275,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"],datatype:[3,"datatype"]},null),(l()(),e.qb(276,0,null,null,1,"eg-grid-column",[["label","Item Location URL"],["path","acpl_url"]],null,null,null,uu.b,uu.a)),e.pb(277,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(278,0,null,null,1,"eg-grid-column",[["label","Item Location Order"],["path","copy_location_order_position"]],null,null,null,uu.b,uu.a)),e.pb(279,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(280,0,null,null,1,"eg-grid-column",[["label","Default Estimated Wait Time"],["path","default_estimated_wait"]],null,null,null,uu.b,uu.a)),e.pb(281,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(282,0,null,null,1,"eg-grid-column",[["label","Minimum Estimated Wait Time"],["path","min_estimated_wait"]],null,null,null,uu.b,uu.a)),e.pb(283,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(284,0,null,null,1,"eg-grid-column",[["label","Peer Hold Count"],["path","other_holds"]],null,null,null,uu.b,uu.a)),e.pb(285,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(286,0,null,null,1,"eg-grid-column",[["label","Total Wait Time"],["path","total_wait_time"]],null,null,null,uu.b,uu.a)),e.pb(287,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(288,0,null,null,1,"eg-grid-column",[["label","Notify Count"],["path","notification_count"]],null,null,null,uu.b,uu.a)),e.pb(289,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(290,0,null,null,1,"eg-grid-column",[["datatype","timestamp"],["label","Last Notify Time"],["path","last_notification_time"]],null,null,null,uu.b,uu.a)),e.pb(291,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"],datatype:[3,"datatype"]},null)],(function(l,n){var u=n.component;l(n,2,0,!u.hidePickupLibFilter),l(n,4,0,u.gridDataSource,!0,!0,u.enablePreFetch,u.persistKey,u.cellTextGenerator),l(n,6,0,"Pre-Fetch All Holds",u.enablePreFetch),l(n,8,0,"Show Hold Details","Hold"),l(n,10,0,"Modify Hold(s)","Hold"),l(n,12,0,"Show Last Few Circulations","Item"),l(n,14,0,"Retrieve Patron","Patron"),l(n,16,0,"Transfer To Marked Title","Hold"),l(n,18,0,"Mark Item Damaged","Item"),l(n,20,0,"Mark Item Missing","Item"),l(n,22,0,"Find Another Target","Hold"),l(n,24,0,"Cancel Hold","Hold"),l(n,26,0,"Print Holds","Hold"),l(n,28,0,"id","Hold ID",!0,"id"),l(n,31,0,"cp_barcode","Current Item",e.Cb(n,29)),l(n,34,0,"patron_barcode","Patron Barcode",!0,e.Cb(n,32)),l(n,36,0,"usr_alias","Patron alias"),l(n,38,0,"request_time","Request Date","timestamp",!0),l(n,40,0,"capture_time","Capture Date","timestamp"),l(n,42,0,"shelf_time","Available Date","timestamp"),l(n,44,0,"hold_type","Hold Type"),l(n,46,0,"pl_shortname","Pickup Library"),l(n,49,0,"title","Title",!0,e.Cb(n,47)),l(n,51,0,"author","Author",!0),l(n,53,0,"potentials","Potential Items","int"),l(n,55,0,"status_string","Status"),l(n,57,0,"relative_queue_position","Queue Position",!0,"int"),l(n,59,0,"usr_id","User ID",!0),l(n,61,0,"usr_usrname","Username",!0),l(n,63,0,"usr_first_given_name","First Name",!0),l(n,65,0,"usr_family_name","Last Name",!0),l(n,67,0,"rusr_id","Requestor ID",!0),l(n,69,0,"rusr_usrname","Requestor Username",!0),l(n,71,0,"cs_name","Item Status",!0),l(n,73,0,"acnp_label","CN Prefix",!0),l(n,75,0,"acns_label","CN Suffix",!0),l(n,77,0,"mvr.*",!0),l(n,79,0,"fulfillment_time","Fulfillment Date/Time",!0,"timestamp"),l(n,81,0,"checkin_time","Checkin Time",!0,"timestamp"),l(n,83,0,"return_time","Return Time",!0,"timestamp"),l(n,85,0,"prev_check_time","Last Targeting Date/Time",!0,"timestamp"),l(n,87,0,"expire_time","Expire Time",!0,"timestamp"),l(n,89,0,"cancel_time","Hold Cancel Date/Time",!0,"timestamp"),l(n,91,0,"cancel_note","Cancelation note",!0),l(n,93,0,"target","Hold Target",!0),l(n,95,0,"current_copy","Current Item",!0),l(n,97,0,"fulfillment_staff","Fulfilling Staff",!0),l(n,99,0,"fulfillment_lib","Fulfilling Library",!0),l(n,101,0,"request_lib","Requesting Library",!0),l(n,103,0,"requestor","Requesting User",!0),l(n,105,0,"usr","User",!0),l(n,107,0,"selection_ou","Selection Library",!0),l(n,109,0,"selection_depth","Item Selection Depth",!0),l(n,111,0,"holdable_formats","Holdable Formats (for M-type hold)",!0),l(n,113,0,"phone_notify","Notifications Phone Number",!0),l(n,115,0,"sms_notify","Notifications SMS Number",!0),l(n,117,0,"email_notify","Notify by Email?",!0,"bool"),l(n,119,0,"sms_carrier","SMS Carrier",!0),l(n,121,0,"frozen","Currently Frozen",!0,"bool"),l(n,123,0,"thaw_date","Activation Date",!0,"timestamp"),l(n,125,0,"cut_in_line","Top of Queue",!0,"bool"),l(n,127,0,"mint_condition","Is Mint Condition",!0,"bool"),l(n,129,0,"shelf_expire_time","Shelf Expire Time",!0,"timestamp"),l(n,131,0,"current_shelf_lib","Current Shelf Library",!0),l(n,133,0,"behind_desk","Behind Desk",!0,"bool"),l(n,135,0,"hold_status","Status",!0),l(n,137,0,"clear_me","Clearable",!0,"bool"),l(n,139,0,"is_staff_hold","Is Staff-placed Hold",!0,"bool"),l(n,141,0,"cc_id","Cancelation Cause ID",!0),l(n,143,0,"cc_label","Cancelation Cause",!0),l(n,145,0,"pl_shortname","Pickup Library"),l(n,147,0,"pl_name","Pickup Library Name",!0),l(n,149,0,"pl_email","Pickup Library Email",!0),l(n,151,0,"pl_phone","Pickup Library Phone",!0),l(n,153,0,"pl_opac_visible","Pickup Library Opac Visible",!0),l(n,155,0,"tr_id","Transit ID",!0),l(n,157,0,"tr_source_send_time","Transit Send Time",!0,"timestamp"),l(n,159,0,"tr_dest_recv_time","Transit Receive Time",!0,"timestamp"),l(n,161,0,"tr_target_copy","Transit Item",!0),l(n,163,0,"tr_source","Transit Source",!0),l(n,165,0,"tr_dest","Transit Destination",!0),l(n,167,0,"tr_copy_status","Transit Item Status",!0),l(n,169,0,"tr_hold","Transit Hold",!0),l(n,171,0,"tr_cancel_time","Transit Cancel Time",!0,"timestamp"),l(n,173,0,"note_count","Hold Note Count",!0),l(n,175,0,"usr_display_name","User Display Name",!0),l(n,177,0,"rusr_usrname","Requestor Username",!0),l(n,179,0,"cp_id","Item ID",!0),l(n,181,0,"cp_copy_number","Item Number on Call Number",!0),l(n,183,0,"cp_fine_level","Fine Level",!0),l(n,185,0,"cp_circulate","Can Circulate",!0,"bool"),l(n,187,0,"cp_deposit_amount","Deposit Amount",!0,"bool"),l(n,189,0,"cp_deposit","Is Deposit Required",!0,"bool"),l(n,191,0,"cp_ref","Is Reference",!0,"bool"),l(n,193,0,"cp_holdable","Is Holdable",!0,"bool"),l(n,195,0,"cp_price","Price",!0),l(n,197,0,"cp_barcode","Item Barcode",!0),l(n,199,0,"cp_circ_modifier","Circulation Modifier",!0),l(n,201,0,"cp_circ_as_type","Circulate as MARC Type",!0),l(n,203,0,"cp_dummy_title","Precat Dummy Title",!0),l(n,205,0,"cp_dummy_author","Precat Dummy Author",!0),l(n,207,0,"cp_alert_message","Item Alert Message (deprecated)",!0),l(n,209,0,"cp_opac_visible","Item OPAC Visible",!0,"bool"),l(n,211,0,"cp_deleted","Item Deleted",!0,"bool"),l(n,213,0,"cp_floating","Floating Group",!0),l(n,215,0,"cp_dummy_isbn","Precat Dummy ISBN",!0),l(n,217,0,"cp_status_change_time","Item Status Change Time",!0,"timestamp"),l(n,219,0,"cp_active_date","Item Active Date",!0,"timestamp"),l(n,221,0,"cp_mint_condition","Item Is Mint Condition",!0,"bool"),l(n,223,0,"cp_cost","Cost",!0),l(n,225,0,"cs_holdable","Status Is Holdable",!0,"bool"),l(n,227,0,"cs_opac_visible","Status Is OPAC Visible",!0,"bool"),l(n,229,0,"cs_copy_active","Status Is Item-Active",!0,"bool"),l(n,231,0,"cs_restrict_copy_delete","Status Is Deleted",!0,"bool"),l(n,233,0,"cs_is_available","Status Is Available",!0,"bool"),l(n,235,0,"issuance_label","Issuance i18n-label label",!0),l(n,237,0,"cn_id","Call Number ID",!0),l(n,239,0,"cn_label","CN i18n-label label",!0),l(n,241,0,"cn_label_class","CN i18n-label label Class",!0),l(n,243,0,"cn_label_sortkey","CN Sort Key",!0),l(n,245,0,"p_id","Part ID",!0),l(n,247,0,"p_label","Part i18n-label label",!0),l(n,249,0,"p_label_sortkey","Part Sort Key",!0),l(n,251,0,"p_deleted","Part Is Deleted",!0,"bool"),l(n,253,0,"cn_full_label","CN Full i18n-label label",!0),l(n,255,0,"record_id","Record ID",!0),l(n,257,0,"acpl_id","Item Location ID",!0),l(n,259,0,"acpl_name","Item Location",!0),l(n,261,0,"acpl_holdable","Item Location Holdable",!0,"bool"),l(n,263,0,"acpl_hold_verify","Item Location Hold-Verify",!0,"bool"),l(n,265,0,"acpl_opac_visible","Item Location OPAC Visible",!0,"bool"),l(n,267,0,"acpl_circulate","Item Location Can Circulate",!0,"bool"),l(n,269,0,"acpl_label_prefix","Item Location Prefix",!0),l(n,271,0,"acpl_label_suffix","Item Location Suffix",!0),l(n,273,0,"acpl_checkin_alert","Item Location Checkin Alert",!0,"bool"),l(n,275,0,"acpl_deleted","Item Location Is Deleted",!0,"bool"),l(n,277,0,"acpl_url","Item Location URL",!0),l(n,279,0,"copy_location_order_position","Item Location Order",!0),l(n,281,0,"default_estimated_wait","Default Estimated Wait Time",!0),l(n,283,0,"min_estimated_wait","Minimum Estimated Wait Time",!0),l(n,285,0,"other_holds","Peer Hold Count",!0),l(n,287,0,"total_wait_time","Total Wait Time",!0),l(n,289,0,"notification_count","Notify Count",!0),l(n,291,0,"last_notification_time","Last Notify Time",!0,"timestamp")}),null)}function ct(l){return e.Mb(0,[e.Ib(671088640,1,{holdsGrid:0}),e.Ib(402653184,2,{progressDialog:0}),e.Ib(402653184,3,{transferDialog:0}),e.Ib(402653184,4,{markDamagedDialog:0}),e.Ib(402653184,5,{markMissingDialog:0}),e.Ib(402653184,6,{retargetDialog:0}),e.Ib(402653184,7,{cancelDialog:0}),e.Ib(402653184,8,{manageDialog:0}),(l()(),e.qb(8,0,null,null,1,"eg-progress-dialog",[],null,null,null,Ou.b,Ou.a)),e.pb(9,114688,[[2,4],["progressDialog",4]],0,Eu.a,[b.E],null,null),(l()(),e.qb(10,0,null,null,1,"eg-hold-transfer-dialog",[],null,null,null,zu,Uu)),e.pb(11,114688,[[3,4],["transferDialog",4]],0,Lu,[b.E,W.a,g.a,Q.b,Z.a,h.a],null,null),(l()(),e.qb(12,0,null,null,1,"eg-mark-damaged-dialog",[],null,null,null,ae,Xu)),e.pb(13,114688,[[4,4],["markDamagedDialog",4]],0,Yu,[b.E,W.a,Q.b,Z.a,Pn.a,m.a,Yl.a,h.a],null,null),(l()(),e.qb(14,0,null,null,1,"eg-mark-missing-dialog",[],null,null,null,de,ie)),e.pb(15,114688,[[5,4],["markMissingDialog",4]],0,oe,[b.E,W.a,Q.b,Z.a,h.a],null,null),(l()(),e.qb(16,0,null,null,1,"eg-hold-retarget-dialog",[],null,null,null,ve,he)),e.pb(17,114688,[[6,4],["retargetDialog",4]],0,pe,[b.E,W.a,Q.b,Z.a,h.a],null,null),(l()(),e.qb(18,0,null,null,1,"eg-hold-cancel-dialog",[],null,null,null,xe,qe)),e.pb(19,114688,[[7,4],["cancelDialog",4]],0,ye,[b.E,W.a,Q.b,Z.a,Pn.a,h.a],null,null),(l()(),e.qb(20,0,null,null,1,"eg-hold-manage-dialog",[],null,null,null,Xe,Je)),e.pb(21,114688,[[8,4],["manageDialog",4]],0,We,[b.E],null,null),(l()(),e.qb(22,0,null,null,4,"div",[["class","eg-holds w-100 mt-3"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,tt)),e.pb(24,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,st)),e.pb(26,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component;l(n,9,0),l(n,11,0),l(n,13,0),l(n,15,0),l(n,17,0),l(n,19,0),l(n,21,0),l(n,24,0,"detail"==u.mode),l(n,26,0,"list"==u.mode&&u.initComplete())}),null)}class bt extends w.a{constructor(l,n,u){super(u),this.idl=l,this.pcrud=n,this.modal=u}mergeParts(){if(console.log("Merging parts into lead part ",this.leadPart),!this.leadPart)return;this.leadPart=Number(this.leadPart);const l=this.parts.filter(l=>Number(l.id())!==this.leadPart).map(l=>Number(l.id())),n=[];this.pcrud.search("acpm",{part:l}).subscribe(l=>{l.part(this.leadPart),l.ischanged(!0),n.push(l)},l=>{},()=>{n.length>0?this.pcrud.autoApply(n).toPromise().then(()=>this.deleteParts()):this.deleteParts()})}deleteParts(){const l=this.parts.filter(l=>Number(l.id())!==this.leadPart);l.forEach(l=>l.isdeleted(!0)),this.pcrud.autoApply(l).toPromise().then(l=>this.close(l))}}var dt=e.ob({encapsulation:2,styles:[],data:{}});function pt(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,11,"div",[["class","row"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,10,"div",[["class","col-lg-10 offset-lg-1"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,9,"div",[["class","form-check"]],null,null,null,null,null)),(l()(),e.qb(3,0,null,null,6,"input",[["class","form-check-input"],["name","lead"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(l,n,u){var t=!0,a=l.component;return"input"===n&&(t=!1!==e.Cb(l,4)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,4).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Cb(l,4)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Cb(l,4)._compositionEnd(u.target.value)&&t),"change"===n&&(t=!1!==e.Cb(l,5).onChange()&&t),"blur"===n&&(t=!1!==e.Cb(l,5).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(a.leadPart=u)&&t),t}),null,null)),e.pb(4,16384,null,0,s.d,[e.C,e.k,[2,s.a]],null,null),e.pb(5,212992,null,0,s.w,[e.C,e.k,s.D,e.q],{name:[0,"name"],value:[1,"value"]},null),e.Hb(1024,null,s.o,(function(l,n){return[l,n]}),[s.d,s.w]),e.pb(7,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(9,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(10,0,null,null,1,"label",[["class","form-check-label"]],null,null,null,null,null)),(l()(),e.Kb(11,null,["",""]))],(function(l,n){var u=n.component,t=e.ub(1,"",n.context.$implicit.id(),"");l(n,5,0,"lead",t),l(n,7,0,"lead",u.leadPart)}),(function(l,n){l(n,3,0,e.Cb(n,9).ngClassUntouched,e.Cb(n,9).ngClassTouched,e.Cb(n,9).ngClassPristine,e.Cb(n,9).ngClassDirty,e.Cb(n,9).ngClassValid,e.Cb(n,9).ngClassInvalid,e.Cb(n,9).ngClassPending);var u=n.context.$implicit.label();l(n,11,0,u)}))}function ht(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,5,"div",[["class","modal-header bg-info"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"h4",[["class","modal-title"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Merge Monograph Parts"])),(l()(),e.qb(3,0,null,null,2,"button",[["aria-label","Close"],["class","close"],["type","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.close()&&e),e}),null,null)),(l()(),e.qb(4,0,null,null,1,"span",[["aria-hidden","true"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Ã—"])),(l()(),e.qb(6,0,null,null,4,"div",[["class","modal-body"]],null,null,null,null,null)),(l()(),e.qb(7,0,null,null,1,"h5",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Select a Lead Part"])),(l()(),e.fb(16777216,null,null,1,null,pt)),e.pb(10,278528,null,0,c.o,[e.N,e.K,e.r],{ngForOf:[0,"ngForOf"]},null),(l()(),e.qb(11,0,null,null,4,"div",[["class","modal-footer"]],null,null,null,null,null)),(l()(),e.qb(12,0,null,null,1,"button",[["class","btn btn-success"],["type","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.mergeParts()&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Merge"])),(l()(),e.qb(14,0,null,null,1,"button",[["class","btn btn-warning"],["type","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.close()&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Cancel"]))],(function(l,n){l(n,10,0,n.component.parts)}),null)}function gt(l){return e.Mb(0,[e.Ib(671088640,1,{dialogContent:0}),(l()(),e.fb(0,[[1,2],["dialogContent",2]],null,0,null,ht))],null,null)}var mt=u("Id+k"),ft=u("eXX1"),Ct=u("7Apk"),vt=u("UUQ6");class yt{constructor(l,n,u,e){this.idl=l,this.org=n,this.pcrud=u,this.perm=e,this.permissions={},this.gridDataSource=new ou.c}set recordId(l){this.recId=l,this.initDone&&this.partsGrid.reload()}get recordId(){return this.recId}ngOnInit(){this.initDone=!0,this.perm.hasWorkPermHere(["CREATE_MONOGRAPH_PART","UPDATE_MONOGRAPH_PART","DELETE_MONOGRAPH_PART"]).then(l=>this.permissions=l),this.gridDataSource.getRows=(l,n)=>{const u={};return u.bmp=n.length?n[0].name+" "+n[0].dir:"label",this.pcrud.search("bmp",{record:this.recId,deleted:"f"},{offset:l.offset,limit:l.limit,order_by:u})},this.partsGrid.onRowActivate.subscribe(l=>{this.editDialog.mode="update",this.editDialog.recordId=l.id(),this.editDialog.open().subscribe(l=>this.partsGrid.reload())}),this.createNew=()=>{const l=this.idl.create("bmp");l.record(this.recordId),this.editDialog.record=l,this.editDialog.mode="create",this.editDialog.open().subscribe(l=>this.partsGrid.reload())},this.deleteSelected=l=>{l.forEach(l=>l.isdeleted(!0)),this.pcrud.autoApply(l).subscribe(l=>console.debug("deleted: "+l),l=>{},()=>this.partsGrid.reload())},this.mergeSelected=l=>{l.length<2||(this.mergeDialog.parts=l,this.mergeDialog.open().subscribe(l=>this.partsGrid.reload()))}}}var qt=e.ob({encapsulation:2,styles:[],data:{}});function kt(l){return e.Mb(0,[e.Ib(402653184,1,{partsGrid:0}),e.Ib(402653184,2,{editDialog:0}),e.Ib(402653184,3,{mergeDialog:0}),(l()(),e.qb(3,0,null,null,1,"eg-catalog-part-merge-dialog",[],null,null,null,gt,dt)),e.pb(4,114688,[[3,4],["mergeDialog",4]],0,bt,[J.a,Pn.a,b.E],null,null),(l()(),e.qb(5,0,null,null,10,"div",[["class","mt-3"]],null,null,null,null,null)),(l()(),e.qb(6,0,null,null,7,"eg-grid",[["class","mt-3"],["idlClass","bmp"],["persistKey","catalog.record.parts"],["showFields","id,label"]],null,null,null,Xn.b,Xn.a)),e.pb(7,4440064,[[1,4],["partsGrid",4]],0,lu.a,[J.a,m.a,_.a,nu.a],{dataSource:[0,"dataSource"],idlClass:[1,"idlClass"],sortable:[2,"sortable"],persistKey:[3,"persistKey"],showFields:[4,"showFields"]},null),(l()(),e.qb(8,0,null,null,1,"eg-grid-toolbar-button",[["label","New Monograph Part"]],null,null,null,mt.b,mt.a)),e.pb(9,114688,null,0,ft.a,[lu.a],{label:[0,"label"],action:[1,"action"],disabled:[2,"disabled"]},null),(l()(),e.qb(10,0,null,null,1,"eg-grid-toolbar-action",[["label","Merge Selected"]],null,null,null,Au.b,Au.a)),e.pb(11,114688,null,0,Fu.a,[lu.a],{label:[0,"label"],action:[1,"action"]},null),(l()(),e.qb(12,0,null,null,1,"eg-grid-toolbar-action",[["label","Delete Selected"]],null,null,null,Au.b,Au.a)),e.pb(13,114688,null,0,Fu.a,[lu.a],{label:[0,"label"],action:[1,"action"]},null),(l()(),e.qb(14,0,null,null,1,"eg-fm-record-editor",[["hiddenFields","record,label_sortkey,deleted"],["idlClass","bmp"]],null,null,null,Ct.b,Ct.a)),e.pb(15,114688,[[2,4],["editDialog",4]],0,vt.a,[b.E,J.a,h.a,W.a,nu.a,Pn.a],{idlClass:[0,"idlClass"],hiddenFields:[1,"hiddenFields"]},null)],(function(l,n){var u=n.component;l(n,4,0),l(n,7,0,u.gridDataSource,"bmp",!0,"catalog.record.parts","id,label"),l(n,9,0,"New Monograph Part",u.createNew,!u.permissions.CREATE_MONOGRAPH_PART),l(n,11,0,"Merge Selected",u.mergeSelected),l(n,13,0,"Delete Selected",u.deleteSelected),l(n,15,0,"bmp","record,label_sortkey,deleted")}),null)}var It=u("5UYh"),_t=u("LZHW");class wt extends w.a{constructor(l,n,u,e,t,a,o){super(l),this.modal=l,this.toast=n,this.net=u,this.idl=e,this.pcrud=t,this.org=a,this.auth=o,this.copyIds=[],this.copies=[]}set copyIds(l){this._copyIds=[].concat(l)}get copyIds(){return this._copyIds}set mode(l){this._mode=l}get mode(){return this._mode}ngOnInit(){}open(l){return this.copy=null,this.copies=[],this.newAlert=this.idl.create("aca"),this.newAlert.create_staff(this.auth.user().id()),0===this.copyIds.length?Object(Bu.a)("copy ID required"):("manage"===this.mode&&this.copyIds.length>1&&(console.warn("Attempt to manage alerts for multiple copies."),this.copyIds=[this.copyIds[0]]),Object(Qu.a)(this.getAlertTypes().then(l=>this.getCopies()).then(l=>"manage"===this.mode?this.getCopyAlerts():null)).pipe(Object(Zu.a)(n=>super.open(l))))}getAlertTypes(){return this.alertTypes?Promise.resolve():this.pcrud.retrieveAll("ccat",{active:!0,scope_org:this.org.ancestors(this.auth.user().ws_ou(),!0)},{atomic:!0}).toPromise().then(l=>{this.alertTypes=l.map(l=>({id:l.id(),label:l.name()}))})}getCopies(){return this.pcrud.search("acp",{id:this.copyIds},{},{atomic:!0}).toPromise().then(l=>{this.copies=l,l.forEach(l=>l.copy_alerts([])),"manage"===this.mode&&(this.copy=l[0])})}getCopyAlerts(){const l=this.copies.map(l=>l.id()),n=this.alertTypes.map(l=>l.id);return this.pcrud.search("aca",{copy:l,ack_time:null,alert_type:n},{},{atomic:!0}).toPromise().then(l=>{l.forEach(l=>{this.copies.filter(n=>n.id()===l.copy())[0].copy_alerts().push(l)})})}addNew(){if(!this.newAlert.alert_type())return;const l=[];this.copies.forEach(n=>{const u=this.idl.clone(this.newAlert);u.copy(n.id()),l.push(u)}),this.pcrud.create(l).toPromise().then(l=>{this.successMsg.current().then(l=>this.toast.success(l)),this.changesMade=!0,"create"===this.mode?this.close(this.changesMade):this.copy.copy_alerts().push(l)},l=>{this.errorMsg.current().then(l=>this.toast.danger(l))})}applyChanges(){const l=this.copy.copy_alerts().filter(l=>l.ischanged());0!==l.length&&this.pcrud.update(l).toPromise().then(l=>this.successMsg.current().then(l=>this.toast.success(l)),l=>this.errorMsg.current().then(l=>this.toast.danger(l)))}}var xt=e.ob({encapsulation:2,styles:[],data:{}});function Mt(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Kb(2,null,["Adding alerts for "," item(s)."]))],null,(function(l,n){l(n,2,0,n.component.copies.length)}))}function St(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Kb(2,null,["Managing alerts for item ",""]))],null,(function(l,n){l(n,2,0,n.component.copies[0].barcode())}))}function Tt(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,37,"div",[["class","row mt-2"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"div",[["class","col-lg-12 pb-2"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,0,"hr",[],null,null,null,null,null)),(l()(),e.qb(3,0,null,null,6,"div",[["class","col-lg-4"]],null,null,null,null,null)),(l()(),e.qb(4,0,null,null,2,"eg-combobox",[["placeholder","Alert Type..."]],null,[[null,"onChange"]],(function(l,n,u){var e=!0;return"onChange"===n&&(l.context.$implicit.alert_type(u?u.id:null),e=!1!==l.context.$implicit.ischanged(!0)&&e),e}),Wu.b,Wu.a)),e.Hb(5120,null,s.o,(function(l){return[l]}),[Ju.a]),e.pb(6,114688,null,0,Ju.a,[e.k,g.a,J.a,Pn.a],{placeholder:[0,"placeholder"],required:[1,"required"],startId:[2,"startId"],entries:[3,"entries"]},{onChange:"onChange"}),(l()(),e.qb(7,0,null,null,2,"div",[["class","pl-2 pt-2"]],null,null,null,null,null)),(l()(),e.Kb(8,null,[" Added: "," "])),e.Gb(9,2),(l()(),e.qb(10,0,null,null,7,"div",[["class","col-lg-5"]],null,null,null,null,null)),(l()(),e.qb(11,0,null,null,6,"textarea",[["class","form-control"],["placeholder","Alert Note..."],["rows","2"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,u){var t=!0;return"input"===n&&(t=!1!==e.Cb(l,12)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,12).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Cb(l,12)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Cb(l,12)._compositionEnd(u.target.value)&&t),"ngModelChange"===n&&(l.context.$implicit.note(u),t=!1!==l.context.$implicit.ischanged(!0)&&t),t}),null,null)),e.pb(12,16384,null,0,s.d,[e.C,e.k,[2,s.a]],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.d]),e.pb(14,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(16,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.Kb(-1,null,["          "])),(l()(),e.qb(18,0,null,null,19,"div",[["class","col-lg-3"]],null,null,null,null,null)),(l()(),e.qb(19,0,null,null,18,"div",[["class","d-flex flex-column"]],null,null,null,null,null)),(l()(),e.qb(20,0,null,null,8,"div",[["class","form-check"]],null,null,null,null,null)),(l()(),e.qb(21,0,null,null,5,"input",[["class","form-check-input"],["type","checkbox"]],[[8,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0;return"change"===n&&(t=!1!==e.Cb(l,22).onChange(u.target.checked)&&t),"blur"===n&&(t=!1!==e.Cb(l,22).onTouched()&&t),"ngModelChange"===n&&(l.context.$implicit.temp(u?"t":"f"),t=!1!==l.context.$implicit.ischanged(!0)&&t),t}),null,null)),e.pb(22,16384,null,0,s.b,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.b]),e.pb(24,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(26,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(27,0,null,null,1,"label",[["class","form-check-label"]],[[8,"htmlFor",0]],null,null,null,null)),(l()(),e.Kb(-1,null,[" Temporary? "])),(l()(),e.qb(29,0,null,null,8,"div",[["class","form-check pt-2"]],null,null,null,null,null)),(l()(),e.qb(30,0,null,null,5,"input",[["class","form-check-input"],["type","checkbox"]],[[8,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0;return"change"===n&&(t=!1!==e.Cb(l,31).onChange(u.target.checked)&&t),"blur"===n&&(t=!1!==e.Cb(l,31).onTouched()&&t),"ngModelChange"===n&&(l.context.$implicit.ack_time(u?"now":null),t=!1!==l.context.$implicit.ischanged(!0)&&t),t}),null,null)),e.pb(31,16384,null,0,s.b,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.b]),e.pb(33,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(35,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(36,0,null,null,1,"label",[["class","form-check-label"]],[[8,"htmlFor",0]],null,null,null,null)),(l()(),e.Kb(-1,null,[" Clear? "]))],(function(l,n){var u=n.component,e=n.context.$implicit.alert_type();l(n,6,0,"Alert Type...",!0,e,u.alertTypes);var t=n.context.$implicit.note();l(n,14,0,t);var a="t"==n.context.$implicit.temp();l(n,24,0,a);var o=null!=n.context.$implicit.ack_time();l(n,33,0,o)}),(function(l,n){var u=e.Lb(n,8,0,l(n,9,0,e.Cb(n.parent.parent.parent,0),n.context.$implicit.create_time(),"shortDate"));l(n,8,0,u),l(n,11,0,e.Cb(n,16).ngClassUntouched,e.Cb(n,16).ngClassTouched,e.Cb(n,16).ngClassPristine,e.Cb(n,16).ngClassDirty,e.Cb(n,16).ngClassValid,e.Cb(n,16).ngClassInvalid,e.Cb(n,16).ngClassPending);var t=e.ub(1,"alert-temporary-",n.context.$implicit.id(),"");l(n,21,0,t,e.Cb(n,26).ngClassUntouched,e.Cb(n,26).ngClassTouched,e.Cb(n,26).ngClassPristine,e.Cb(n,26).ngClassDirty,e.Cb(n,26).ngClassValid,e.Cb(n,26).ngClassInvalid,e.Cb(n,26).ngClassPending);var a=e.ub(1,"alert-temporary-",n.context.$implicit.id(),"");l(n,27,0,a);var o=e.ub(1,"alert-temporary-",n.context.$implicit.id(),"");l(n,30,0,o,e.Cb(n,35).ngClassUntouched,e.Cb(n,35).ngClassTouched,e.Cb(n,35).ngClassPristine,e.Cb(n,35).ngClassDirty,e.Cb(n,35).ngClassValid,e.Cb(n,35).ngClassInvalid,e.Cb(n,35).ngClassPending);var i=e.ub(1,"alert-temporary-",n.context.$implicit.id(),"");l(n,36,0,i)}))}function Kt(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,Tt)),e.pb(2,278528,null,0,c.o,[e.N,e.K,e.r],{ngForOf:[0,"ngForOf"]},null),(l()(),e.fb(0,null,null,0))],(function(l,n){l(n,2,0,n.component.copy.copy_alerts())}),null)}function Dt(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"button",[["class","btn btn-success mr-2"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.applyChanges()&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Apply Changes"]))],null,null)}function Nt(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,9,"div",[["class","modal-header"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,5,"h4",[["class","modal-title"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,Mt)),e.pb(3,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,St)),e.pb(5,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(6,0,null,null,0,"span",[],null,null,null,null,null)),(l()(),e.qb(7,0,null,null,2,"button",[["aria-label","Close"],["class","close"],["type","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.close()&&e),e}),null,null)),(l()(),e.qb(8,0,null,null,1,"span",[["aria-hidden","true"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Ã—"])),(l()(),e.qb(10,0,null,null,29,"div",[["class","modal-body p-4 form-validated"]],null,null,null,null,null)),(l()(),e.qb(11,0,null,null,26,"div",[["class","row mt-2 p-2 rounded border border-success"]],null,null,null,null,null)),(l()(),e.qb(12,0,null,null,3,"div",[["class","col-lg-4"]],null,null,null,null,null)),(l()(),e.qb(13,0,null,null,2,"eg-combobox",[["placeholder","New Alert Type..."]],null,[[null,"onChange"]],(function(l,n,u){var e=!0;return"onChange"===n&&(e=!1!==l.component.newAlert.alert_type(u?u.id:null)&&e),e}),Wu.b,Wu.a)),e.Hb(5120,null,s.o,(function(l){return[l]}),[Ju.a]),e.pb(15,114688,null,0,Ju.a,[e.k,g.a,J.a,Pn.a],{placeholder:[0,"placeholder"],required:[1,"required"],entries:[2,"entries"]},{onChange:"onChange"}),(l()(),e.qb(16,0,null,null,7,"div",[["class","col-lg-5"]],null,null,null,null,null)),(l()(),e.qb(17,0,null,null,6,"textarea",[["class","form-control"],["placeholder","New Alert Note..."],["rows","2"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,u){var t=!0,a=l.component;return"input"===n&&(t=!1!==e.Cb(l,18)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,18).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Cb(l,18)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Cb(l,18)._compositionEnd(u.target.value)&&t),"ngModelChange"===n&&(t=!1!==a.newAlert.note(u)&&t),t}),null,null)),e.pb(18,16384,null,0,s.d,[e.C,e.k,[2,s.a]],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.d]),e.pb(20,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(22,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.Kb(-1,null,["        "])),(l()(),e.qb(24,0,null,null,13,"div",[["class","col-lg-3"]],null,null,null,null,null)),(l()(),e.qb(25,0,null,null,12,"div",[["class","d-flex flex-column"]],null,null,null,null,null)),(l()(),e.qb(26,0,null,null,8,"div",[["class","form-check"]],null,null,null,null,null)),(l()(),e.qb(27,0,null,null,5,"input",[["class","form-check-input"],["id","new-alert-temporary"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0,a=l.component;return"change"===n&&(t=!1!==e.Cb(l,28).onChange(u.target.checked)&&t),"blur"===n&&(t=!1!==e.Cb(l,28).onTouched()&&t),"ngModelChange"===n&&(t=!1!==a.newAlert.temp(u?"t":"f")&&t),t}),null,null)),e.pb(28,16384,null,0,s.b,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.b]),e.pb(30,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(32,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(33,0,null,null,1,"label",[["class","form-check-label"],["for","new-alert-temporary"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,[" Temporary? "])),(l()(),e.qb(35,0,null,null,2,"div",[["class","pt-2"]],null,null,null,null,null)),(l()(),e.qb(36,0,null,null,1,"button",[["class","btn btn-success"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.addNew()&&e),e}),null,null)),(l()(),e.Kb(-1,null,[" Add New "])),(l()(),e.fb(16777216,null,null,1,null,Kt)),e.pb(39,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(40,0,null,null,4,"div",[["class","modal-footer"]],null,null,null,null,null)),(l()(),e.qb(41,0,null,null,1,"button",[["class","btn btn-secondary"],["type","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.close()&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Close"])),(l()(),e.fb(16777216,null,null,1,null,Dt)),e.pb(44,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component;l(n,3,0,"create"==u.mode),l(n,5,0,"manage"==u.mode),l(n,15,0,"New Alert Type...",!0,u.alertTypes),l(n,20,0,u.newAlert.note()),l(n,30,0,"t"==u.newAlert.temp()),l(n,39,0,"manage"==u.mode),l(n,44,0,"manage"==u.mode)}),(function(l,n){l(n,17,0,e.Cb(n,22).ngClassUntouched,e.Cb(n,22).ngClassTouched,e.Cb(n,22).ngClassPristine,e.Cb(n,22).ngClassDirty,e.Cb(n,22).ngClassValid,e.Cb(n,22).ngClassInvalid,e.Cb(n,22).ngClassPending),l(n,27,0,e.Cb(n,32).ngClassUntouched,e.Cb(n,32).ngClassTouched,e.Cb(n,32).ngClassPristine,e.Cb(n,32).ngClassDirty,e.Cb(n,32).ngClassValid,e.Cb(n,32).ngClassInvalid,e.Cb(n,32).ngClassPending)}))}function Pt(l){return e.Mb(0,[e.Eb(0,c.f,[e.t]),e.Ib(671088640,1,{dialogContent:0}),e.Ib(402653184,2,{successMsg:0}),e.Ib(402653184,3,{errorMsg:0}),(l()(),e.qb(4,0,null,null,1,"eg-string",[["text","Successfully Modified Item Alerts"]],null,null,null,q.b,q.a)),e.pb(5,114688,[[2,4],["successMsg",4]],0,k.a,[e.k,I.a],{text:[0,"text"]},null),(l()(),e.qb(6,0,null,null,1,"eg-string",[["text","Failed To Modify Item Alerts"]],null,null,null,q.b,q.a)),e.pb(7,114688,[[3,4],["errorMsg",4]],0,k.a,[e.k,I.a],{text:[0,"text"]},null),(l()(),e.fb(0,[[1,2],["dialogContent",2]],null,0,null,Nt))],(function(l,n){l(n,5,0,"Successfully Modified Item Alerts"),l(n,7,0,"Failed To Modify Item Alerts")}),null)}var Ht=u("vkgz");class At extends w.a{constructor(l,n,u,e){super(l),this.modal=l,this.toast=n,this.pcrud=u,this.renderer=e}ngOnInit(){}open(l){return this.ids=[].concat(this.copyIds),this.numSucceeded=0,this.numFailed=0,this.getNextCopy().pipe(Object(Zu.a)(()=>super.open(l)),Object(Ht.a)(()=>this.renderer.selectRootElement("#new-barcode-input").focus()))}getNextCopy(){0===this.ids.length&&this.close(this.numSucceeded>0),this.newBarcode="";const l=this.ids.pop();return this.pcrud.retrieve("acp",l).pipe(Object(au.a)(l=>this.copy=l))}replaceOneBarcode(){return Object(Ru.a)(this,void 0,void 0,(function*(){return this.barcodeExists=!1,this.pcrud.search("acp",{deleted:"f",barcode:this.newBarcode}).toPromise().then(l=>Object(Ru.a)(this,void 0,void 0,(function*(){l?this.barcodeExists=!0:(this.copy.barcode(this.newBarcode),this.pcrud.update(this.copy).toPromise().then(l=>Object(Ru.a)(this,void 0,void 0,(function*(){return this.numSucceeded++,this.toast.success(yield this.successMsg.current()),this.getNextCopy().toPromise()})),l=>Object(Ru.a)(this,void 0,void 0,(function*(){this.numFailed++,console.error("Replace barcode failed: ",l),this.toast.warning(yield this.errorMsg.current())}))))})))}))}}var Ft=e.ob({encapsulation:2,styles:[],data:{}});function Ot(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,5,"div",[["class","row d-flex pt-2 justify-content-center"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,4,"div",[["class","alert alert-danger"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,[" Barcode "])),(l()(),e.qb(3,0,null,null,1,"span",[["class","font-weight-bold"]],null,null,null,null,null)),(l()(),e.Kb(4,null,["",""])),(l()(),e.Kb(-1,null,[" is already in use. "]))],null,(function(l,n){l(n,4,0,n.component.newBarcode)}))}function Et(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,6,"div",[["class","modal-header bg-info"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,2,"h4",[["class","modal-title"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Replace Item Barcode"])),(l()(),e.qb(4,0,null,null,2,"button",[["aria-label","Close"],["class","close"],["type","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.close()&&e),e}),null,null)),(l()(),e.qb(5,0,null,null,1,"span",[["aria-hidden","true"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Ã—"])),(l()(),e.qb(7,0,null,null,20,"div",[["class","modal-body"]],null,null,null,null,null)),(l()(),e.qb(8,0,null,null,4,"div",[["class","row"]],null,null,null,null,null)),(l()(),e.qb(9,0,null,null,1,"div",[["class","col-lg-4"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Replacing barcode"])),(l()(),e.qb(11,0,null,null,1,"div",[["class","col-lg-8 font-weight-bold"]],null,null,null,null,null)),(l()(),e.Kb(12,null,["",""])),(l()(),e.qb(13,0,null,null,12,"div",[["class","row pt-2 form-validated"]],null,null,null,null,null)),(l()(),e.qb(14,0,null,null,2,"div",[["class","col-lg-4"]],null,null,null,null,null)),(l()(),e.qb(15,0,null,null,1,"label",[["for","new-barcode-intput"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["New Barcode:"])),(l()(),e.qb(17,0,null,null,8,"div",[["class","col-log-8"]],null,null,null,null,null)),(l()(),e.qb(18,0,null,null,7,"input",[["class","form-control"],["id","new-barcode-input"],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keyup"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,u){var t=!0,a=l.component;return"input"===n&&(t=!1!==e.Cb(l,19)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,19).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Cb(l,19)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Cb(l,19)._compositionEnd(u.target.value)&&t),"ngModelChange"===n&&(t=!1!==(a.newBarcode=u)&&t),"keyup"===n&&(t=0!=(a.barcodeExists=!1)&&t),t}),null,null)),e.pb(19,16384,null,0,s.d,[e.C,e.k,[2,s.a]],null,null),e.pb(20,16384,null,0,s.y,[],{required:[0,"required"]},null),e.Hb(1024,null,s.n,(function(l){return[l]}),[s.y]),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.d]),e.pb(23,671744,null,0,s.t,[[8,null],[6,s.n],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(25,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.fb(16777216,null,null,1,null,Ot)),e.pb(27,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(28,0,null,null,5,"div",[["class","modal-footer"]],null,null,null,null,null)),(l()(),e.qb(29,0,null,null,4,null,null,null,null,null,null,null)),(l()(),e.qb(30,0,null,null,1,"button",[["class","btn btn-warning"],["type","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.close()&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Cancel"])),(l()(),e.qb(32,0,null,null,1,"button",[["class","btn btn-success"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.replaceOneBarcode()&&e),e}),null,null)),(l()(),e.Kb(-1,null,[" Replace Barcode "]))],(function(l,n){var u=n.component;l(n,20,0,!0),l(n,23,0,u.newBarcode),l(n,27,0,u.barcodeExists)}),(function(l,n){var u=n.component;l(n,12,0,u.copy.barcode()),l(n,18,0,e.Cb(n,20).required?"":null,e.Cb(n,25).ngClassUntouched,e.Cb(n,25).ngClassTouched,e.Cb(n,25).ngClassPristine,e.Cb(n,25).ngClassDirty,e.Cb(n,25).ngClassValid,e.Cb(n,25).ngClassInvalid,e.Cb(n,25).ngClassPending),l(n,32,0,!u.newBarcode)}))}function Rt(l){return e.Mb(0,[e.Ib(671088640,1,{dialogContent:0}),e.Ib(402653184,2,{successMsg:0}),e.Ib(402653184,3,{errorMsg:0}),(l()(),e.qb(3,0,null,null,1,"eg-string",[["text","Successfully Replaced Barcode"]],null,null,null,q.b,q.a)),e.pb(4,114688,[[2,4],["successMsg",4]],0,k.a,[e.k,I.a],{text:[0,"text"]},null),(l()(),e.qb(5,0,null,null,1,"eg-string",[["text","Failed To Replace Barcode"]],null,null,null,q.b,q.a)),e.pb(6,114688,[[3,4],["errorMsg",4]],0,k.a,[e.k,I.a],{text:[0,"text"]},null),(l()(),e.fb(0,[[1,2],["dialogContent",2]],null,0,null,Et))],(function(l,n){l(n,4,0,"Successfully Replaced Barcode"),l(n,6,0,"Failed To Replace Barcode")}),null)}class Bt extends w.a{constructor(l,n,u,e,t,a,o){super(l),this.modal=l,this.toast=n,this.net=u,this.pcrud=e,this.evt=t,this.renderer=a,this.auth=o}ngOnInit(){}open(l){return this.numCallNums=0,this.numCopies=0,this.numSucceeded=0,this.numFailed=0,this.callNums.forEach(l=>{l.isdeleted()&&this.numCallNums++,Array.isArray(l.copies())&&l.copies().forEach(l=>{(l.isdeleted()||this.forceDeleteCopies)&&(l.isdeleted(!0),this.numCopies++)})}),0===this.numCallNums&&0===this.numCopies?(console.debug("Holdings delete called with no usable data"),Object(Bu.a)(!1)):super.open(l)}deleteHoldings(l){this.deleteEventDesc="";const n={force_delete_copies:this.forceDeleteCopies};let u="open-ils.cat.asset.volume.fleshed.batch.update";l&&(u+=".override",n.events=["TITLE_LAST_COPY","COPY_DELETE_WARNING"]),this.net.request("open-ils.cat",u,this.auth.token(),this.callNums,1,n).toPromise().then(n=>{const u=this.evt.parse(n);u?this.handleDeleteEvent(u,l):(this.numSucceeded++,this.close(this.numSucceeded>0))},l=>{console.warn(l),this.errorMsg.current().then(l=>this.toast.warning(l)),this.numFailed++})}handleDeleteEvent(l,n){return n?(console.warn(l),this.numFailed++,this.errorMsg.current().then(l=>this.toast.warning(l))):(this.deleteEventDesc=l.desc,this.confirmOverride.open().toPromise().then(l=>{if(l)return this.deleteHoldings(!0);this.numFailed++,this.errorMsg.current().then(l=>this.toast.warning(l)),this.close(this.numSucceeded>0)}))}}var Lt=e.ob({encapsulation:2,styles:[],data:{}});function Ut(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,6,"div",[["class","modal-header bg-info"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,2,"h4",[["class","modal-title"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Delete Holdings"])),(l()(),e.qb(4,0,null,null,2,"button",[["aria-label","Close"],["class","close"],["type","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.close()&&e),e}),null,null)),(l()(),e.qb(5,0,null,null,1,"span",[["aria-hidden","true"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Ã—"])),(l()(),e.qb(7,0,null,null,2,"div",[["class","modal-body"]],null,null,null,null,null)),(l()(),e.qb(8,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),e.Kb(9,null,["Delete "," call numbers and "," copies?"])),(l()(),e.qb(10,0,null,null,5,"div",[["class","modal-footer"]],null,null,null,null,null)),(l()(),e.qb(11,0,null,null,4,null,null,null,null,null,null,null)),(l()(),e.qb(12,0,null,null,1,"button",[["class","btn btn-warning"],["type","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.close()&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Cancel"])),(l()(),e.qb(14,0,null,null,1,"button",[["class","btn btn-success"],["type","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.deleteHoldings()&&e),e}),null,null)),(l()(),e.Kb(-1,null,[" Delete Holdings "]))],null,(function(l,n){var u=n.component;l(n,9,0,u.numCallNums,u.numCopies)}))}function jt(l){return e.Mb(0,[e.Ib(671088640,1,{dialogContent:0}),e.Ib(402653184,2,{successMsg:0}),e.Ib(402653184,3,{errorMsg:0}),e.Ib(671088640,4,{confirmOverride:0}),(l()(),e.qb(4,0,null,null,1,"eg-string",[["text","Successfully Holdings"]],null,null,null,q.b,q.a)),e.pb(5,114688,[[2,4],["successMsg",4]],0,k.a,[e.k,I.a],{text:[0,"text"]},null),(l()(),e.qb(6,0,null,null,1,"eg-string",[["text","Failed To Delete Holdings"]],null,null,null,q.b,q.a)),e.pb(7,114688,[[3,4],["errorMsg",4]],0,k.a,[e.k,I.a],{text:[0,"text"]},null),(l()(),e.qb(8,0,null,null,1,"eg-confirm-dialog",[["dialogTitle","One or more items could not be deleted. Override?"]],null,null,null,v.b,v.a)),e.pb(9,114688,[[4,4],["confirmOverride",4]],0,y.a,[b.E],{dialogTitle:[0,"dialogTitle"],dialogBody:[1,"dialogBody"]},null),(l()(),e.fb(0,[[1,2],["dialogContent",2]],null,0,null,Ut))],(function(l,n){var u=n.component;l(n,5,0,"Successfully Holdings"),l(n,7,0,"Failed To Delete Holdings"),l(n,9,0,"One or more items could not be deleted. Override?",e.ub(1,"Reason(s) include: ",u.deleteEventDesc,""))}),null)}class $t extends w.a{constructor(l,n,u,e,t){super(l),this.modal=l,this.toast=n,this.idl=u,this.pcrud=e,this.localStore=t,this.peerTypes=[],this.copyIds=[]}ngOnInit(){this.onOpenSub=this.onOpen$.subscribe(()=>{this.modifyAll&&(this.copyIds=[]),this.numSucceeded=0,this.numFailed=0,this.peerRecord||(this.peerRecord=this.localStore.getLocalItem("eg.cat.marked_conjoined_record"),this.peerRecord||this.close(!1)),0===this.peerTypes.length&&this.getPeerTypes(),this.fetchExistingMaps()})}ngOnDestroy(){this.onOpenSub.unsubscribe()}fetchExistingMaps(){this.existingMaps={};const l={peer_record:this.peerRecord};this.modifyAll||(l.target_copy=this.copyIds),this.pcrud.search("bpbcm",l).subscribe(l=>{this.existingMaps[l.target_copy()]=l,this.modifyAll&&this.copyIds.push(l.target_copy())})}getPeerTypes(){return this.pcrud.retrieveAll("bpt",{},{atomic:!0}).toPromise().then(l=>this.peerTypes=l.map(l=>({id:l.id(),label:l.name()})))}peerTypeChanged(l){this.peerType=l?l.id:null}linkCopies(){const l=[];return this.copyIds.forEach(n=>{let u;this.existingMaps[n]?(u=this.existingMaps[n],u.ischanged(!0)):(u=this.idl.create("bpbcm"),u.isnew(!0)),u.peer_record(this.peerRecord),u.target_copy(n),u.peer_type(this.peerType),l.push(u)}),this.pcrud.autoApply(l).subscribe(l=>this.numSucceeded++,l=>{this.numFailed++,console.error(l),this.errorMsg.current().then(l=>this.toast.warning(l))},()=>{this.successMsg.current().then(l=>this.toast.success(l)),this.close(this.numSucceeded>0)})}}var Vt=e.ob({encapsulation:2,styles:[],data:{}});function Gt(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,6,"div",[["class","modal-header bg-info"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,2,"h4",[["class","modal-title"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Kb(3,null,["Attach/Modify "," Conjoined Item(s)"])),(l()(),e.qb(4,0,null,null,2,"button",[["aria-label","Close"],["class","close"],["type","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.close()&&e),e}),null,null)),(l()(),e.qb(5,0,null,null,1,"span",[["aria-hidden","true"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Ã—"])),(l()(),e.qb(7,0,null,null,8,"div",[["class","modal-body"]],null,null,null,null,null)),(l()(),e.qb(8,0,null,null,7,"div",[["class","row form-validated"]],null,null,null,null,null)),(l()(),e.qb(9,0,null,null,2,"div",[["class","col-lg-4"]],null,null,null,null,null)),(l()(),e.qb(10,0,null,null,1,"label",[["for","cbox-peer-types"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Peer Type:"])),(l()(),e.qb(12,0,null,null,3,"div",[["class","col-lg-8"]],null,null,null,null,null)),(l()(),e.qb(13,0,null,null,2,"eg-combobox",[["id","cbox-peer-types"],["placeholder","Peer Type..."]],null,[[null,"onChange"]],(function(l,n,u){var e=!0;return"onChange"===n&&(e=!1!==l.component.peerTypeChanged(u)&&e),e}),Wu.b,Wu.a)),e.Hb(5120,null,s.o,(function(l){return[l]}),[Ju.a]),e.pb(15,114688,null,0,Ju.a,[e.k,g.a,J.a,Pn.a],{placeholder:[0,"placeholder"],required:[1,"required"],entries:[2,"entries"]},{onChange:"onChange"}),(l()(),e.qb(16,0,null,null,5,"div",[["class","modal-footer"]],null,null,null,null,null)),(l()(),e.qb(17,0,null,null,4,null,null,null,null,null,null,null)),(l()(),e.qb(18,0,null,null,1,"button",[["class","btn btn-warning"],["type","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.close()&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Cancel"])),(l()(),e.qb(20,0,null,null,1,"button",[["class","btn btn-success"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.linkCopies()&&e),e}),null,null)),(l()(),e.Kb(-1,null,[" Attach/Modify "]))],(function(l,n){l(n,15,0,"Peer Type...",!0,n.component.peerTypes)}),(function(l,n){var u=n.component;l(n,3,0,u.copyIds.length),l(n,20,0,!u.peerType)}))}function zt(l){return e.Mb(0,[e.Ib(671088640,1,{dialogContent:0}),e.Ib(402653184,2,{successMsg:0}),e.Ib(402653184,3,{errorMsg:0}),(l()(),e.qb(3,0,null,null,1,"eg-string",[["text","Successfully Attached/Modified Conjoined Item(s)"]],null,null,null,q.b,q.a)),e.pb(4,114688,[[2,4],["successMsg",4]],0,k.a,[e.k,I.a],{text:[0,"text"]},null),(l()(),e.qb(5,0,null,null,1,"eg-string",[["text","Failed To Attach/Modify Conjoined Item(s)"]],null,null,null,q.b,q.a)),e.pb(6,114688,[[3,4],["errorMsg",4]],0,k.a,[e.k,I.a],{text:[0,"text"]},null),(l()(),e.fb(0,[[1,2],["dialogContent",2]],null,0,null,Gt))],(function(l,n){l(n,4,0,"Successfully Attached/Modified Conjoined Item(s)"),l(n,6,0,"Failed To Attach/Modify Conjoined Item(s)")}),null)}class Wt extends w.a{constructor(l,n,u,e,t,a){super(l),this.modal=l,this.toast=n,this.net=u,this.pcrud=e,this.evt=t,this.auth=a}ngOnInit(){this.onOpenSub=this.onOpen$.subscribe(()=>Object(Ru.a)(this,void 0,void 0,(function*(){this.numSucceeded=0,this.numFailed=0,this.updateComplete=!1})))}ngOnDestroy(){this.onOpenSub.unsubscribe()}manageUrlParams(){if(this.newResourceOrg)return{gridFilters:JSON.stringify({type:this.newResourceType}),contextOrg:this.newResourceOrg}}makeBookable(){this.newResourceType=null,this.net.request("open-ils.booking","open-ils.booking.resources.create_from_copies",this.auth.token(),this.copyIds).toPromise().then(l=>{const n=this.evt.parse(l);if(n)return Promise.reject(n);this.numSucceeded=l.brsrc.length,this.newResourceType=l.brt[0][0],this.updateComplete=!0,this.successMsg.current().then(l=>this.toast.success(l))},l=>Promise.reject(l)).then(l=>{this.pcrud.retrieve("acp",this.copyIds[0],{flesh:1,flesh_fields:{acp:["call_number"]}}).toPromise().then(l=>{this.newResourceOrg=l.call_number().owning_lib(),this.updateComplete=!0})},l=>{console.error(l),this.numFailed++,this.errorMsg.current().then(l=>this.toast.danger(l)),this.updateComplete=!0})}}var Jt=e.ob({encapsulation:2,styles:[],data:{}});function Qt(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,3,"div",[["class","row"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,2,"div",[["class","col-lg-12"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Kb(3,null,["Make "," Item(s) Bookable?"]))],null,(function(l,n){l(n,3,0,n.component.copyIds.length)}))}function Zt(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,7,"div",[["class","row"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,6,"div",[["class","col-lg-12 d-flex flex-column"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),e.Kb(3,null,[""," Item(s) Made Bookable."])),(l()(),e.qb(4,0,null,null,3,"div",[["class","mt-2"]],null,null,null,null,null)),(l()(),e.qb(5,0,null,null,2,"a",[["routerLink","/staff/admin/booking/resource"],["target","_blank"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Cb(l,6).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.pb(6,671744,null,0,C.n,[C.l,C.a,c.m],{target:[0,"target"],queryParams:[1,"queryParams"],routerLink:[2,"routerLink"]},null),(l()(),e.Kb(-1,null,[" Manage Bookable Resources "]))],(function(l,n){l(n,6,0,"_blank",n.component.manageUrlParams(),"/staff/admin/booking/resource")}),(function(l,n){l(n,3,0,n.component.numSucceeded),l(n,5,0,e.Cb(n,6).target,e.Cb(n,6).href)}))}function Yt(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"button",[["class","btn btn-success"],["type","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.makeBookable()&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Make Bookable"]))],null,null)}function Xt(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"button",[["class","btn btn-success"],["type","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0,t=l.component;return"click"===n&&(e=!1!==t.close(t.numSucceeded>0)&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Done"]))],null,null)}function la(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,6,"div",[["class","modal-header bg-info"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,2,"h4",[["class","modal-title"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Make Items Bookable"])),(l()(),e.qb(4,0,null,null,2,"button",[["aria-label","Close"],["class","close"],["type","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.close()&&e),e}),null,null)),(l()(),e.qb(5,0,null,null,1,"span",[["aria-hidden","true"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Ã—"])),(l()(),e.qb(7,0,null,null,4,"div",[["class","modal-body"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,Qt)),e.pb(9,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,Zt)),e.pb(11,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(12,0,null,null,7,"div",[["class","modal-footer"]],null,null,null,null,null)),(l()(),e.qb(13,0,null,null,6,null,null,null,null,null,null,null)),(l()(),e.qb(14,0,null,null,1,"button",[["class","btn btn-warning"],["type","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.close()&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Cancel"])),(l()(),e.fb(16777216,null,null,1,null,Yt)),e.pb(17,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,Xt)),e.pb(19,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component;l(n,9,0,!u.updateComplete),l(n,11,0,u.updateComplete),l(n,17,0,!u.updateComplete),l(n,19,0,u.updateComplete)}),null)}function na(l){return e.Mb(0,[e.Ib(671088640,1,{dialogContent:0}),e.Ib(402653184,2,{successMsg:0}),e.Ib(402653184,3,{errorMsg:0}),(l()(),e.qb(3,0,null,null,1,"eg-string",[["text","Successfully Made Item(s) Bookable"]],null,null,null,q.b,q.a)),e.pb(4,114688,[[2,4],["successMsg",4]],0,k.a,[e.k,I.a],{text:[0,"text"]},null),(l()(),e.qb(5,0,null,null,1,"eg-string",[["text","Failed To Make Item(s) Bookable"]],null,null,null,q.b,q.a)),e.pb(6,114688,[[3,4],["errorMsg",4]],0,k.a,[e.k,I.a],{text:[0,"text"]},null),(l()(),e.fb(0,[[1,2],["dialogContent",2]],null,0,null,la))],(function(l,n){l(n,4,0,"Successfully Made Item(s) Bookable"),l(n,6,0,"Failed To Make Item(s) Bookable")}),null)}var ua=u("taEJ"),ea=u("/xpB");class ta{constructor(l,n,u,e,t){this.toast=l,this.idl=n,this.net=u,this.auth=e,this.evt=t}ngOnInit(){}transferItems(l,n,u){this.eventDesc="";let e="open-ils.cat.transfer_copies_to_volume";return u&&(e+=".override"),this.net.request("open-ils.cat",e,this.auth.token(),n,l).toPromise().then(e=>{const t=this.evt.parse(e);return t?u?(this.toast.warning(this.errorMsg.text),!1):(this.eventDesc=t.desc,this.confirmDialog.open().toPromise().then(u=>!!u&&this.transferItems(l,n,!0))):(this.toast.success(this.successMsg.text),!0)})}autoTransferItems(l,n,u){this.eventDesc="";const e={},t={};return l.forEach(l=>{const a=l.call_number();a.owning_lib()===u&&a.record()===n||(a.owning_lib(u),a.record(n),e[a.id()]?t[a.id()].push(l.id()):(e[a.id()]=a,t[a.id()]=[l.id()]))}),this.transferCallNumbers(e,t)}transferCallNumbers(l,n){const u=Object.keys(l)[0],e=l[u];return delete l[u],this.net.request("open-ils.cat","open-ils.cat.call_number.find_or_create",this.auth.token(),e.label(),e.record(),e.owning_lib(),"object"==typeof e.prefix()?e.prefix().id():e.prefix(),"object"==typeof e.suffix()?e.suffix().id():e.suffix(),e.label_class()).toPromise().then(u=>{const t=this.evt.parse(u);return t?(this.toast.warning(this.errorMsg.text),this.eventDesc=t.desc,this.alertDialog.open().toPromise().then(l=>!1)):this.transferItems(n[e.id()],u.acn_id).then(u=>u&&Object.keys(l).length>0?this.transferCallNumbers(l,n):u)})}}var aa=e.ob({encapsulation:2,styles:[],data:{}});function oa(l){return e.Mb(0,[e.Ib(671088640,1,{successMsg:0}),e.Ib(671088640,2,{errorMsg:0}),e.Ib(671088640,3,{noTargetMsg:0}),e.Ib(671088640,4,{confirmDialog:0}),e.Ib(671088640,5,{alertDialog:0}),(l()(),e.qb(5,0,null,null,1,"eg-string",[["text","Successfully Transferred Item(s)"]],null,null,null,q.b,q.a)),e.pb(6,114688,[[1,4],["successMsg",4]],0,k.a,[e.k,I.a],{text:[0,"text"]},null),(l()(),e.qb(7,0,null,null,1,"eg-string",[["text","Failed To Transfer Item(s)"]],null,null,null,q.b,q.a)),e.pb(8,114688,[[2,4],["errorMsg",4]],0,k.a,[e.k,I.a],{text:[0,"text"]},null),(l()(),e.qb(9,0,null,null,1,"eg-string",[["text","No transfer target selected"]],null,null,null,q.b,q.a)),e.pb(10,114688,[[3,4],["noTargetMsg",4]],0,k.a,[e.k,I.a],{text:[0,"text"]},null),(l()(),e.qb(11,0,null,null,1,"eg-confirm-dialog",[["dialogTitle","One or more items could not be transferred. Override?"]],null,null,null,v.b,v.a)),e.pb(12,114688,[[4,4],["confirmDialog",4]],0,y.a,[b.E],{dialogTitle:[0,"dialogTitle"],dialogBody:[1,"dialogBody"]},null),(l()(),e.qb(13,0,null,null,1,"eg-alert-dialog",[["dialogTitle","One or more items could not be transferred"]],null,null,null,ua.b,ua.a)),e.pb(14,114688,[[5,4],["alertDialog",4]],0,ea.a,[b.E],{dialogTitle:[0,"dialogTitle"],dialogBody:[1,"dialogBody"]},null)],(function(l,n){var u=n.component;l(n,6,0,"Successfully Transferred Item(s)"),l(n,8,0,"Failed To Transfer Item(s)"),l(n,10,0,"No transfer target selected"),l(n,12,0,"One or more items could not be transferred. Override?",e.ub(1,"Reason(s) include: ",u.eventDesc,"")),l(n,14,0,"One or more items could not be transferred",e.ub(1,"Reason(s) include: ",u.eventDesc,""))}),null)}class ia{constructor(l,n,u,e){this.toast=l,this.net=n,this.auth=u,this.evt=e}ngOnInit(){}transferHoldings(){if(!this.callNums||0===this.callNums.length)return Promise.resolve(!1);if(!this.targetRecId)return this.toast.warning(this.noTargetMsg.text),Promise.resolve(!1);this.eventDesc="";const l={};return this.targetOrgId?l[+this.targetOrgId]=this.callNums.map(l=>l.id()):this.callNums.forEach(n=>{const u=Number(n.owning_lib());l[u]||(l[u]=[]),l[u].push(n.id())}),this.progressDialog.update({value:0,max:Object.keys(l).length}),this.progressDialog.open(),this.performTransfers(l).then(l=>(this.progressDialog.close(),l))}performTransfers(l){const n=Object.keys(l)[0],u=l[n];return delete l[n],this.net.request("open-ils.cat","open-ils.cat.asset.volume.batch.transfer.override",this.auth.token(),{docid:this.targetRecId,lib:n,volumes:u}).toPromise().then(n=>{const u=this.evt.parse(n);return u||1!==Number(n)?(console.warn(n),this.eventDesc=u?u.desc:"",this.alertDialog.open().toPromise().then(l=>(this.eventDesc="",!1))):(this.progressDialog.increment(),!(Object.keys(l).length>0)||this.performTransfers(l))})}}var ra=e.ob({encapsulation:2,styles:[],data:{}});function sa(l){return e.Mb(0,[e.Ib(671088640,1,{successMsg:0}),e.Ib(671088640,2,{noTargetMsg:0}),e.Ib(671088640,3,{alertDialog:0}),e.Ib(671088640,4,{progressDialog:0}),(l()(),e.qb(4,0,null,null,1,"eg-string",[["text","Successfully Transferred Item(s)"]],null,null,null,q.b,q.a)),e.pb(5,114688,[[1,4],["successMsg",4]],0,k.a,[e.k,I.a],{text:[0,"text"]},null),(l()(),e.qb(6,0,null,null,1,"eg-string",[["text","Failed To Transfer Item(s)"]],null,null,null,q.b,q.a)),e.pb(7,114688,[["errorMsg",4]],0,k.a,[e.k,I.a],{text:[0,"text"]},null),(l()(),e.qb(8,0,null,null,1,"eg-string",[["text","No transfer target selected"]],null,null,null,q.b,q.a)),e.pb(9,114688,[[2,4],["noTargetMsg",4]],0,k.a,[e.k,I.a],{text:[0,"text"]},null),(l()(),e.qb(10,0,null,null,1,"eg-alert-dialog",[["dialogTitle","One or more items could not be transferred"]],null,null,null,ua.b,ua.a)),e.pb(11,114688,[[3,4],["alertDialog",4]],0,ea.a,[b.E],{dialogTitle:[0,"dialogTitle"],dialogBody:[1,"dialogBody"]},null),(l()(),e.qb(12,0,null,null,1,"eg-progress-dialog",[],null,null,null,Ou.b,Ou.a)),e.pb(13,114688,[[4,4],["progressDialog",4]],0,Eu.a,[b.E],null,null)],(function(l,n){var u=n.component;l(n,5,0,"Successfully Transferred Item(s)"),l(n,7,0,"Failed To Transfer Item(s)"),l(n,9,0,"No transfer target selected"),l(n,11,0,"One or more items could not be transferred",e.ub(1,"Reason(s) include: ",u.eventDesc,"")),l(n,13,0)}),null)}class ca{constructor(){this.children=[]}}class ba{constructor(){this.root=new ca}}class da{}class pa{constructor(l,n,u,e,t,a,o,i,r,s){this.router=l,this.org=n,this.idl=u,this.pcrud=e,this.auth=t,this.staffCat=a,this.store=o,this.localStore=i,this.holdings=r,this.anonCache=s,this.initDone=!1,this.gridDataSource=new ou.c,this.refreshHoldings=!0,this.renderFromPrefs=!0,this.contextOrg=this.staffCat.searchContext.searchOrg,this.rowClassCallback=l=>l.callNum?l.copy?"holdings-copy-row":"holdings-callNum-row":"holdings-org-row holdings-org-row-"+l.treeNode.target.ou_type().depth(),this.cellTextGenerator={owner_label:l=>l.locationLabel,holdable:l=>l.copy?this.gridTemplateContext.copyIsHoldable(l.copy):""},this.gridTemplateContext={toggleExpandRow:l=>{if(l.treeNode.expanded=!l.treeNode.expanded,!l.treeNode.expanded){const n=l=>{l.expanded=!1,l.children.forEach(n)};n(l.treeNode)}this.holdingsGrid.reload()},copyIsHoldable:l=>"t"===l.holdable()&&"t"===l.location().holdable()&&"t"===l.status().holdable()}}set recordId(l){this._recId=l,this.initDone&&this.hardRefresh()}get recordId(){return this._recId}ngOnInit(){this.initDone=!0;const l=this.store.getItemBatchCached(["cat.holdings_show_empty_org","cat.holdings_show_empty","cat.holdings_show_copies","cat.holdings_show_vols"]);let n=l["cat.holdings_show_vols"];null===n&&(n=!0),this.callNumsCheckbox.checked(n),this.copiesCheckbox.checked(l["cat.holdings_show_copies"]),this.emptyCallNumsCheckbox.checked(l["cat.holdings_show_empty"]),this.emptyLibsCheckbox.checked(l["cat.holdings_show_empty_org"]),this.initHoldingsTree(),this.gridDataSource.getRows=(l,n)=>this.fetchHoldings(l)}contextOrgChanged(l){this.contextOrg=l,this.hardRefresh()}hardRefresh(){this.renderFromPrefs=!0,this.refreshHoldings=!0,this.initHoldingsTree(),this.holdingsGrid.reload()}toggleShowCopies(l){this.store.setItem("cat.holdings_show_copies",l),l&&this.callNumsCheckbox.checked(!0),this.renderFromPrefs=!0,this.holdingsGrid.reload()}toggleShowCallNums(l){this.store.setItem("cat.holdings_show_vols",l),l||(this.copiesCheckbox.checked(!1),this.emptyCallNumsCheckbox.checked(!1)),this.renderFromPrefs=!0,this.holdingsGrid.reload()}toggleShowEmptyCallNums(l){this.store.setItem("cat.holdings_show_empty",l),l&&this.callNumsCheckbox.checked(!0),this.renderFromPrefs=!0,this.holdingsGrid.reload()}toggleShowEmptyLibs(l){this.store.setItem("cat.holdings_show_empty_org",l),this.renderFromPrefs=!0,this.holdingsGrid.reload()}onRowActivate(l){l.copy||this.gridTemplateContext.toggleExpandRow(l)}initHoldingsTree(){const l=this.org.fullPath(this.contextOrg,!0),n=u=>{u.target.children().forEach(e=>{if(-1===l.indexOf(e.id()))return;const t=new ca;t.nodeType="org",t.target=e,t.parentNode=u,u.children.push(t),this.treeNodeCache.org[e.id()]=t,n(t)})};this.treeNodeCache={org:{},callNum:{},copy:{}},this.holdingsTree=new ba,this.holdingsTree.root.nodeType="org",this.holdingsTree.root.target=this.org.root(),this.treeNodeCache.org[this.org.root().id()]=this.holdingsTree.root,n(this.holdingsTree.root)}sortOrgNodeChildren(l){l.children=l.children.sort((l,n)=>"org"===l.nodeType?"org"===n.nodeType?l.target.shortname()<n.target.shortname()?-1:1:-1:"org"===n.nodeType?1:l.target._label<n.target._label?-1:1)}setTreeCounts(l){"org"===l.nodeType?(l.copyCount=0,l.callNumCount=0):"callNum"===l.nodeType&&(l.copyCount=0);let n=!1,u=!1;l.children.forEach(e=>{this.setTreeCounts(e),"org"===l.nodeType?(l.copyCount+=e.copyCount,"callNum"===e.nodeType?l.callNumCount++:(n=e.callNumCount>0,u=0===e.callNumCount,l.callNumCount+=e.callNumCount)):"callNum"===l.nodeType&&(l.copyCount=l.children.length,this.renderFromPrefs&&(l.expanded=this.copiesCheckbox.checked()))}),this.renderFromPrefs&&"org"===l.nodeType&&(l.expanded=!!(l.copyCount>0&&this.callNumsCheckbox.checked()||l.callNumCount>0&&this.emptyCallNumsCheckbox.checked()||n||u&&this.emptyLibsCheckbox.checked()))}propagateTreeEntries(l,n){const u=new da;switch(u.treeNode=n,u.index=this.gridIndex++,n.nodeType){case"org":if(0===n.callNumCount&&!this.emptyLibsCheckbox.checked())return;u.locationLabel=n.target.shortname(),u.locationDepth=n.target.ou_type().depth(),u.copyCount=n.copyCount,u.callNumCount=n.callNumCount,this.sortOrgNodeChildren(n);break;case"callNum":if(this.renderFromPrefs){if(!this.callNumsCheckbox.checked())return;if(0===n.copyCount&&!this.emptyCallNumsCheckbox.checked())return}u.locationLabel=n.target._label,u.locationDepth=n.parentNode.target.ou_type().depth()+1,u.callNumberLabel=u.locationLabel,u.callNum=n.target,u.copyCount=n.copyCount;break;case"copy":u.locationLabel=n.target.barcode(),u.locationDepth=n.parentNode.parentNode.target.ou_type().depth()+2,u.callNumberLabel=n.parentNode.target.label(),u.callNum=n.parentNode.target,u.copy=n.target,u.circ=n.target._circ}l.next(u),n.expanded&&n.children.forEach(n=>this.propagateTreeEntries(l,n))}flattenHoldingsTree(l){this.gridIndex=0,this.setTreeCounts(this.holdingsTree.root),this.propagateTreeEntries(l,this.holdingsTree.root),l.complete(),this.renderFromPrefs=!1}fetchHoldings(l){return this.recordId?new lt.a(l=>{this.refreshHoldings?(this.itemCircsNeeded=[],this.pcrud.search("acn",{record:this.recordId,owning_lib:this.org.fullPath(this.contextOrg,!0),deleted:"f",label:{"!=":"##URI##"}},{flesh:3,flesh_fields:{acp:["status","location","circ_lib","parts","age_protect","copy_alerts","latest_inventory"],acn:["prefix","suffix","copies"],acli:["inventory_workstation"]}},{authoritative:!0}).subscribe(l=>this.appendCallNum(l),l=>{},()=>{this.refreshHoldings=!1,this.fetchCircs().then(n=>this.flattenHoldingsTree(l))})):this.flattenHoldingsTree(l)}):Object(tu.a)([])}fetchCircs(){const l=this.itemCircsNeeded.map(l=>l.id());return 0===l.length?Promise.resolve():this.pcrud.search("circ",{target_copy:l,checkin_time:null}).pipe(Object(au.a)(l=>{this.itemCircsNeeded.filter(n=>Number(n.id())===Number(l.target_copy()))[0]._circ=l})).toPromise()}setCallNumLabel(l){const n=l.prefix()?l.prefix().label():"",u=l.suffix()?l.suffix().label():"";l._label=n?n+" ":"",l._label+=l.label(),l._label+=u?" "+u:""}appendCallNum(l){let n=this.treeNodeCache.callNum[l.id()];if(this.setCallNumLabel(l),n){const u=this.treeNodeCache.org[l.owning_lib()];n.parentNode.target.id()!==u.target.id()&&(n.parentNode=u,n.parentNode.children.push(n))}else n=new ca,n.nodeType="callNum",n.parentNode=this.treeNodeCache.org[l.owning_lib()],n.parentNode.children.push(n),this.treeNodeCache.callNum[l.id()]=n;n.target=l,l.copies().filter(l=>"t"!==l.deleted()).sort((l,n)=>l.barcode()<n.barcode()?-1:1).forEach(l=>this.appendCopy(n,l))}appendCopy(l,n){let u=this.treeNodeCache.copy[n.id()];u?u.parentNode.target.id()!==l.target.id()&&(u.parentNode=l,l.children.push(u)):(u=new ca,u.nodeType="copy",l.children.push(u),u.parentNode=l,this.treeNodeCache.copy[n.id()]=u),u.target=n;const e=Number(n.status().id());1!==e&&16!==e||this.itemCircsNeeded.push(n)}selectedCopyIds(l,n){return this.selectedCopies(l,n).map(l=>Number(l.id()))}selectedVolIds(l){return l.filter(l=>Boolean(l.callNum)).map(l=>Number(l.callNum.id()))}selectedCopies(l,n){let u=l.filter(l=>Boolean(l.copy)).map(l=>l.copy);return n&&(u=u.filter(l=>Number(l.status().id())!==Number(n))),u}selectedCallNumIds(l){return this.selectedCallNums(l).map(l=>l.id())}selectedCallNums(l){return l.filter(l=>"callNum"===l.treeNode.nodeType).map(l=>l.callNum)}showMarkDamagedDialog(l){return Object(Ru.a)(this,void 0,void 0,(function*(){const n=this.selectedCopyIds(l,14);if(0===n.length)return;let u=!1;const e=l=>Object(Ru.a)(this,void 0,void 0,(function*(){return 0===l.length?Promise.resolve():(this.markDamagedDialog.copyId=l.pop(),this.markDamagedDialog.open({size:"lg"}).subscribe(n=>(n&&(u=!0),e(l)),n=>e(l)))}));yield e(n),u&&(this.refreshHoldings=!0,this.holdingsGrid.reload())}))}showMarkMissingDialog(l){const n=this.selectedCopyIds(l,4);n.length>0&&(this.markMissingDialog.copyIds=n,this.markMissingDialog.open({}).subscribe(l=>{l&&(this.refreshHoldings=!0,this.holdingsGrid.reload())},l=>{}))}markLibCnForTransfer(l){if(0===l.length)return;const n=l[0].treeNode;if("copy"===n.nodeType)return;let u;"org"===n.nodeType?(u=n.target.id(),this.localStore.removeLocalItem("eg.cat.transfer_target_vol")):"callNum"===n.nodeType&&(u=n.parentNode.target.id(),this.localStore.setLocalItem("eg.cat.transfer_target_vol",n.target.id())),this.localStore.setLocalItem("eg.cat.transfer_target_lib",u),this.localStore.setLocalItem("eg.cat.transfer_target_record",this.recordId)}openAngJsWindow(l){window.open("/eg/staff/"+l,"_blank")}openItemHolds(l){l.length>0&&l[0].copy&&this.openAngJsWindow(`cat/item/${l[0].copy.id()}/holds`)}openItemStatusList(l){const n=this.selectedCopyIds(l);if(n.length>0)return this.openAngJsWindow("cat/item/search/"+n.join(","))}openItemStatus(l){if(l.length>0&&l[0].copy)return this.openAngJsWindow("cat/item/"+l[0].copy.id())}openItemTriggeredEvents(l){if(l.length>0&&l[0].copy)return this.openAngJsWindow(`cat/item/${l[0].copy.id()}/triggered_events`)}openItemPrintLabels(l){const n=this.selectedCopyIds(l);0!==n.length&&this.anonCache.setItem(null,"print-labels-these-copies",{copies:n}).then(l=>this.openAngJsWindow("cat/printlabels/"+l))}openHoldingEdit(l,n,u){const e=this.selectedCopies(l),t=e.map(l=>Number(l.call_number())),a=[];this.selectedVolIds(l).forEach(l=>{t.includes(l)||a.push(l)}),this.holdings.spawnAddHoldingsUi(this.recordId,a,null,e.map(l=>Number(l.id())),u,n)}openHoldingAdd(l,n,u){const e={},t=[];if(l.forEach(l=>{if("callNum"===l.treeNode.nodeType)t.push(l.callNum);else if("copy"===l.treeNode.nodeType)t.push(l.treeNode.parentNode.target);else if("org"===l.treeNode.nodeType){const n=l.treeNode.target;"t"===n.ou_type().can_have_vols()&&(e[n.id()]=!0)}}),u&&!n){if(t.length>0){const l=t.map(l=>Number(l.id()));this.holdings.spawnAddHoldingsUi(this.recordId,l)}}else if(n){const l=[];t.forEach(n=>l.push({label:n.label(),owner:n.owning_lib()})),Object.keys(e).forEach(n=>l.push({owner:n})),0===l.length&&l.push({owner:this.auth.user().ws_ou()}),this.holdings.spawnAddHoldingsUi(this.recordId,null,l,null,!u)}}openItemNotes(l,n){const u=this.selectedCopyIds(l);0!==u.length&&(this.copyAlertsDialog.copyIds=u,this.copyAlertsDialog.mode=n,this.copyAlertsDialog.open({size:"lg"}).subscribe(l=>{l&&this.hardRefresh()}))}openReplaceBarcodeDialog(l){const n=this.selectedCopyIds(l);0!==n.length&&(this.replaceBarcode.copyIds=n,this.replaceBarcode.open({}).subscribe(l=>{l&&this.hardRefresh()}))}deleteHoldings(l,n){const u={};"callNums"!==n&&"both"!==n||l.filter(l=>"callNum"===l.treeNode.nodeType).forEach(l=>{const e=this.idl.clone(l.callNum);if("callNums"===n){if(e.copies().length>0)return}else e.copies().forEach(l=>l.isdeleted(!0));e.isdeleted(!0),u[e.id()]=e}),"copies"!==n&&"both"!==n||l.filter(l=>"copy"===l.treeNode.nodeType).forEach(l=>{const n=l.treeNode.parentNode.target;u[n.id()]||(u[n.id()]=this.idl.clone(n),u[n.id()].copies([]));const e=this.idl.clone(l.copy);e.isdeleted(!0),u[n.id()].copies().push(e)}),0!==Object.keys(u).length&&(this.deleteHolding.forceDeleteCopies="both"===n,this.deleteHolding.callNums=Object.values(u),this.deleteHolding.open({size:"sm"}).subscribe(l=>{l&&this.hardRefresh()}))}requestItems(l){const n=this.selectedCopyIds(l);0!==n.length&&this.router.navigate(["/staff/catalog/hold/C"],{queryParams:{target:n,holdFor:"staff"}})}openBucketDialog(l){const n=this.selectedCopyIds(l);n.length>0&&(this.bucketDialog.bucketClass="copy",this.bucketDialog.itemIds=n,this.bucketDialog.open({size:"lg"}))}openConjoinedDialog(l){const n=this.selectedCopyIds(l);n.length>0&&(this.conjoinedDialog.copyIds=n,this.conjoinedDialog.open({size:"sm"}))}bookItems(l){this.selectedCopyIds(l).length>0&&this.router.navigate(["staff","booking","create_reservation","for_resource",l.filter(l=>Boolean(l.copy))[0].copy.barcode()])}makeBookable(l){const n=this.selectedCopyIds(l);n.length>0&&(this.makeBookableDialog.copyIds=n,this.makeBookableDialog.open({}))}manageReservations(l){this.selectedCopyIds(l).length>0&&this.router.navigate(["staff","booking","manage_reservations","by_resource",l.filter(l=>Boolean(l.copy))[0].copy.barcode()])}transferSelectedItems(l){if(0===l.length)return;const n=this.localStore.getLocalItem("eg.cat.transfer_target_vol"),u=this.localStore.getLocalItem("eg.cat.transfer_target_lib"),e=this.localStore.getLocalItem("eg.cat.transfer_target_record");let t;if(n){const u=this.selectedCopyIds(l);t=this.transferItems.transferItems(u,n)}else if(u&&e){const n=this.idl.clone(this.selectedCopies(l));n.forEach(l=>l.call_number(this.treeNodeCache.callNum[l.call_number()].target)),console.log(n),t=this.transferItems.autoTransferItems(n,e,u)}else t=this.transferAlert.open().toPromise();t.then(l=>l?this.hardRefresh():null)}transferSelectedHoldings(l){const n=this.selectedCallNums(l);if(0===n.length)return;const u=this.localStore.getLocalItem("eg.cat.transfer_target_lib");let e=this.localStore.getLocalItem("eg.cat.transfer_target_record");if(u)e=this.recordId;else if(!e)return this.transferAlert.open();this.transferHoldings.targetRecId=e,this.transferHoldings.targetOrgId=u,this.transferHoldings.callNums=n,this.transferHoldings.transferHoldings().then(l=>l?this.hardRefresh():null)}}var ha=e.ob({encapsulation:2,styles:[[".holdings-callNum-row{background-color:#c9efe4}.holdings-org-row{color:rgba(0,0,0,.8);background-color:#e1efeb}"]],data:{}});function ga(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,4,"span",[["class","material-icons p-0 m-0"]],null,null,null,null,null)),e.Hb(512,null,c.N,c.O,[e.r,e.s,e.k,e.C]),e.pb(2,278528,null,0,c.n,[c.N],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),e.Fb(3,{invisible:0}),(l()(),e.Kb(-1,null,["keyboard_arrow_down"]))],(function(l,n){var u=l(n,3,0,n.parent.context.row.copy||0==n.parent.context.row.treeNode.children.length);l(n,2,0,"material-icons p-0 m-0",u)}),null)}function ma(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,4,"span",[["class","material-icons p-0 m-0"]],null,null,null,null,null)),e.Hb(512,null,c.N,c.O,[e.r,e.s,e.k,e.C]),e.pb(2,278528,null,0,c.n,[c.N],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),e.Fb(3,{invisible:0}),(l()(),e.Kb(-1,null,["keyboard_arrow_right"]))],(function(l,n){var u=l(n,3,0,n.parent.context.row.copy||0==n.parent.context.row.treeNode.children.length);l(n,2,0,"material-icons p-0 m-0",u)}),null)}function fa(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,8,"div",[],[[8,"className",0]],null,null,null,null)),(l()(),e.qb(1,0,null,null,7,"span",[],[[8,"className",0]],null,null,null,null)),(l()(),e.qb(2,0,null,null,6,"a",[["class","label-with-material-icon"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.context.userContext.toggleExpandRow(l.context.row)&&e),e}),null,null)),(l()(),e.fb(16777216,null,null,1,null,ga)),e.pb(4,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,ma)),e.pb(6,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(7,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Kb(8,null,["",""]))],(function(l,n){l(n,4,0,n.context.row.treeNode.expanded),l(n,6,0,!n.context.row.treeNode.expanded)}),(function(l,n){l(n,0,0,e.ub(1,"pl-",n.context.row.locationDepth,"")),l(n,1,0,e.ub(1,"pl-",n.context.row.locationDepth,"")),l(n,8,0,n.context.row.locationLabel)}))}function Ca(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"eg-bool",[],null,null,null,It.b,It.a)),e.pb(2,49152,null,0,_t.a,[],{value:[0,"value"]},null)],(function(l,n){var u=n.parent.context.userContext.copyIsHoldable(n.parent.context.row.copy);l(n,2,0,u)}),null)}function va(l){return e.Mb(0,[(l()(),e.fb(16777216,null,null,1,null,Ca)),e.pb(1,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(0,null,null,0))],(function(l,n){l(n,1,0,n.context.row.copy)}),null)}function ya(l){return e.Mb(0,[e.Ib(402653184,1,{holdingsGrid:0}),e.Ib(402653184,2,{callNumsCheckbox:0}),e.Ib(402653184,3,{copiesCheckbox:0}),e.Ib(402653184,4,{emptyCallNumsCheckbox:0}),e.Ib(402653184,5,{emptyLibsCheckbox:0}),e.Ib(402653184,6,{markDamagedDialog:0}),e.Ib(402653184,7,{markMissingDialog:0}),e.Ib(402653184,8,{copyAlertsDialog:0}),e.Ib(402653184,9,{replaceBarcode:0}),e.Ib(402653184,10,{deleteHolding:0}),e.Ib(402653184,11,{bucketDialog:0}),e.Ib(402653184,12,{conjoinedDialog:0}),e.Ib(402653184,13,{makeBookableDialog:0}),e.Ib(671088640,14,{transferItems:0}),e.Ib(671088640,15,{transferHoldings:0}),e.Ib(671088640,16,{transferAlert:0}),(l()(),e.qb(16,0,null,null,7,"div",[["class","row mt-3"]],null,null,null,null,null)),(l()(),e.qb(17,0,null,null,6,"div",[["class","col-lg-4"]],null,null,null,null,null)),(l()(),e.qb(18,0,null,null,5,"div",[["class","input-group"]],null,null,null,null,null)),(l()(),e.qb(19,0,null,null,2,"div",[["class","input-group-prepend"]],null,null,null,null,null)),(l()(),e.qb(20,0,null,null,1,"div",[["class","input-group-text"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Holdings Maintenance"])),(l()(),e.qb(22,0,null,null,1,"eg-org-select",[],null,[[null,"onChange"]],(function(l,n,u){var e=!0;return"onChange"===n&&(e=!1!==l.component.contextOrgChanged(u)&&e),e}),d.b,d.a)),e.pb(23,114688,null,0,p.a,[h.a,g.a,m.a,f.a],{initialOrg:[0,"initialOrg"]},{onChange:"onChange"}),(l()(),e.fb(0,[["locationTemplate",2]],null,0,null,fa)),(l()(),e.fb(0,[["holdableTemplate",2]],null,0,null,va)),(l()(),e.qb(26,0,null,null,1,"eg-mark-damaged-dialog",[],null,null,null,ae,Xu)),e.pb(27,114688,[[6,4],["markDamagedDialog",4]],0,Yu,[b.E,W.a,Q.b,Z.a,Pn.a,m.a,Yl.a,h.a],null,null),(l()(),e.qb(28,0,null,null,1,"eg-mark-missing-dialog",[],null,null,null,de,ie)),e.pb(29,114688,[[7,4],["markMissingDialog",4]],0,oe,[b.E,W.a,Q.b,Z.a,h.a],null,null),(l()(),e.qb(30,0,null,null,1,"eg-copy-alerts-dialog",[],null,null,null,Pt,xt)),e.pb(31,114688,[[8,4],["copyAlertsDialog",4]],0,wt,[b.E,W.a,Q.b,J.a,Pn.a,m.a,h.a],null,null),(l()(),e.qb(32,0,null,null,1,"eg-replace-barcode-dialog",[],null,null,null,Rt,Ft)),e.pb(33,114688,[[9,4],["replaceBarcode",4]],0,At,[b.E,W.a,Pn.a,e.C],null,null),(l()(),e.qb(34,0,null,null,1,"eg-delete-holding-dialog",[],null,null,null,jt,Lt)),e.pb(35,114688,[[10,4],["deleteHolding",4]],0,Bt,[b.E,W.a,Q.b,Pn.a,Z.a,e.C,h.a],null,null),(l()(),e.qb(36,0,null,null,1,"eg-bucket-dialog",[],null,null,null,G.b,G.a)),e.pb(37,114688,[[11,4],["bucketDialog",4]],0,z.a,[b.E,e.C,W.a,J.a,Q.b,Z.a,h.a],null,null),(l()(),e.qb(38,0,null,null,1,"eg-conjoined-items-dialog",[],null,null,null,zt,Vt)),e.pb(39,245760,[[12,4],["conjoinedDialog",4]],0,$t,[b.E,W.a,J.a,Pn.a,g.a],null,null),(l()(),e.qb(40,0,null,null,1,"eg-make-bookable-dialog",[],null,null,null,na,Jt)),e.pb(41,245760,[[13,4],["makeBookableDialog",4]],0,Wt,[b.E,W.a,Q.b,Pn.a,Z.a,h.a],null,null),(l()(),e.qb(42,0,null,null,1,"eg-transfer-items",[],null,null,null,oa,aa)),e.pb(43,114688,[[14,4],["transferItems",4]],0,ta,[W.a,J.a,Q.b,h.a,Z.a],null,null),(l()(),e.qb(44,0,null,null,1,"eg-transfer-holdings",[],null,null,null,sa,ra)),e.pb(45,114688,[[15,4],["transferHoldings",4]],0,ia,[W.a,Q.b,h.a,Z.a],null,null),(l()(),e.qb(46,0,null,null,1,"eg-alert-dialog",[["dialogBody","Please select a suitable transfer target"],["dialogTitle","No Target Selected"]],null,null,null,ua.b,ua.a)),e.pb(47,114688,[[16,4],["transferAlert",4]],0,ea.a,[b.E],{dialogTitle:[0,"dialogTitle"],dialogBody:[1,"dialogBody"]},null),(l()(),e.qb(48,0,null,null,120,"div",[["class","eg-copies w-100 mt-3"]],null,null,null,null,null)),(l()(),e.qb(49,0,null,null,119,"eg-grid",[["persistKey","cat.holdings"]],null,[[null,"onRowActivate"]],(function(l,n,u){var e=!0;return"onRowActivate"===n&&(e=!1!==l.component.onRowActivate(u)&&e),e}),Xn.b,Xn.a)),e.pb(50,4440064,[[1,4],["holdingsGrid",4]],0,lu.a,[J.a,m.a,_.a,nu.a],{dataSource:[0,"dataSource"],sortable:[1,"sortable"],persistKey:[2,"persistKey"],rowClassCallback:[3,"rowClassCallback"],disablePaging:[4,"disablePaging"],cellTextGenerator:[5,"cellTextGenerator"]},{onRowActivate:"onRowActivate"}),(l()(),e.qb(51,0,null,null,1,"eg-grid-toolbar-checkbox",[["label","Show Call Numbers"]],null,[[null,"onChange"]],(function(l,n,u){var e=!0;return"onChange"===n&&(e=!1!==l.component.toggleShowCallNums(u)&&e),e}),Pu.b,Pu.a)),e.pb(52,114688,[[2,4],["callNumsCheckbox",4]],0,Hu.a,[lu.a],{label:[0,"label"]},{onChange:"onChange"}),(l()(),e.qb(53,0,null,null,1,"eg-grid-toolbar-checkbox",[["label","Show Copies"]],null,[[null,"onChange"]],(function(l,n,u){var e=!0;return"onChange"===n&&(e=!1!==l.component.toggleShowCopies(u)&&e),e}),Pu.b,Pu.a)),e.pb(54,114688,[[3,4],["copiesCheckbox",4]],0,Hu.a,[lu.a],{label:[0,"label"]},{onChange:"onChange"}),(l()(),e.qb(55,0,null,null,1,"eg-grid-toolbar-checkbox",[["label","Show Empty Call Numbers"]],null,[[null,"onChange"]],(function(l,n,u){var e=!0;return"onChange"===n&&(e=!1!==l.component.toggleShowEmptyCallNums(u)&&e),e}),Pu.b,Pu.a)),e.pb(56,114688,[[4,4],["emptyCallNumsCheckbox",4]],0,Hu.a,[lu.a],{label:[0,"label"]},{onChange:"onChange"}),(l()(),e.qb(57,0,null,null,1,"eg-grid-toolbar-checkbox",[["label","Show Empty Libs"]],null,[[null,"onChange"]],(function(l,n,u){var e=!0;return"onChange"===n&&(e=!1!==l.component.toggleShowEmptyLibs(u)&&e),e}),Pu.b,Pu.a)),e.pb(58,114688,[[5,4],["emptyLibsCheckbox",4]],0,Hu.a,[lu.a],{label:[0,"label"]},{onChange:"onChange"}),(l()(),e.qb(59,0,null,null,1,"eg-grid-toolbar-action",[["label","Print Labels"]],null,[[null,"onClick"]],(function(l,n,u){var e=!0;return"onClick"===n&&(e=!1!==l.component.openItemPrintLabels(u)&&e),e}),Au.b,Au.a)),e.pb(60,114688,null,0,Fu.a,[lu.a],{label:[0,"label"]},{onClick:"onClick"}),(l()(),e.qb(61,0,null,null,1,"eg-grid-toolbar-action",[["label","Request Items"]],null,[[null,"onClick"]],(function(l,n,u){var e=!0;return"onClick"===n&&(e=!1!==l.component.requestItems(u)&&e),e}),Au.b,Au.a)),e.pb(62,114688,null,0,Fu.a,[lu.a],{label:[0,"label"]},{onClick:"onClick"}),(l()(),e.qb(63,0,null,null,1,"eg-grid-toolbar-action",[["label","Link as Conjoined to Marked Bib Record"]],null,[[null,"onClick"]],(function(l,n,u){var e=!0;return"onClick"===n&&(e=!1!==l.component.openConjoinedDialog(u)&&e),e}),Au.b,Au.a)),e.pb(64,114688,null,0,Fu.a,[lu.a],{label:[0,"label"]},{onClick:"onClick"}),(l()(),e.qb(65,0,null,null,1,"eg-grid-toolbar-action",[["group","Add"],["label","Add Call Numbers"]],null,[[null,"onClick"]],(function(l,n,u){var e=!0;return"onClick"===n&&(e=!1!==l.component.openHoldingAdd(u,!0,!1)&&e),e}),Au.b,Au.a)),e.pb(66,114688,null,0,Fu.a,[lu.a],{label:[0,"label"],group:[1,"group"]},{onClick:"onClick"}),(l()(),e.qb(67,0,null,null,1,"eg-grid-toolbar-action",[["group","Add"],["label","Add Items"]],null,[[null,"onClick"]],(function(l,n,u){var e=!0;return"onClick"===n&&(e=!1!==l.component.openHoldingAdd(u,!1,!0)&&e),e}),Au.b,Au.a)),e.pb(68,114688,null,0,Fu.a,[lu.a],{label:[0,"label"],group:[1,"group"]},{onClick:"onClick"}),(l()(),e.qb(69,0,null,null,1,"eg-grid-toolbar-action",[["group","Add"],["label","Add Call Numbers and Items"]],null,[[null,"onClick"]],(function(l,n,u){var e=!0;return"onClick"===n&&(e=!1!==l.component.openHoldingAdd(u,!0,!0)&&e),e}),Au.b,Au.a)),e.pb(70,114688,null,0,Fu.a,[lu.a],{label:[0,"label"],group:[1,"group"]},{onClick:"onClick"}),(l()(),e.qb(71,0,null,null,1,"eg-grid-toolbar-action",[["group","Add"],["label","Add Item Alerts"]],null,[[null,"onClick"]],(function(l,n,u){var e=!0;return"onClick"===n&&(e=!1!==l.component.openItemNotes(u,"create")&&e),e}),Au.b,Au.a)),e.pb(72,114688,null,0,Fu.a,[lu.a],{label:[0,"label"],group:[1,"group"]},{onClick:"onClick"}),(l()(),e.qb(73,0,null,null,1,"eg-grid-toolbar-action",[["group","Add"],["label","Add Items To Bucket"]],null,[[null,"onClick"]],(function(l,n,u){var e=!0;return"onClick"===n&&(e=!1!==l.component.openBucketDialog(u)&&e),e}),Au.b,Au.a)),e.pb(74,114688,null,0,Fu.a,[lu.a],{label:[0,"label"],group:[1,"group"]},{onClick:"onClick"}),(l()(),e.qb(75,0,null,null,1,"eg-grid-toolbar-action",[["group","Booking"],["label","Book Item Now"]],null,[[null,"onClick"]],(function(l,n,u){var e=!0;return"onClick"===n&&(e=!1!==l.component.bookItems(u)&&e),e}),Au.b,Au.a)),e.pb(76,114688,null,0,Fu.a,[lu.a],{label:[0,"label"],group:[1,"group"]},{onClick:"onClick"}),(l()(),e.qb(77,0,null,null,1,"eg-grid-toolbar-action",[["group","Booking"],["label","Make Items Bookable"]],null,[[null,"onClick"]],(function(l,n,u){var e=!0;return"onClick"===n&&(e=!1!==l.component.makeBookable(u)&&e),e}),Au.b,Au.a)),e.pb(78,114688,null,0,Fu.a,[lu.a],{label:[0,"label"],group:[1,"group"]},{onClick:"onClick"}),(l()(),e.qb(79,0,null,null,1,"eg-grid-toolbar-action",[["group","Booking"],["label","Manage Reservations"]],null,[[null,"onClick"]],(function(l,n,u){var e=!0;return"onClick"===n&&(e=!1!==l.component.manageReservations(u)&&e),e}),Au.b,Au.a)),e.pb(80,114688,null,0,Fu.a,[lu.a],{label:[0,"label"],group:[1,"group"]},{onClick:"onClick"}),(l()(),e.qb(81,0,null,null,1,"eg-grid-toolbar-action",[["group","Edit"],["label","Edit Call Numbers"]],null,[[null,"onClick"]],(function(l,n,u){var e=!0;return"onClick"===n&&(e=!1!==l.component.openHoldingEdit(u,!1,!0)&&e),e}),Au.b,Au.a)),e.pb(82,114688,null,0,Fu.a,[lu.a],{label:[0,"label"],group:[1,"group"]},{onClick:"onClick"}),(l()(),e.qb(83,0,null,null,1,"eg-grid-toolbar-action",[["group","Edit"],["label","Edit Call Numbers And Items"]],null,[[null,"onClick"]],(function(l,n,u){var e=!0;return"onClick"===n&&(e=!1!==l.component.openHoldingEdit(u,!1,!1)&&e),e}),Au.b,Au.a)),e.pb(84,114688,null,0,Fu.a,[lu.a],{label:[0,"label"],group:[1,"group"]},{onClick:"onClick"}),(l()(),e.qb(85,0,null,null,1,"eg-grid-toolbar-action",[["group","Edit"],["label","Edit Items"]],null,[[null,"onClick"]],(function(l,n,u){var e=!0;return"onClick"===n&&(e=!1!==l.component.openHoldingEdit(u,!0,!1)&&e),e}),Au.b,Au.a)),e.pb(86,114688,null,0,Fu.a,[lu.a],{label:[0,"label"],group:[1,"group"]},{onClick:"onClick"}),(l()(),e.qb(87,0,null,null,1,"eg-grid-toolbar-action",[["group","Edit"],["label","Edit Item Alerts"]],null,[[null,"onClick"]],(function(l,n,u){var e=!0;return"onClick"===n&&(e=!1!==l.component.openItemNotes(u,"manage")&&e),e}),Au.b,Au.a)),e.pb(88,114688,null,0,Fu.a,[lu.a],{label:[0,"label"],group:[1,"group"]},{onClick:"onClick"}),(l()(),e.qb(89,0,null,null,1,"eg-grid-toolbar-action",[["group","Edit"],["label","Replace Barcodes"]],null,[[null,"onClick"]],(function(l,n,u){var e=!0;return"onClick"===n&&(e=!1!==l.component.openReplaceBarcodeDialog(u)&&e),e}),Au.b,Au.a)),e.pb(90,114688,null,0,Fu.a,[lu.a],{label:[0,"label"],group:[1,"group"]},{onClick:"onClick"}),(l()(),e.qb(91,0,null,null,1,"eg-grid-toolbar-action",[["group","Delete"],["label","Delete Empty Call Numbers"]],null,[[null,"onClick"]],(function(l,n,u){var e=!0;return"onClick"===n&&(e=!1!==l.component.deleteHoldings(u,"callNums")&&e),e}),Au.b,Au.a)),e.pb(92,114688,null,0,Fu.a,[lu.a],{label:[0,"label"],group:[1,"group"]},{onClick:"onClick"}),(l()(),e.qb(93,0,null,null,1,"eg-grid-toolbar-action",[["group","Delete"],["label","Delete Items"]],null,[[null,"onClick"]],(function(l,n,u){var e=!0;return"onClick"===n&&(e=!1!==l.component.deleteHoldings(u,"copies")&&e),e}),Au.b,Au.a)),e.pb(94,114688,null,0,Fu.a,[lu.a],{label:[0,"label"],group:[1,"group"]},{onClick:"onClick"}),(l()(),e.qb(95,0,null,null,1,"eg-grid-toolbar-action",[["group","Delete"],["label","Delete Call Numbers and Items"]],null,[[null,"onClick"]],(function(l,n,u){var e=!0;return"onClick"===n&&(e=!1!==l.component.deleteHoldings(u,"both")&&e),e}),Au.b,Au.a)),e.pb(96,114688,null,0,Fu.a,[lu.a],{label:[0,"label"],group:[1,"group"]},{onClick:"onClick"}),(l()(),e.qb(97,0,null,null,1,"eg-grid-toolbar-action",[["group","Show"],["label","Show Item Status (list)"]],null,[[null,"onClick"]],(function(l,n,u){var e=!0;return"onClick"===n&&(e=!1!==l.component.openItemStatusList(u)&&e),e}),Au.b,Au.a)),e.pb(98,114688,null,0,Fu.a,[lu.a],{label:[0,"label"],group:[1,"group"]},{onClick:"onClick"}),(l()(),e.qb(99,0,null,null,1,"eg-grid-toolbar-action",[["group","Show"],["label","Show Item Status (detail)"]],null,[[null,"onClick"]],(function(l,n,u){var e=!0;return"onClick"===n&&(e=!1!==l.component.openItemStatus(u)&&e),e}),Au.b,Au.a)),e.pb(100,114688,null,0,Fu.a,[lu.a],{label:[0,"label"],group:[1,"group"]},{onClick:"onClick"}),(l()(),e.qb(101,0,null,null,1,"eg-grid-toolbar-action",[["group","Show"],["label","Show Item Holds"]],null,[[null,"onClick"]],(function(l,n,u){var e=!0;return"onClick"===n&&(e=!1!==l.component.openItemHolds(u)&&e),e}),Au.b,Au.a)),e.pb(102,114688,null,0,Fu.a,[lu.a],{label:[0,"label"],group:[1,"group"]},{onClick:"onClick"}),(l()(),e.qb(103,0,null,null,1,"eg-grid-toolbar-action",[["group","Show"],["label","Show Triggered Events"]],null,[[null,"onClick"]],(function(l,n,u){var e=!0;return"onClick"===n&&(e=!1!==l.component.openItemTriggeredEvents(u)&&e),e}),Au.b,Au.a)),e.pb(104,114688,null,0,Fu.a,[lu.a],{label:[0,"label"],group:[1,"group"]},{onClick:"onClick"}),(l()(),e.qb(105,0,null,null,1,"eg-grid-toolbar-action",[["group","Mark"],["label","Mark Item Damaged"]],null,[[null,"onClick"]],(function(l,n,u){var e=!0;return"onClick"===n&&(e=!1!==l.component.showMarkDamagedDialog(u)&&e),e}),Au.b,Au.a)),e.pb(106,114688,null,0,Fu.a,[lu.a],{label:[0,"label"],group:[1,"group"]},{onClick:"onClick"}),(l()(),e.qb(107,0,null,null,1,"eg-grid-toolbar-action",[["group","Mark"],["label","Mark Item Missing"]],null,[[null,"onClick"]],(function(l,n,u){var e=!0;return"onClick"===n&&(e=!1!==l.component.showMarkMissingDialog(u)&&e),e}),Au.b,Au.a)),e.pb(108,114688,null,0,Fu.a,[lu.a],{label:[0,"label"],group:[1,"group"]},{onClick:"onClick"}),(l()(),e.qb(109,0,null,null,1,"eg-grid-toolbar-action",[["group","Mark"],["label","Mark Library/Call Number as Transfer Destination"]],null,[[null,"onClick"]],(function(l,n,u){var e=!0;return"onClick"===n&&(e=!1!==l.component.markLibCnForTransfer(u)&&e),e}),Au.b,Au.a)),e.pb(110,114688,null,0,Fu.a,[lu.a],{label:[0,"label"],group:[1,"group"]},{onClick:"onClick"}),(l()(),e.qb(111,0,null,null,1,"eg-grid-toolbar-action",[["group","Transfer"],["label","Transfer Items to Marked Destination"]],null,[[null,"onClick"]],(function(l,n,u){var e=!0;return"onClick"===n&&(e=!1!==l.component.transferSelectedItems(u)&&e),e}),Au.b,Au.a)),e.pb(112,114688,null,0,Fu.a,[lu.a],{label:[0,"label"],group:[1,"group"]},{onClick:"onClick"}),(l()(),e.qb(113,0,null,null,1,"eg-grid-toolbar-action",[["group","Transfer"],["label","Transfer Holdings to Marked Destination"]],null,[[null,"onClick"]],(function(l,n,u){var e=!0;return"onClick"===n&&(e=!1!==l.component.transferSelectedHoldings(u)&&e),e}),Au.b,Au.a)),e.pb(114,114688,null,0,Fu.a,[lu.a],{label:[0,"label"],group:[1,"group"]},{onClick:"onClick"}),(l()(),e.qb(115,0,null,null,1,"eg-grid-column",[["path","index"]],null,null,null,uu.b,uu.a)),e.pb(116,114688,null,0,eu.a,[lu.a],{path:[0,"path"],index:[1,"index"],hidden:[2,"hidden"]},null),(l()(),e.qb(117,0,null,null,1,"eg-grid-column",[["label","Item ID"],["name","id"],["path","copy.id"]],null,null,null,uu.b,uu.a)),e.pb(118,114688,null,0,eu.a,[lu.a],{name:[0,"name"],path:[1,"path"],label:[2,"label"],hidden:[3,"hidden"]},null),(l()(),e.qb(119,0,null,null,1,"eg-grid-column",[["label","Call Number ID"],["path","callNum.id"]],null,null,null,uu.b,uu.a)),e.pb(120,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],hidden:[2,"hidden"]},null),(l()(),e.qb(121,0,null,null,1,"eg-grid-column",[["label","Location/Barcode"],["name","owner_label"]],null,null,null,uu.b,uu.a)),e.pb(122,114688,null,0,eu.a,[lu.a],{name:[0,"name"],label:[1,"label"],flex:[2,"flex"],cellContext:[3,"cellContext"],cellTemplate:[4,"cellTemplate"],disableTooltip:[5,"disableTooltip"]},null),(l()(),e.qb(123,0,null,null,1,"eg-grid-column",[["datatype","number"],["label","Call Numbers"],["path","callNumCount"]],null,null,null,uu.b,uu.a)),e.pb(124,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],datatype:[2,"datatype"]},null),(l()(),e.qb(125,0,null,null,1,"eg-grid-column",[["datatype","number"],["label","Copies"],["path","copyCount"]],null,null,null,uu.b,uu.a)),e.pb(126,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],datatype:[2,"datatype"]},null),(l()(),e.qb(127,0,null,null,1,"eg-grid-column",[["label","Call Number"],["name","call_number.label"],["path","callNum._label"]],null,null,null,uu.b,uu.a)),e.pb(128,114688,null,0,eu.a,[lu.a],{name:[0,"name"],path:[1,"path"],label:[2,"label"]},null),(l()(),e.qb(129,0,null,null,1,"eg-grid-column",[["label","Barcode"],["name","barcode"],["path","copy.barcode"]],null,null,null,uu.b,uu.a)),e.pb(130,114688,null,0,eu.a,[lu.a],{name:[0,"name"],path:[1,"path"],label:[2,"label"]},null),(l()(),e.qb(131,0,null,null,1,"eg-grid-column",[["datatype","org_unit"],["label","Circ Library"],["name","circ_lib.name"],["path","copy.circ_lib"]],null,null,null,uu.b,uu.a)),e.pb(132,114688,null,0,eu.a,[lu.a],{name:[0,"name"],path:[1,"path"],label:[2,"label"],datatype:[3,"datatype"]},null),(l()(),e.qb(133,0,null,null,1,"eg-grid-column",[["datatype","org_unit"],["label","Owning Library"],["path","callNum.owning_lib"]],null,null,null,uu.b,uu.a)),e.pb(134,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],datatype:[2,"datatype"]},null),(l()(),e.qb(135,0,null,null,1,"eg-grid-column",[["datatype","timestamp"],["label","Due Date"],["path","circ.due_date"]],null,null,null,uu.b,uu.a)),e.pb(136,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],datatype:[2,"datatype"]},null),(l()(),e.qb(137,0,null,null,1,"eg-grid-column",[["label","Shelving Location"],["name","location.name"],["path","copy.location.name"]],null,null,null,uu.b,uu.a)),e.pb(138,114688,null,0,eu.a,[lu.a],{name:[0,"name"],path:[1,"path"],label:[2,"label"]},null),(l()(),e.qb(139,0,null,null,1,"eg-grid-column",[["label","Circulation Modifier"],["name","circ_modifier"],["path","copy.circ_modifier"]],null,null,null,uu.b,uu.a)),e.pb(140,114688,null,0,eu.a,[lu.a],{name:[0,"name"],path:[1,"path"],label:[2,"label"]},null),(l()(),e.qb(141,0,null,null,1,"eg-grid-column",[["label","Item Number"],["name","copy_number"],["path","copy.copy_number"]],null,null,null,uu.b,uu.a)),e.pb(142,114688,null,0,eu.a,[lu.a],{name:[0,"name"],path:[1,"path"],label:[2,"label"],hidden:[3,"hidden"]},null),(l()(),e.qb(143,0,null,null,1,"eg-grid-column",[["label","Status"],["name","status_name"],["path","copy.status.name"]],null,null,null,uu.b,uu.a)),e.pb(144,114688,null,0,eu.a,[lu.a],{name:[0,"name"],path:[1,"path"],label:[2,"label"]},null),(l()(),e.qb(145,0,null,null,1,"eg-grid-column",[["label","Call Number Prefix"],["name","call_number.prefix.label"],["path","callNum.prefix.label"]],null,null,null,uu.b,uu.a)),e.pb(146,114688,null,0,eu.a,[lu.a],{name:[0,"name"],path:[1,"path"],label:[2,"label"],hidden:[3,"hidden"]},null),(l()(),e.qb(147,0,null,null,1,"eg-grid-column",[["label","Call Number Suffix"],["name","call_number.suffix.label"],["path","callNum.suffix.label"]],null,null,null,uu.b,uu.a)),e.pb(148,114688,null,0,eu.a,[lu.a],{name:[0,"name"],path:[1,"path"],label:[2,"label"],hidden:[3,"hidden"]},null),(l()(),e.qb(149,0,null,null,1,"eg-grid-column",[["datatype","timestamp"],["label","Active/Create Date"],["path","copy.active_date"]],null,null,null,uu.b,uu.a)),e.pb(150,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],datatype:[2,"datatype"]},null),(l()(),e.qb(151,0,null,null,1,"eg-grid-column",[["label","Age Hold Protection"],["name","age_protect.name"],["path","copy.age_protect.name"]],null,null,null,uu.b,uu.a)),e.pb(152,114688,null,0,eu.a,[lu.a],{name:[0,"name"],path:[1,"path"],label:[2,"label"]},null),(l()(),e.qb(153,0,null,null,1,"eg-grid-column",[["label","Item Price"],["name","price"],["path","copy.price"]],null,null,null,uu.b,uu.a)),e.pb(154,114688,null,0,eu.a,[lu.a],{name:[0,"name"],path:[1,"path"],label:[2,"label"],hidden:[3,"hidden"]},null),(l()(),e.qb(155,0,null,null,1,"eg-grid-column",[["datatype","bool"],["label","Circulate"],["name","circulate"],["path","copy.circulate"]],null,null,null,uu.b,uu.a)),e.pb(156,114688,null,0,eu.a,[lu.a],{name:[0,"name"],path:[1,"path"],label:[2,"label"],hidden:[3,"hidden"],datatype:[4,"datatype"]},null),(l()(),e.qb(157,0,null,null,1,"eg-grid-column",[["datatype","bool"],["label","Deposit"],["name","deposit"],["path","copy.deposit"]],null,null,null,uu.b,uu.a)),e.pb(158,114688,null,0,eu.a,[lu.a],{name:[0,"name"],path:[1,"path"],label:[2,"label"],hidden:[3,"hidden"],datatype:[4,"datatype"]},null),(l()(),e.qb(159,0,null,null,1,"eg-grid-column",[["datatype","money"],["label","Deposit Amount"],["name","deposit_amount"],["path","copy.deposit_amount"]],null,null,null,uu.b,uu.a)),e.pb(160,114688,null,0,eu.a,[lu.a],{name:[0,"name"],path:[1,"path"],label:[2,"label"],hidden:[3,"hidden"],datatype:[4,"datatype"]},null),(l()(),e.qb(161,0,null,null,1,"eg-grid-column",[["label","Holdable?"],["name","holdable"]],null,null,null,uu.b,uu.a)),e.pb(162,114688,null,0,eu.a,[lu.a],{name:[0,"name"],label:[1,"label"],cellContext:[2,"cellContext"],cellTemplate:[3,"cellTemplate"]},null),(l()(),e.qb(163,0,null,null,1,"eg-grid-column",[["datatype","bool"],["label","Reference?"],["name","ref"],["path","copy.ref"]],null,null,null,uu.b,uu.a)),e.pb(164,114688,null,0,eu.a,[lu.a],{name:[0,"name"],path:[1,"path"],label:[2,"label"],hidden:[3,"hidden"],datatype:[4,"datatype"]},null),(l()(),e.qb(165,0,null,null,1,"eg-grid-column",[["datatype","timestamp"],["label","Last Inventory Date"],["name","latest_inventory.inventory_date"],["path","copy.latest_inventory.inventory_date"]],null,null,null,uu.b,uu.a)),e.pb(166,114688,null,0,eu.a,[lu.a],{name:[0,"name"],path:[1,"path"],label:[2,"label"],hidden:[3,"hidden"],datatype:[4,"datatype"]},null),(l()(),e.qb(167,0,null,null,1,"eg-grid-column",[["label","Last Inventory Workstation"],["name","latest_inventory.inventory_workstation.name"],["path","copy.latest_inventory.inventory_workstation.name"]],null,null,null,uu.b,uu.a)),e.pb(168,114688,null,0,eu.a,[lu.a],{name:[0,"name"],path:[1,"path"],label:[2,"label"],hidden:[3,"hidden"]},null)],(function(l,n){var u=n.component;l(n,23,0,u.contextOrg),l(n,27,0),l(n,29,0),l(n,31,0),l(n,33,0),l(n,35,0),l(n,37,0),l(n,39,0),l(n,41,0),l(n,43,0),l(n,45,0),l(n,47,0,"No Target Selected","Please select a suitable transfer target"),l(n,50,0,u.gridDataSource,!1,"cat.holdings",u.rowClassCallback,!0,u.cellTextGenerator),l(n,52,0,"Show Call Numbers"),l(n,54,0,"Show Copies"),l(n,56,0,"Show Empty Call Numbers"),l(n,58,0,"Show Empty Libs"),l(n,60,0,"Print Labels"),l(n,62,0,"Request Items"),l(n,64,0,"Link as Conjoined to Marked Bib Record"),l(n,66,0,"Add Call Numbers","Add"),l(n,68,0,"Add Items","Add"),l(n,70,0,"Add Call Numbers and Items","Add"),l(n,72,0,"Add Item Alerts","Add"),l(n,74,0,"Add Items To Bucket","Add"),l(n,76,0,"Book Item Now","Booking"),l(n,78,0,"Make Items Bookable","Booking"),l(n,80,0,"Manage Reservations","Booking"),l(n,82,0,"Edit Call Numbers","Edit"),l(n,84,0,"Edit Call Numbers And Items","Edit"),l(n,86,0,"Edit Items","Edit"),l(n,88,0,"Edit Item Alerts","Edit"),l(n,90,0,"Replace Barcodes","Edit"),l(n,92,0,"Delete Empty Call Numbers","Delete"),l(n,94,0,"Delete Items","Delete"),l(n,96,0,"Delete Call Numbers and Items","Delete"),l(n,98,0,"Show Item Status (list)","Show"),l(n,100,0,"Show Item Status (detail)","Show"),l(n,102,0,"Show Item Holds","Show"),l(n,104,0,"Show Triggered Events","Show"),l(n,106,0,"Mark Item Damaged","Mark"),l(n,108,0,"Mark Item Missing","Mark"),l(n,110,0,"Mark Library/Call Number as Transfer Destination","Mark"),l(n,112,0,"Transfer Items to Marked Destination","Transfer"),l(n,114,0,"Transfer Holdings to Marked Destination","Transfer"),l(n,116,0,"index",!0,!0),l(n,118,0,"id","copy.id","Item ID",!0),l(n,120,0,"callNum.id","Call Number ID",!0),l(n,122,0,"owner_label","Location/Barcode",4,u.gridTemplateContext,e.Cb(n,24),!0),l(n,124,0,"callNumCount","Call Numbers","number"),l(n,126,0,"copyCount","Copies","number"),l(n,128,0,"call_number.label","callNum._label","Call Number"),l(n,130,0,"barcode","copy.barcode","Barcode"),l(n,132,0,"circ_lib.name","copy.circ_lib","Circ Library","org_unit"),l(n,134,0,"callNum.owning_lib","Owning Library","org_unit"),l(n,136,0,"circ.due_date","Due Date","timestamp"),l(n,138,0,"location.name","copy.location.name","Shelving Location"),l(n,140,0,"circ_modifier","copy.circ_modifier","Circulation Modifier"),l(n,142,0,"copy_number","copy.copy_number","Item Number",!0),l(n,144,0,"status_name","copy.status.name","Status"),l(n,146,0,"call_number.prefix.label","callNum.prefix.label","Call Number Prefix",!0),l(n,148,0,"call_number.suffix.label","callNum.suffix.label","Call Number Suffix",!0),l(n,150,0,"copy.active_date","Active/Create Date","timestamp"),l(n,152,0,"age_protect.name","copy.age_protect.name","Age Hold Protection"),l(n,154,0,"price","copy.price","Item Price",!0),l(n,156,0,"circulate","copy.circulate","Circulate",!0,"bool"),l(n,158,0,"deposit","copy.deposit","Deposit",!0,"bool"),l(n,160,0,"deposit_amount","copy.deposit_amount","Deposit Amount",!0,"money"),l(n,162,0,"holdable","Holdable?",u.gridTemplateContext,e.Cb(n,25)),l(n,164,0,"ref","copy.ref","Reference?",!0,"bool"),l(n,166,0,"latest_inventory.inventory_date","copy.latest_inventory.inventory_date","Last Inventory Date",!0,"timestamp"),l(n,168,0,"latest_inventory.inventory_workstation.name","copy.latest_inventory.inventory_workstation.name","Last Inventory Workstation",!0)}),null)}class qa{constructor(l,n,u,e){this.idl=l,this.org=n,this.pcrud=u,this.perm=e,this.gridDataSource=new ou.c,this.idsToUnlink=[]}ngOnInit(){this.perm.hasWorkPermHere(["UPDATE_COPY"]).then(l=>this.hasPerm=l.UPDATE_COPY),this.gridDataSource.getRows=(l,n)=>{const u={};return u.bmp=n.length?n[0].name+" "+n[0].dir:"id",this.pcrud.search("bpbcm",{peer_record:this.recordId},{offset:l.offset,limit:l.limit,order_by:u},{fleshSelectors:!0})}}unlink(l){return Object(Ru.a)(this,void 0,void 0,(function*(){this.idsToUnlink=l.map(l=>l.target_copy().id()),0!==this.idsToUnlink.length&&this.confirmUnlink.open({size:"sm"}).subscribe(l=>{if(!l)return;const n=[];this.pcrud.search("bpbcm",{target_copy:this.idsToUnlink,peer_record:this.recordId}).subscribe(l=>n.push(l),l=>{},()=>{this.pcrud.remove(n).subscribe(l=>console.debug("deleted map ",l),l=>console.error(l),()=>{this.idsToUnlink=[],this.grid.reload()})})})}))}openConjoinedDialog(){this.conjoinedDialog.open({size:"sm"}).subscribe(l=>{l&&this.grid.reload()})}}var ka=e.ob({encapsulation:2,styles:[],data:{}});function Ia(l){return e.Mb(0,[e.Ib(402653184,1,{grid:0}),e.Ib(402653184,2,{conjoinedDialog:0}),e.Ib(402653184,3,{confirmUnlink:0}),(l()(),e.qb(3,0,null,null,1,"eg-conjoined-items-dialog",[],null,null,null,zt,Vt)),e.pb(4,245760,[[2,4],["conjoinedDialog",4]],0,$t,[b.E,W.a,J.a,Pn.a,g.a],{modifyAll:[0,"modifyAll"],peerRecord:[1,"peerRecord"]},null),(l()(),e.qb(5,0,null,null,1,"eg-confirm-dialog",[["dialogTitle","Confirm Unlink"]],null,null,null,v.b,v.a)),e.pb(6,114688,[[3,4],["confirmUnlink",4]],0,y.a,[b.E],{dialogTitle:[0,"dialogTitle"],dialogBody:[1,"dialogBody"]},null),(l()(),e.qb(7,0,null,null,6,"div",[["class","mt-3"]],null,null,null,null,null)),(l()(),e.qb(8,0,null,null,5,"eg-grid",[["class","mt-3"],["idlClass","bpbcm"],["persistKey","catalog.record.conjoined"]],null,null,null,Xn.b,Xn.a)),e.pb(9,4440064,[[1,4],["conjoinedGrid",4]],0,lu.a,[J.a,m.a,_.a,nu.a],{dataSource:[0,"dataSource"],idlClass:[1,"idlClass"],sortable:[2,"sortable"],persistKey:[3,"persistKey"]},null),(l()(),e.qb(10,0,null,null,1,"eg-grid-toolbar-button",[["label","Change Type"]],null,[[null,"onClick"]],(function(l,n,u){var e=!0;return"onClick"===n&&(e=!1!==l.component.openConjoinedDialog()&&e),e}),mt.b,mt.a)),e.pb(11,114688,null,0,ft.a,[lu.a],{label:[0,"label"],disabled:[1,"disabled"]},{onClick:"onClick"}),(l()(),e.qb(12,0,null,null,1,"eg-grid-toolbar-action",[["label","Unlink"]],null,[[null,"onClick"]],(function(l,n,u){var e=!0;return"onClick"===n&&(e=!1!==l.component.unlink(u)&&e),e}),Au.b,Au.a)),e.pb(13,114688,null,0,Fu.a,[lu.a],{label:[0,"label"],disabled:[1,"disabled"]},{onClick:"onClick"})],(function(l,n){var u=n.component;l(n,4,0,!0,u.recordId),l(n,6,0,"Confirm Unlink",e.ub(1,"Unlink ",u.idsToUnlink.length," Items?")),l(n,9,0,u.gridDataSource,"bpbcm",!0,"catalog.record.conjoined"),l(n,11,0,"Change Type",!u.hasPerm),l(n,13,0,"Unlink",!u.hasPerm)}),null)}class _a{constructor(l,n,u,e,t,a,o,i){this.router=l,this.route=n,this.org=u,this.pcrud=e,this.cat=t,this.bib=a,this.catUrl=o,this.staffCat=i,this.rowCount=5,this.rowIndexList=[],this.colCount=3,this.results=[]}ngOnInit(){this.searchContext=this.staffCat.searchContext;for(let n=0;n<this.rowCount;n++)this.rowIndexList.push(n);let l=Promise.resolve();this.bibSummary&&(l=this.getBrowseCallnumber()),l.then(l=>{this.routeSub=this.route.queryParamMap.subscribe(l=>this.browseByUrl(l))})}ngOnDestroy(){this.routeSub.unsubscribe()}getBrowseCallnumber(){let l=this.searchContext.searchOrg.id();return"f"===this.searchContext.searchOrg.ou_type().can_have_vols()&&(l=this.org.descendants(this.searchContext.searchOrg,!0)),this.pcrud.search("acn",{record:this.bibSummary.id,owning_lib:l},{limit:1}).toPromise().then(l=>this.browseCn=l?l.label():this.bibSummary.bibCallNumber)}browseByUrl(l){this.catUrl.applyUrlParams(this.searchContext,l),this.getBrowseResults()}getBrowseResults(){const l=this.searchContext.cnBrowseSearch;l.limit=this.rowCount*this.colCount,this.browseCn&&(l.value=this.browseCn),l.isSearchable()&&(this.results=[],this.cat.cnBrowse(this.searchContext).subscribe(l=>this.processResults(l)))}processResults(l){this.results=l;const n=this.searchContext.global?this.searchContext.org.root().ou_type().depth():this.searchContext.searchOrg.ou_type().depth(),u=this.results.map(l=>l.record().id()),e=[];this.bib.getBibSummary(u.filter((l,n,u)=>u.indexOf(l)===n),this.searchContext.searchOrg.id(),n).subscribe(l=>{const n=this.results.filter(n=>Number(n.record().id())===l.id);e.push(l.record),n.forEach(n=>n._bibSummary=l)},l=>{},()=>{this.bib.fleshBibUsers(e)})}browseIsDone(){return this.searchContext.searchState===S.c.COMPLETE}browseIsActive(){return this.searchContext.searchState===S.c.SEARCHING}browseHasResults(){return this.browseIsDone()&&this.results.length>0}prevPage(){this.searchContext.cnBrowseSearch.offset--,this.bibSummary?this.getBrowseResults():this.staffCat.cnBrowse()}nextPage(){this.searchContext.cnBrowseSearch.offset++,this.bibSummary?this.getBrowseResults():this.staffCat.cnBrowse()}navigateToRecord(l){const n=this.catUrl.toUrlParams(this.searchContext);this.router.navigate(["/staff/catalog/record/"+l.id],{queryParams:n})}resultSlice(l){const n=l*this.colCount;return this.results.slice(n,n+this.colCount)}isCenter(l,n){return Math.floor(this.rowCount*this.colCount/2)===l*this.colCount+n}orgName(l){return this.org.get(l).shortname()}getAuthorSearchParams(l){return this.staffCat.getAuthorSearchParams(l)}}var wa=e.ob({encapsulation:2,styles:[],data:{}});function xa(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,5,"div",[["class","row"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,4,"div",[["class","col-lg-6 offset-lg-3 pt-3"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,3,"div",[["class","progress"]],null,null,null,null,null)),(l()(),e.qb(3,0,null,null,2,"div",[["aria-valuemax","100"],["aria-valuemin","0"],["aria-valuenow","100"],["class","progress-bar progress-bar-striped active w-100"],["role","progressbar"]],null,null,null,null,null)),(l()(),e.qb(4,0,null,null,1,"span",[["class","sr-only"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Searching.."]))],null,null)}function Ma(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,5,"div",[],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,4,"div",[["class","row pt-3"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,3,"div",[["class","col-lg-6 offset-lg-3"]],null,null,null,null,null)),(l()(),e.qb(3,0,null,null,2,"div",[["class","alert alert-warning"]],null,null,null,null,null)),(l()(),e.qb(4,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["No Maching Items Were Found"]))],null,null)}function Sa(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,17,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,16,"div",[["class","col-lg-4 pt-2 d-flex border"]],null,null,null,null,null)),e.Hb(512,null,c.N,c.O,[e.r,e.s,e.k,e.C]),e.pb(3,278528,null,0,c.n,[c.N],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),e.Fb(4,{"border-primary":0}),(l()(),e.qb(5,0,null,null,10,"div",[["class","flex-1"]],null,null,null,null,null)),(l()(),e.qb(6,0,null,null,1,"div",[["class","font-weight-bold"]],null,null,null,null,null)),(l()(),e.Kb(7,null,[" "," "," "," @ "," "])),(l()(),e.qb(8,0,null,null,3,"div",[],null,null,null,null,null)),(l()(),e.qb(9,0,null,null,2,"a",[["queryParamsHandling","merge"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Cb(l,10).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.pb(10,671744,null,0,C.n,[C.l,C.a,c.m],{queryParamsHandling:[0,"queryParamsHandling"],routerLink:[1,"routerLink"]},null),(l()(),e.Kb(11,null,[" "," "])),(l()(),e.qb(12,0,null,null,3,"div",[],null,null,null,null,null)),(l()(),e.qb(13,0,null,null,2,"a",[["routerLink","/staff/catalog/search"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Cb(l,14).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.pb(14,671744,null,0,C.n,[C.l,C.a,c.m],{queryParams:[0,"queryParams"],routerLink:[1,"routerLink"]},null),(l()(),e.Kb(15,null,[" "," "])),(l()(),e.qb(16,0,null,null,1,"div",[["class","ml-2"]],null,null,null,null,null)),(l()(),e.qb(17,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null))],(function(l,n){var u=n.component,t=l(n,4,0,u.isCenter(n.parent.parent.context.$implicit,n.parent.context.index));l(n,3,0,"col-lg-4 pt-2 d-flex border",t),l(n,10,0,"merge",e.ub(1,"/staff/catalog/record/",n.parent.context.$implicit._bibSummary.id,"")),l(n,14,0,u.getAuthorSearchParams(n.parent.context.$implicit._bibSummary),"/staff/catalog/search")}),(function(l,n){var u=n.component,t=n.parent.context.$implicit.prefix().label(),a=n.parent.context.$implicit.label(),o=n.parent.context.$implicit.suffix().label(),i=u.orgName(n.parent.context.$implicit.owning_lib());l(n,7,0,t,a,o,i),l(n,9,0,e.Cb(n,10).target,e.Cb(n,10).href),l(n,11,0,n.parent.context.$implicit._bibSummary.display.title),l(n,13,0,e.Cb(n,14).target,e.Cb(n,14).href),l(n,15,0,n.parent.context.$implicit._bibSummary.display.author),l(n,17,0,e.ub(1,"/opac/extras/ac/jacket/small/r/",n.parent.context.$implicit._bibSummary.id,""))}))}function Ta(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,Sa)),e.pb(2,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(0,null,null,0))],(function(l,n){l(n,2,0,n.context.$implicit._bibSummary)}),null)}function Ka(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,"div",[["class","row mb-3"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,Ta)),e.pb(2,278528,null,0,c.o,[e.N,e.K,e.r],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,2,0,n.component.resultSlice(n.context.$implicit))}),null)}function Da(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,Ka)),e.pb(2,278528,null,0,c.o,[e.N,e.K,e.r],{ngForOf:[0,"ngForOf"]},null),(l()(),e.fb(0,null,null,0))],(function(l,n){l(n,2,0,n.component.rowIndexList)}),null)}function Na(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,16,"div",[["id","staff-catalog-browse-results-container"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,6,"div",[["class","row mb-2 d-flex"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,0,"div",[["class","flex-1"]],null,null,null,null,null)),(l()(),e.qb(3,0,null,null,4,"div",[],null,null,null,null,null)),(l()(),e.qb(4,0,null,null,1,"button",[["class","btn btn-primary"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.prevPage()&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Back"])),(l()(),e.qb(6,0,null,null,1,"button",[["class","btn btn-primary ml-3"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.nextPage()&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Next"])),(l()(),e.fb(16777216,null,null,1,null,Da)),e.pb(9,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(10,0,null,null,6,"div",[["class","row mb-2 d-flex"]],null,null,null,null,null)),(l()(),e.qb(11,0,null,null,0,"div",[["class","flex-1"]],null,null,null,null,null)),(l()(),e.qb(12,0,null,null,4,"div",[],null,null,null,null,null)),(l()(),e.qb(13,0,null,null,1,"button",[["class","btn btn-primary"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.prevPage()&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Back"])),(l()(),e.qb(15,0,null,null,1,"button",[["class","btn btn-primary ml-3"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.nextPage()&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Next"]))],(function(l,n){var u=n.component;l(n,9,0,u.results&&u.results.length)}),null)}function Pa(l){return e.Mb(0,[(l()(),e.fb(16777216,null,null,1,null,xa)),e.pb(1,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,Ma)),e.pb(3,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,Na)),e.pb(5,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component;l(n,1,0,u.browseIsActive()),l(n,3,0,u.browseIsDone()&&!u.browseHasResults()),l(n,5,0,u.browseHasResults())}),null)}class Ha{constructor(l,n){this.sanitizer=l,this.renderer=n}set recordId(l){l&&(l+"").match(/^\d+$/)?(this._recordId=l,this.url=this.sanitizer.bypassSecurityTrustResourceUrl(`/eg/opac/record/${l}?readonly=1`)):(this._recordId=null,this.url=null)}get recordId(){return this._recordId}handleLoad(){const l=this.renderer.selectRootElement("#opac-iframe");l.style.height=50+l.contentWindow.document.body.offsetHeight+"px",this.loaded=!0}}var Aa=e.ob({encapsulation:2,styles:[],data:{}});function Fa(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,"div",[["class","m-3 p-3 d-flex justify-content-center"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,0,"img",[["src","/images/progressbar_green.gif"]],null,null,null,null,null))],null,null)}function Oa(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,0,"iframe",[["class","w-100"],["id","opac-iframe"]],[[8,"src",5]],[[null,"load"]],(function(l,n,u){var e=!0;return"load"===n&&(e=!1!==l.component.handleLoad()&&e),e}),null,null))],null,(function(l,n){l(n,1,0,n.component.url)}))}function Ea(l){return e.Mb(0,[(l()(),e.fb(16777216,null,null,1,null,Fa)),e.pb(1,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,Oa)),e.pb(3,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component;l(n,1,0,!u.loaded),l(n,3,0,u.url)}),null)}class Ra{constructor(l,n,u,e){this.bib=l,this.org=n,this.store=u,this.cat=e,this.initDone=!1}set expand(l){this._exp=l,this.initDone&&this.saveExpandState()}get expand(){return this._exp}set bibSummary(l){this.summary=l,this.initDone&&this.summary&&this.summary.getBibCallNumber()}ngOnInit(){this.summary?this.summary.getBibCallNumber():this.recordId&&this.loadSummary(),this.store.getItem("eg.cat.record.summary.collapse").then(l=>this.expand=!l).then(()=>this.initDone=!0)}saveExpandState(){this.store.setItem("eg.cat.record.summary.collapse",!this.expand)}loadSummary(){this.bib.getBibSummary(this.recordId).toPromise().then(l=>{l.getBibCallNumber(),this.bib.fleshBibUsers([l.record]),this.summary=l})}orgName(l){if(l)return this.org.get(l).shortname()}iconFormatLabel(l){return this.cat.iconFormatLabel(l)}}var Ba=e.ob({encapsulation:0,styles:[[".eg-bib-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:.25rem .5rem}.jacket[_ngcontent-%COMP%]{padding:3px;width:100%}"]],data:{}});function La(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,4,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,3,"span",[["class","pr-1 pl-2"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,0,"img",[["class","pr-1"]],[[8,"src",4]],null,null,null,null)),(l()(),e.qb(3,0,null,null,1,"span",[["class","font-weight-normal"]],null,null,null,null,null)),(l()(),e.Kb(4,null,["",""]))],null,(function(l,n){var u=n.component;l(n,2,0,e.ub(1,"/images/format_icons/icon_format/",n.context.$implicit,".png")),l(n,4,0,u.iconFormatLabel(n.context.$implicit))}))}function Ua(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,La)),e.pb(2,278528,null,0,c.o,[e.N,e.K,e.r],{ngForOf:[0,"ngForOf"]},null),(l()(),e.fb(0,null,null,0))],(function(l,n){l(n,2,0,n.component.summary.attributes.icon_format)}),null)}function ja(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,"a",[["class","with-material-icon no-href text-primary"],["title","Show More"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=0!=(l.component.expand=!0)&&e),e}),null,null)),(l()(),e.qb(1,0,null,null,1,"span",[["class","material-icons"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["expand_more"]))],null,null)}function $a(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,"a",[["class","with-material-icon no-href text-primary"],["title","Show Less"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=0!=(l.component.expand=!1)&&e),e}),null,null)),(l()(),e.qb(1,0,null,null,1,"span",[["class","material-icons"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["expand_less"]))],null,null)}function Va(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,3,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,2,"div",[["class","col-lg-1 pr-0"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,1,"a",[],[[8,"href",4]],null,null,null,null)),(l()(),e.qb(3,0,null,null,0,"img",[["alt","Jacket Image"],["class","jacket jacket-medium"]],[[8,"src",4]],null,null,null,null))],null,(function(l,n){var u=n.component;l(n,2,0,e.ub(1,"/opac/extras/ac/jacket/large/r/",u.summary.id,"")),l(n,3,0,e.ub(1,"/opac/extras/ac/jacket/medium/r/",u.summary.id,""))}))}function Ga(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,"div",[["class","flex-1"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"a",[],[[8,"href",4]],null,null,null,null)),(l()(),e.Kb(2,null,[" "," "]))],null,(function(l,n){var u=n.component;l(n,1,0,e.ub(1,"/eg/staff/circ/patron/",u.summary.record.creator().id(),"/checkout")),l(n,2,0,u.summary.record.creator().usrname())}))}function za(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,"div",[["class","flex-1"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"a",[],[[8,"href",4]],null,null,null,null)),(l()(),e.Kb(2,null,[" "," "]))],null,(function(l,n){var u=n.component;l(n,1,0,e.ub(1,"/eg/staff/circ/patron/",u.summary.record.editor().id(),"/checkout")),l(n,2,0,u.summary.record.editor().usrname())}))}function Wa(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,17,"li",[["class","list-group-item"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,16,"div",[["class","d-flex"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,1,"div",[["class","flex-1 font-weight-bold"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Author:"])),(l()(),e.qb(4,0,null,null,1,"div",[["class","flex-3"]],null,null,null,null,null)),(l()(),e.Kb(5,null,["",""])),(l()(),e.qb(6,0,null,null,1,"div",[["class","flex-1 font-weight-bold pl-1"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Pubdate:"])),(l()(),e.qb(8,0,null,null,1,"div",[["class","flex-1"]],null,null,null,null,null)),(l()(),e.Kb(9,null,["",""])),(l()(),e.qb(10,0,null,null,1,"div",[["class","flex-1 font-weight-bold"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Database ID:"])),(l()(),e.qb(12,0,null,null,1,"div",[["class","flex-1"]],null,null,null,null,null)),(l()(),e.Kb(13,null,["",""])),(l()(),e.qb(14,0,null,null,1,"div",[["class","flex-1 font-weight-bold pl-1"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Last Edited By:"])),(l()(),e.fb(16777216,null,null,1,null,za)),e.pb(17,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,17,0,n.component.summary.record.editor().usrname)}),(function(l,n){var u=n.component;l(n,5,0,u.summary.display.author),l(n,9,0,u.summary.display.pubdate),l(n,13,0,u.summary.id)}))}function Ja(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,19,"li",[["class","list-group-item"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,18,"div",[["class","d-flex"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,1,"div",[["class","flex-1 font-weight-bold"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Bib Call #:"])),(l()(),e.qb(4,0,null,null,1,"div",[["class","flex-3"]],null,null,null,null,null)),(l()(),e.Kb(5,null,["",""])),(l()(),e.qb(6,0,null,null,1,"div",[["class","flex-1 font-weight-bold"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Record Owner:"])),(l()(),e.qb(8,0,null,null,1,"div",[["class","flex-1"]],null,null,null,null,null)),(l()(),e.Kb(9,null,["",""])),(l()(),e.qb(10,0,null,null,1,"div",[["class","flex-1 font-weight-bold pl-1"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Created On:"])),(l()(),e.qb(12,0,null,null,2,"div",[["class","flex-1"]],null,null,null,null,null)),(l()(),e.Kb(13,null,["",""])),e.Gb(14,2),(l()(),e.qb(15,0,null,null,1,"div",[["class","flex-1 font-weight-bold pl-1"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Last Edited On:"])),(l()(),e.qb(17,0,null,null,2,"div",[["class","flex-1"]],null,null,null,null,null)),(l()(),e.Kb(18,null,["",""])),e.Gb(19,2)],null,(function(l,n){var u=n.component;l(n,5,0,u.summary.bibCallNumber),l(n,9,0,u.orgName(u.summary.record.owner()));var t=e.Lb(n,13,0,l(n,14,0,e.Cb(n.parent.parent,0),u.summary.record.create_date(),"short"));l(n,13,0,t);var a=e.Lb(n,18,0,l(n,19,0,e.Cb(n.parent.parent,0),u.summary.record.edit_date(),"short"));l(n,18,0,a)}))}function Qa(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,43,"div",[["class","eg-bib-summary card tight-card w-100"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,10,"div",[["class","card-header d-flex"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,3,"div",[["class","font-weight-bold"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,[" Record Summary "])),(l()(),e.fb(16777216,null,null,1,null,Ua)),e.pb(5,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(6,0,null,null,0,"div",[["class","flex-1"]],null,null,null,null,null)),(l()(),e.qb(7,0,null,null,4,"div",[],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,ja)),e.pb(9,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,$a)),e.pb(11,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(12,0,null,null,31,"div",[["class","row"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,Va)),e.pb(14,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(15,0,null,null,28,"div",[],null,null,null,null,null)),e.Hb(512,null,c.N,c.O,[e.r,e.s,e.k,e.C]),e.pb(17,278528,null,0,c.n,[c.N],{ngClass:[0,"ngClass"]},null),e.Fb(18,{"col-lg-11 pl-0":0,"col-lg-12":1}),(l()(),e.qb(19,0,null,null,24,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),e.qb(20,0,null,null,23,"ul",[["class","list-group list-group-flush"]],null,null,null,null,null)),(l()(),e.qb(21,0,null,null,18,"li",[["class","list-group-item"]],null,null,null,null,null)),(l()(),e.qb(22,0,null,null,17,"div",[["class","d-flex"]],null,null,null,null,null)),(l()(),e.qb(23,0,null,null,1,"div",[["class","flex-1 font-weight-bold"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Title:"])),(l()(),e.qb(25,0,null,null,2,"div",[["class","flex-3"]],null,null,null,null,null)),(l()(),e.qb(26,0,null,null,1,"eg-bib-display-field",[["field","title"]],null,null,null,en,ln)),e.pb(27,114688,null,0,Xl,[],{summary:[0,"summary"],field:[1,"field"]},null),(l()(),e.qb(28,0,null,null,1,"div",[["class","flex-1 font-weight-bold pl-1"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Edition:"])),(l()(),e.qb(30,0,null,null,1,"div",[["class","flex-1"]],null,null,null,null,null)),(l()(),e.Kb(31,null,["",""])),(l()(),e.qb(32,0,null,null,1,"div",[["class","flex-1 font-weight-bold"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["TCN:"])),(l()(),e.qb(34,0,null,null,1,"div",[["class","flex-1"]],null,null,null,null,null)),(l()(),e.Kb(35,null,["",""])),(l()(),e.qb(36,0,null,null,1,"div",[["class","flex-1 font-weight-bold pl-1"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Created By:"])),(l()(),e.fb(16777216,null,null,1,null,Ga)),e.pb(39,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,Wa)),e.pb(41,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,Ja)),e.pb(43,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component;l(n,5,0,u.summary.attributes.icon_format&&u.summary.attributes.icon_format[0]),l(n,9,0,!u.expand),l(n,11,0,u.expand),l(n,14,0,u.expand);var e=l(n,18,0,u.expand,!u.expand);l(n,17,0,e),l(n,27,0,u.summary,"title"),l(n,39,0,u.summary.record.creator().usrname),l(n,41,0,u.expand),l(n,43,0,u.expand)}),(function(l,n){var u=n.component;l(n,31,0,u.summary.display.edition),l(n,35,0,u.summary.record.tcn_value())}))}function Za(l){return e.Mb(0,[e.Eb(0,c.f,[e.t]),(l()(),e.fb(16777216,null,null,1,null,Qa)),e.pb(2,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,2,0,n.component.summary)}),null)}class Ya{constructor(l,n,u,e){this.router=l,this.cat=n,this.catUrl=u,this.staffCat=e,this.initDone=!1}set recordTab(l){this._recordTab=l}get recordTab(){return this._recordTab}set recordId(l){this.id=l,this.initDone&&this.setIndex()}ngOnInit(){this.initDone=!0,this.setIndex()}routeToRecord(l){let n="/staff/catalog/record/"+l;this.recordTab&&(n+="/"+this.recordTab);const u=this.catUrl.toUrlParams(this.searchContext);this.router.navigate([n],{queryParams:u})}firstRecord(){this.findRecordAtIndex(0).then(l=>this.routeToRecord(l))}lastRecord(){this.findRecordAtIndex(this.searchContext.result.count-1).then(l=>this.routeToRecord(l))}nextRecord(){this.findRecordAtIndex(this.index+1).then(l=>this.routeToRecord(l))}prevRecord(){this.findRecordAtIndex(this.index-1).then(l=>this.routeToRecord(l))}searchIndex(l){return l+this.searchContext.pager.offset}setIndex(){return this.searchContext=this.staffCat.searchContext,this.index=null,new Promise((l,n)=>(this.index=this.searchContext.indexForResult(this.id),null!==this.index?l():this.refreshSearch().then(n=>{this.index=this.searchContext.indexForResult(this.id),l()})))}findRecordAtIndex(l){return new Promise((n,u)=>{const e=this.searchContext.resultIdAt(l);return e?n(e):(console.debug("Record paginator unable to find record at index "+l),this.refreshSearch(l+2).then(e=>{const t=this.searchContext.resultIdAt(l);t?n(t):u("no record found")}))})}refreshSearch(l){if(console.debug("paginator refreshing search"),!this.searchContext.isSearchable())return Promise.resolve();const n=this.searchContext,u=n.pager,e=new nt.a;return e.limit=l||1e3,n.pager=e,n.getHighlightsFor=this.id,this.cat.search(n).then(l=>{n.pager=u,n.getHighlightsFor=null})}returnToSearch(){this.staffCat.search()}}var Xa=e.ob({encapsulation:2,styles:[],data:{}});function lo(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,32,"ul",[["class","pagination mb-0"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,6,"li",[["class","page-item"]],null,null,null,null,null)),e.Hb(512,null,c.N,c.O,[e.r,e.s,e.k,e.C]),e.pb(3,278528,null,0,c.n,[c.N],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),e.Fb(4,{disabled:0}),(l()(),e.qb(5,0,null,null,2,"a",[["aria-label","Start"],["class","no-href page-link"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.firstRecord()&&e),e}),null,null)),(l()(),e.qb(6,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Start"])),(l()(),e.qb(8,0,null,null,6,"li",[["class","page-item"]],null,null,null,null,null)),e.Hb(512,null,c.N,c.O,[e.r,e.s,e.k,e.C]),e.pb(10,278528,null,0,c.n,[c.N],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),e.Fb(11,{disabled:0}),(l()(),e.qb(12,0,null,null,2,"a",[["aria-label","Previous"],["class","no-href page-link"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.prevRecord()&&e),e}),null,null)),(l()(),e.qb(13,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Previous"])),(l()(),e.qb(15,0,null,null,6,"li",[["class","page-item"]],null,null,null,null,null)),e.Hb(512,null,c.N,c.O,[e.r,e.s,e.k,e.C]),e.pb(17,278528,null,0,c.n,[c.N],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),e.Fb(18,{disabled:0}),(l()(),e.qb(19,0,null,null,2,"a",[["aria-label","Next"],["class","no-href page-link"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.nextRecord()&&e),e}),null,null)),(l()(),e.qb(20,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Next"])),(l()(),e.qb(22,0,null,null,6,"li",[["class","page-item"]],null,null,null,null,null)),e.Hb(512,null,c.N,c.O,[e.r,e.s,e.k,e.C]),e.pb(24,278528,null,0,c.n,[c.N],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),e.Fb(25,{disabled:0}),(l()(),e.qb(26,0,null,null,2,"a",[["aria-label","End"],["class","no-href page-link"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.lastRecord()&&e),e}),null,null)),(l()(),e.qb(27,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["End"])),(l()(),e.qb(29,0,null,null,3,"li",[["class","page-item"]],null,null,null,null,null)),(l()(),e.qb(30,0,null,null,2,"a",[["aria-label","Back to Results"],["class","no-href page-link"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.returnToSearch()&&e),e}),null,null)),(l()(),e.qb(31,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Kb(32,null,[" Back to Results ("," / ",") "]))],(function(l,n){var u=n.component,e=l(n,4,0,0==u.index);l(n,3,0,"page-item",e);var t=l(n,11,0,0==u.index);l(n,10,0,"page-item",t);var a=l(n,18,0,u.index>=u.searchContext.result.count-1);l(n,17,0,"page-item",a);var o=l(n,25,0,u.index>=u.searchContext.result.count-1);l(n,24,0,"page-item",o)}),(function(l,n){var u=n.component;l(n,32,0,u.index+1,u.searchContext.result.count)}))}function no(l){return e.Mb(0,[(l()(),e.fb(16777216,null,null,1,null,lo)),e.pb(1,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,1,0,null!==n.component.index)}),null)}class uo{constructor(l,n,u,t,a,o,i,r){this.router=l,this.store=n,this.strings=u,this.toast=t,this.cat=a,this.catUrl=o,this.staffCat=i,this.holdings=r,this.addHoldingsRequested=new e.m,this.initDone=!1,this.targets={conjoined:{key:"eg.cat.marked_conjoined_record",current:null},overlay:{key:"eg.cat.marked_overlay_record",current:null},holdTransfer:{key:"eg.circ.hold.title_transfer_target",current:null},holdingTransfer:{key:"eg.cat.transfer_target_record",current:null,clear:["eg.cat.transfer_target_lib","eg.cat.transfer_target_vol"]}}}set recordId(l){this.recId=l}ngOnInit(){this.initDone=!0,Object.keys(this.targets).forEach(l=>{const n=this.targets[l];n.current=this.store.getLocalItem(n.key)})}mark(l){const n=this.targets[l];n.current=this.recId,this.store.setLocalItem(n.key,this.recId),n.clear&&n.clear.forEach(l=>this.store.removeLocalItem(l)),this.strings.interpolate("catalog.record.toast."+l).then(l=>this.toast.success(l))}clearMarks(){Object.keys(this.targets).forEach(l=>{const n=this.targets[l];n.current=null,this.store.removeLocalItem(n.key)}),this.strings.interpolate("catalog.record.toast.cleared").then(l=>this.toast.success(l))}addHoldings(){this.addHoldingsRequested.emit()}}var eo=e.ob({encapsulation:2,styles:[],data:{}});function to(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,null,null,null,null,null,null,null)),(l()(),e.Kb(1,null,[" (Currently ",")"]))],null,(function(l,n){l(n,1,0,n.component.targets.conjoined.current)}))}function ao(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,null,null,null,null,null,null,null)),(l()(),e.Kb(1,null,[" (Currently ",")"]))],null,(function(l,n){l(n,1,0,n.component.targets.overlay.current)}))}function oo(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,null,null,null,null,null,null,null)),(l()(),e.Kb(1,null,[" (Currently ",")"]))],null,(function(l,n){l(n,1,0,n.component.targets.holdTransfer.current)}))}function io(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,null,null,null,null,null,null,null)),(l()(),e.Kb(1,null,[" (Currently ",")"]))],null,(function(l,n){l(n,1,0,n.component.targets.holdingTransfer.current)}))}function ro(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,"eg-string",[["key","catalog.record.toast.conjoined"],["text","Conjoined Record Target Set"]],null,null,null,q.b,q.a)),e.pb(1,114688,null,0,k.a,[e.k,I.a],{key:[0,"key"],text:[1,"text"]},null),(l()(),e.qb(2,0,null,null,1,"eg-string",[["key","catalog.record.toast.overlay"],["text","Record Overlay Target Set"]],null,null,null,q.b,q.a)),e.pb(3,114688,null,0,k.a,[e.k,I.a],{key:[0,"key"],text:[1,"text"]},null),(l()(),e.qb(4,0,null,null,1,"eg-string",[["key","catalog.record.toast.holdTransfer"],["text","Hold Transfer Target Set"]],null,null,null,q.b,q.a)),e.pb(5,114688,null,0,k.a,[e.k,I.a],{key:[0,"key"],text:[1,"text"]},null),(l()(),e.qb(6,0,null,null,1,"eg-string",[["key","catalog.record.toast.holdingTransfer"],["text","Holding Transfer Target Set"]],null,null,null,q.b,q.a)),e.pb(7,114688,null,0,k.a,[e.k,I.a],{key:[0,"key"],text:[1,"text"]},null),(l()(),e.qb(8,0,null,null,1,"eg-string",[["key","catalog.record.toast.cleared"],["text","Record Marks Cleared"]],null,null,null,q.b,q.a)),e.pb(9,114688,null,0,k.a,[e.k,I.a],{key:[0,"key"],text:[1,"text"]},null),(l()(),e.qb(10,0,null,null,2,"eg-bucket-dialog",[["bucketClass","biblio"]],null,null,null,G.b,G.a)),e.pb(11,114688,[["recordBucketDialog",4]],0,z.a,[b.E,e.C,W.a,J.a,Q.b,Z.a,h.a],{bucketClass:[0,"bucketClass"],itemIds:[1,"itemIds"]},null),e.Db(12,1),(l()(),e.qb(13,0,null,null,76,"div",[["class","row ml-0 mr-0"]],null,null,null,null,null)),(l()(),e.qb(14,0,null,null,4,"a",[["routerLink","/staff/catalog/hold/T"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Cb(l,15).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.pb(15,671744,null,0,C.n,[C.l,C.a,c.m],{queryParams:[0,"queryParams"],routerLink:[1,"routerLink"]},null),e.Fb(16,{target:0}),(l()(),e.qb(17,0,null,null,1,"button",[["class","btn btn-outline-primary ml-1"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Place Hold"])),(l()(),e.qb(19,0,null,null,1,"button",[["class","btn btn-outline-primary ml-1"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.addHoldings()&&e),e}),null,null)),(l()(),e.Kb(-1,null,[" Add Holdings "])),(l()(),e.qb(21,0,null,null,15,"div",[["class","ml-1"],["ngbDropdown",""],["placement","bottom-right"]],[[2,"show",null]],null,null,null,null)),e.pb(22,1720320,null,3,b.v,[e.h,b.x,c.e,e.y,e.k,e.C,[2,b.K]],{placement:[0,"placement"]},null),e.Ib(603979776,1,{_menu:0}),e.Ib(603979776,2,{_menuElement:0}),e.Ib(603979776,3,{_anchor:0}),(l()(),e.qb(26,0,null,null,3,"button",[["aria-haspopup","true"],["class","btn btn-outline-primary dropdown-toggle"],["id","actionsForSerials"],["ngbDropdownToggle",""]],[[1,"aria-expanded",0]],[[null,"click"],[null,"keydown.ArrowUp"],[null,"keydown.ArrowDown"],[null,"keydown.Home"],[null,"keydown.End"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Cb(l,27).dropdown.toggle()&&t),"keydown.ArrowUp"===n&&(t=!1!==e.Cb(l,27).dropdown.onKeyDown(u)&&t),"keydown.ArrowDown"===n&&(t=!1!==e.Cb(l,27).dropdown.onKeyDown(u)&&t),"keydown.Home"===n&&(t=!1!==e.Cb(l,27).dropdown.onKeyDown(u)&&t),"keydown.End"===n&&(t=!1!==e.Cb(l,27).dropdown.onKeyDown(u)&&t),t}),null,null)),e.pb(27,16384,null,0,b.A,[b.v,e.k],null,null),e.Hb(2048,[[3,4]],b.w,null,[b.A]),(l()(),e.Kb(-1,null,["Serials"])),(l()(),e.qb(30,0,[[2,0]],null,6,"div",[["aria-labelledby","actionsForSerials"],["ngbDropdownMenu",""]],[[2,"dropdown-menu",null],[2,"show",null],[1,"x-placement",0]],[[null,"keydown.ArrowUp"],[null,"keydown.ArrowDown"],[null,"keydown.Home"],[null,"keydown.End"],[null,"keydown.Enter"],[null,"keydown.Space"]],(function(l,n,u){var t=!0;return"keydown.ArrowUp"===n&&(t=!1!==e.Cb(l,31).dropdown.onKeyDown(u)&&t),"keydown.ArrowDown"===n&&(t=!1!==e.Cb(l,31).dropdown.onKeyDown(u)&&t),"keydown.Home"===n&&(t=!1!==e.Cb(l,31).dropdown.onKeyDown(u)&&t),"keydown.End"===n&&(t=!1!==e.Cb(l,31).dropdown.onKeyDown(u)&&t),"keydown.Enter"===n&&(t=!1!==e.Cb(l,31).dropdown.onKeyDown(u)&&t),"keydown.Space"===n&&(t=!1!==e.Cb(l,31).dropdown.onKeyDown(u)&&t),t}),null,null)),e.pb(31,16384,[[1,4]],1,b.y,[b.v],null,null),e.Ib(603979776,4,{menuItems:1}),(l()(),e.qb(33,0,null,null,1,"a",[["class","dropdown-item"]],[[8,"href",4]],null,null,null,null)),(l()(),e.Kb(-1,null,[" Manage Subscriptions "])),(l()(),e.qb(35,0,null,null,1,"a",[["class","dropdown-item"]],[[8,"href",4]],null,null,null,null)),(l()(),e.Kb(-1,null,[" Manage MFHDs "])),(l()(),e.qb(37,0,null,null,34,"div",[["class","ml-1"],["ngbDropdown",""],["placement","bottom-right"]],[[2,"show",null]],null,null,null,null)),e.pb(38,1720320,null,3,b.v,[e.h,b.x,c.e,e.y,e.k,e.C,[2,b.K]],{placement:[0,"placement"]},null),e.Ib(603979776,5,{_menu:0}),e.Ib(603979776,6,{_menuElement:0}),e.Ib(603979776,7,{_anchor:0}),(l()(),e.qb(42,0,null,null,3,"button",[["aria-haspopup","true"],["class","btn btn-outline-primary dropdown-toggle"],["id","actionsForDd"],["ngbDropdownToggle",""]],[[1,"aria-expanded",0]],[[null,"click"],[null,"keydown.ArrowUp"],[null,"keydown.ArrowDown"],[null,"keydown.Home"],[null,"keydown.End"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Cb(l,43).dropdown.toggle()&&t),"keydown.ArrowUp"===n&&(t=!1!==e.Cb(l,43).dropdown.onKeyDown(u)&&t),"keydown.ArrowDown"===n&&(t=!1!==e.Cb(l,43).dropdown.onKeyDown(u)&&t),"keydown.Home"===n&&(t=!1!==e.Cb(l,43).dropdown.onKeyDown(u)&&t),"keydown.End"===n&&(t=!1!==e.Cb(l,43).dropdown.onKeyDown(u)&&t),t}),null,null)),e.pb(43,16384,null,0,b.A,[b.v,e.k],null,null),e.Hb(2048,[[7,4]],b.w,null,[b.A]),(l()(),e.Kb(-1,null,["Mark For..."])),(l()(),e.qb(46,0,[[6,0]],null,25,"div",[["aria-labelledby","actionsForDd"],["ngbDropdownMenu",""]],[[2,"dropdown-menu",null],[2,"show",null],[1,"x-placement",0]],[[null,"keydown.ArrowUp"],[null,"keydown.ArrowDown"],[null,"keydown.Home"],[null,"keydown.End"],[null,"keydown.Enter"],[null,"keydown.Space"]],(function(l,n,u){var t=!0;return"keydown.ArrowUp"===n&&(t=!1!==e.Cb(l,47).dropdown.onKeyDown(u)&&t),"keydown.ArrowDown"===n&&(t=!1!==e.Cb(l,47).dropdown.onKeyDown(u)&&t),"keydown.Home"===n&&(t=!1!==e.Cb(l,47).dropdown.onKeyDown(u)&&t),"keydown.End"===n&&(t=!1!==e.Cb(l,47).dropdown.onKeyDown(u)&&t),"keydown.Enter"===n&&(t=!1!==e.Cb(l,47).dropdown.onKeyDown(u)&&t),"keydown.Space"===n&&(t=!1!==e.Cb(l,47).dropdown.onKeyDown(u)&&t),t}),null,null)),e.pb(47,16384,[[5,4]],1,b.y,[b.v],null,null),e.Ib(603979776,8,{menuItems:1}),(l()(),e.qb(49,0,null,null,4,"button",[["class","dropdown-item"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.mark("conjoined")&&e),e}),null,null)),(l()(),e.qb(50,0,null,null,3,"span",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,[" Conjoined Items"])),(l()(),e.fb(16777216,null,null,1,null,to)),e.pb(53,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(54,0,null,null,4,"button",[["class","dropdown-item"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.mark("overlay")&&e),e}),null,null)),(l()(),e.qb(55,0,null,null,3,"span",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,[" Overlay Target"])),(l()(),e.fb(16777216,null,null,1,null,ao)),e.pb(58,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(59,0,null,null,4,"button",[["class","dropdown-item"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.mark("holdTransfer")&&e),e}),null,null)),(l()(),e.qb(60,0,null,null,3,"span",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,[" Title Hold Transfer"])),(l()(),e.fb(16777216,null,null,1,null,oo)),e.pb(63,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(64,0,null,null,4,"button",[["class","dropdown-item"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.mark("holdingTransfer")&&e),e}),null,null)),(l()(),e.qb(65,0,null,null,3,"span",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,[" Holding Transfer"])),(l()(),e.fb(16777216,null,null,1,null,io)),e.pb(68,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(69,0,null,null,2,"button",[["class","dropdown-item"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.clearMarks()&&e),e}),null,null)),(l()(),e.qb(70,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Reset Record Marks"])),(l()(),e.qb(72,0,null,null,17,"div",[["class","ml-1"],["ngbDropdown",""],["placement","bottom-right"]],[[2,"show",null]],null,null,null,null)),e.pb(73,1720320,null,3,b.v,[e.h,b.x,c.e,e.y,e.k,e.C,[2,b.K]],{placement:[0,"placement"]},null),e.Ib(603979776,9,{_menu:0}),e.Ib(603979776,10,{_menuElement:0}),e.Ib(603979776,11,{_anchor:0}),(l()(),e.qb(77,0,null,null,3,"button",[["aria-haspopup","true"],["class","btn btn-outline-primary dropdown-toggle"],["id","otherActionsForDd"],["ngbDropdownToggle",""]],[[1,"aria-expanded",0]],[[null,"click"],[null,"keydown.ArrowUp"],[null,"keydown.ArrowDown"],[null,"keydown.Home"],[null,"keydown.End"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Cb(l,78).dropdown.toggle()&&t),"keydown.ArrowUp"===n&&(t=!1!==e.Cb(l,78).dropdown.onKeyDown(u)&&t),"keydown.ArrowDown"===n&&(t=!1!==e.Cb(l,78).dropdown.onKeyDown(u)&&t),"keydown.Home"===n&&(t=!1!==e.Cb(l,78).dropdown.onKeyDown(u)&&t),"keydown.End"===n&&(t=!1!==e.Cb(l,78).dropdown.onKeyDown(u)&&t),t}),null,null)),e.pb(78,16384,null,0,b.A,[b.v,e.k],null,null),e.Hb(2048,[[11,4]],b.w,null,[b.A]),(l()(),e.Kb(-1,null,["Other Actions"])),(l()(),e.qb(81,0,[[10,0]],null,8,"div",[["aria-labelledby","otherActionsForDd"],["ngbDropdownMenu",""]],[[2,"dropdown-menu",null],[2,"show",null],[1,"x-placement",0]],[[null,"keydown.ArrowUp"],[null,"keydown.ArrowDown"],[null,"keydown.Home"],[null,"keydown.End"],[null,"keydown.Enter"],[null,"keydown.Space"]],(function(l,n,u){var t=!0;return"keydown.ArrowUp"===n&&(t=!1!==e.Cb(l,82).dropdown.onKeyDown(u)&&t),"keydown.ArrowDown"===n&&(t=!1!==e.Cb(l,82).dropdown.onKeyDown(u)&&t),"keydown.Home"===n&&(t=!1!==e.Cb(l,82).dropdown.onKeyDown(u)&&t),"keydown.End"===n&&(t=!1!==e.Cb(l,82).dropdown.onKeyDown(u)&&t),"keydown.Enter"===n&&(t=!1!==e.Cb(l,82).dropdown.onKeyDown(u)&&t),"keydown.Space"===n&&(t=!1!==e.Cb(l,82).dropdown.onKeyDown(u)&&t),t}),null,null)),e.pb(82,16384,[[9,4]],1,b.y,[b.v],null,null),e.Ib(603979776,12,{menuItems:1}),(l()(),e.qb(84,0,null,null,2,"button",[["class","dropdown-item"]],null,[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Cb(l,11).open({size:"lg"})&&t),t}),null,null)),(l()(),e.qb(85,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Add To Bucket"])),(l()(),e.qb(87,0,null,null,2,"a",[["class","dropdown-item"]],[[8,"href",4]],null,null,null,null)),(l()(),e.qb(88,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["View/Place Orders"]))],(function(l,n){var u=n.component;l(n,1,0,"catalog.record.toast.conjoined","Conjoined Record Target Set"),l(n,3,0,"catalog.record.toast.overlay","Record Overlay Target Set"),l(n,5,0,"catalog.record.toast.holdTransfer","Hold Transfer Target Set"),l(n,7,0,"catalog.record.toast.holdingTransfer","Holding Transfer Target Set"),l(n,9,0,"catalog.record.toast.cleared","Record Marks Cleared");var e=l(n,12,0,u.recId);l(n,11,0,"biblio",e);var t=l(n,16,0,u.recId);l(n,15,0,t,"/staff/catalog/hold/T"),l(n,22,0,"bottom-right"),l(n,38,0,"bottom-right"),l(n,53,0,u.targets.conjoined.current),l(n,58,0,u.targets.overlay.current),l(n,63,0,u.targets.holdTransfer.current),l(n,68,0,u.targets.holdingTransfer.current),l(n,73,0,"bottom-right")}),(function(l,n){var u=n.component;l(n,14,0,e.Cb(n,15).target,e.Cb(n,15).href),l(n,21,0,e.Cb(n,22).isOpen()),l(n,26,0,e.Cb(n,27).dropdown.isOpen()),l(n,30,0,!0,e.Cb(n,31).dropdown.isOpen(),e.Cb(n,31).placement),l(n,33,0,e.ub(1,"/eg/staff/serials/",u.recId,"")),l(n,35,0,e.ub(1,"/eg/staff/serials/",u.recId,"/manage-mfhds")),l(n,37,0,e.Cb(n,38).isOpen()),l(n,42,0,e.Cb(n,43).dropdown.isOpen()),l(n,46,0,!0,e.Cb(n,47).dropdown.isOpen(),e.Cb(n,47).placement),l(n,72,0,e.Cb(n,73).isOpen()),l(n,77,0,e.Cb(n,78).dropdown.isOpen()),l(n,81,0,!0,e.Cb(n,82).dropdown.isOpen(),e.Cb(n,82).placement),l(n,87,0,e.ub(1,"/eg/staff/acq/legacy/lineitem/related/",u.recId,"?target=bib"))}))}class so{constructor(l,n,u,e,t,a,o,i,r){this.router=l,this.route=n,this.pcrud=u,this.auth=e,this.bib=t,this.cat=a,this.staffCat=o,this.holdings=i,this.store=r}ngOnInit(){this.searchContext=this.staffCat.searchContext,this.defaultTab=this.store.getLocalItem("eg.cat.default_record_tab")||"item_table",this.route.paramMap.subscribe(l=>{this.recordTab=l.get("tab"),this.recordId=+l.get("id"),this.searchContext=this.staffCat.searchContext,this.recordTab||(this.recordTab=this.defaultTab||"item_table"),this.loadRecord()})}setDefaultTab(){this.defaultTab=this.recordTab,this.store.setLocalItem("eg.cat.default_record_tab",this.recordTab)}beforeTabChange(l){l.preventDefault(),this.canDeactivate().then(n=>{n&&(this.recordTab=l.nextId,this.routeToTab())})}canDeactivate(l){return this.marcEditor&&this.marcEditor.changesPending()?(this.marcEditor.clearPendingChanges(),l?(l.preventDefault(),void(l.returnValue=!0)):this.pendingChangesDialog.open().toPromise()):Promise.resolve(!0)}routeToTab(){this.router.navigate([`/staff/catalog/record/${this.recordId}/${this.recordTab}`],{queryParamsHandling:"merge"})}loadRecord(){this.staffCat.currentDetailRecordSummary&&this.recordId===this.staffCat.currentDetailRecordSummary.id?this.summary=this.staffCat.currentDetailRecordSummary:(this.summary=null,this.bib.getBibSummary(this.recordId,this.searchContext.searchOrg.id(),this.searchContext.searchOrg.ou_type().depth()).toPromise().then(l=>{this.summary=this.staffCat.currentDetailRecordSummary=l,this.bib.fleshBibUsers([l.record])}))}summaryForDisplay(){if(!this.summary)return null;const l=this.summary,n=this.searchContext;return 0===Object.keys(l.displayHighlights).length&&n.highlightData[l.id]&&(l.displayHighlights=n.highlightData[l.id]),this.summary}currentSearchOrg(){return this.staffCat&&this.staffCat.searchContext?this.staffCat.searchContext.searchOrg:null}handleMarcRecordSaved(){this.staffCat.currentDetailRecordSummary=null,this.loadRecord()}addHoldingsRequested(){this.holdingsMaint&&this.holdingsMaint.holdingsGrid?this.holdingsMaint.openHoldingAdd(this.holdingsMaint.holdingsGrid.context.getSelectedRows(),!0,!0):this.holdings.spawnAddHoldingsUi(this.recordId,null,[{owner:this.auth.user().ws_ou()}])}}var co=e.ob({encapsulation:2,styles:[],data:{}});function bo(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"eg-title",[],null,null,null,Rl.b,Rl.a)),e.pb(2,4243456,null,0,Bl.a,[Ll.h],{prefix:[0,"prefix"]},null)],(function(l,n){var u=n.component;l(n,2,0,e.ub(2,"Bib ",u.summary.record.tcn_value()," - ",u.summary.display.title,""))}),null)}function po(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,"eg-catalog-copies",[],null,null,null,hu,ru)),e.pb(1,114688,null,0,iu,[Q.b,m.a,T],{recordId:[0,"recordId"]},null)],(function(l,n){l(n,1,0,n.component.recordId)}),null)}function ho(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,"div",[["class","mt-3"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"eg-marc-editor",[],null,[[null,"recordSaved"]],(function(l,n,u){var e=!0;return"recordSaved"===n&&(e=!1!==l.component.handleMarcRecordSaved()&&e),e}),gu.b,gu.a)),e.pb(2,114688,[[2,4],["marcEditor",4]],0,mu.a,[Z.a,J.a,Q.b,h.a,m.a,Pn.a,W.a,fu.a,_.a],{recordId:[0,"recordId"]},{recordSaved:"recordSaved"})],(function(l,n){l(n,2,0,n.component.recordId)}),null)}function go(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,"eg-marc-html",[["recordType","bib"]],null,null,null,Cu.b,Cu.a)),e.pb(1,114688,null,0,vu.a,[e.k,Q.b,h.a],{recordId:[0,"recordId"],recordType:[1,"recordType"]},null)],(function(l,n){l(n,1,0,n.component.recordId,"bib")}),null)}function mo(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,3,"eg-holds-grid",[["persistKey","cat.catalog.wide_holds"],["preFetchSetting","catalog.record.holds.prefetch"],["printTemplate","holds_for_bib"]],null,null,null,ct,et)),e.pb(1,114688,null,0,ut,[Q.b,m.a,_.a,h.a,X.a],{initialPickupLib:[0,"initialPickupLib"],persistKey:[1,"persistKey"],preFetchSetting:[2,"preFetchSetting"],printTemplate:[3,"printTemplate"],defaultSort:[4,"defaultSort"],recordId:[5,"recordId"]},null),e.Fb(2,{name:0,dir:1}),e.Db(3,1)],(function(l,n){var u=n.component,e=u.currentSearchOrg(),t=l(n,3,0,l(n,2,0,"request_time","asc"));l(n,1,0,e,"cat.catalog.wide_holds","catalog.record.holds.prefetch","holds_for_bib",t,u.recordId)}),null)}function fo(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,"eg-catalog-record-parts",[],null,null,null,kt,qt)),e.pb(1,114688,null,0,yt,[J.a,m.a,Pn.a,f.a],{recordId:[0,"recordId"]},null)],(function(l,n){l(n,1,0,n.component.recordId)}),null)}function Co(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,"eg-holdings-maintenance",[],null,null,null,ya,ha)),e.pb(1,114688,[[3,4],["holdingsMaint",4]],0,pa,[C.l,m.a,J.a,Pn.a,h.a,T,_.a,g.a,fu.a,K.a],{recordId:[0,"recordId"]},null)],(function(l,n){l(n,1,0,n.component.recordId)}),null)}function vo(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,"eg-catalog-record-conjoined",[],null,null,null,Ia,ka)),e.pb(1,114688,null,0,qa,[J.a,m.a,Pn.a,f.a],{recordId:[0,"recordId"]},null)],(function(l,n){l(n,1,0,n.component.recordId)}),null)}function yo(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,3,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,2,"div",[["class","mt-2"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,1,"eg-catalog-cn-browse-results",[],null,null,null,Pa,wa)),e.pb(3,245760,null,0,_a,[C.l,C.a,m.a,Pn.a,x.a,Yl.a,M.a,T],{bibSummary:[0,"bibSummary"]},null)],(function(l,n){l(n,3,0,n.component.summary)}),null)}function qo(l){return e.Mb(0,[(l()(),e.fb(16777216,null,null,1,null,yo)),e.pb(1,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(0,null,null,0))],(function(l,n){l(n,1,0,n.component.summary)}),null)}function ko(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,"eg-opac-record-detail",[],null,null,null,Ea,Aa)),e.pb(1,49152,null,0,Ha,[Ll.b,e.C],{recordId:[0,"recordId"]},null)],(function(l,n){l(n,1,0,n.component.recordId)}),null)}function Io(l){return e.Mb(0,[e.Ib(402653184,1,{recordTabs:0}),e.Ib(671088640,2,{marcEditor:0}),e.Ib(671088640,3,{holdingsMaint:0}),e.Ib(671088640,4,{pendingChangesDialog:0}),(l()(),e.fb(16777216,null,null,1,null,bo)),e.pb(5,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(6,0,null,null,1,"eg-confirm-dialog",[["dialogBody","Unsaved changes will be lost.  Continue navigation?"],["dialogTitle","Unsaved Changes Confirmation"]],null,null,null,v.b,v.a)),e.pb(7,114688,[[4,4],["pendingChangesDialog",4]],0,y.a,[b.E],{dialogTitle:[0,"dialogTitle"],dialogBody:[1,"dialogBody"]},null),(l()(),e.qb(8,0,null,null,73,"div",[["id","staff-catalog-record-container"]],null,null,null,null,null)),(l()(),e.qb(9,0,null,null,2,"div",[["class","mt-1"],["id","staff-catalog-bib-summary-container"]],null,null,null,null,null)),(l()(),e.qb(10,0,null,null,1,"eg-bib-summary",[],null,null,null,Za,Ba)),e.pb(11,114688,null,0,Ra,[Yl.a,m.a,_.a,x.a],{bibSummary:[0,"bibSummary"]},null),(l()(),e.qb(12,0,null,null,7,"div",[["class","row ml-0 mr-0"]],null,null,null,null,null)),(l()(),e.qb(13,0,null,null,2,"div",[["id","staff-catalog-bib-navigation"]],null,null,null,null,null)),(l()(),e.qb(14,0,null,null,1,"eg-catalog-record-pagination",[],null,null,null,no,Xa)),e.pb(15,114688,null,0,Ya,[C.l,x.a,M.a,T],{recordTab:[0,"recordTab"],recordId:[1,"recordId"]},null),(l()(),e.qb(16,0,null,null,0,"div",[["class","flex-1"]],null,null,null,null,null)),(l()(),e.qb(17,0,null,null,2,"div",[["id","staff-catalog-bib-navigation"]],null,null,null,null,null)),(l()(),e.qb(18,0,null,null,1,"eg-catalog-record-actions",[],null,[[null,"addHoldingsRequested"]],(function(l,n,u){var e=!0;return"addHoldingsRequested"===n&&(e=!1!==l.component.addHoldingsRequested()&&e),e}),ro,eo)),e.pb(19,114688,null,0,uo,[C.l,g.a,I.a,W.a,x.a,M.a,T,fu.a],{recordId:[0,"recordId"]},{addHoldingsRequested:"addHoldingsRequested"}),(l()(),e.qb(20,0,null,null,61,"div",[["class","mt-3"],["id","staff-catalog-bib-tabs-container"]],null,null,null,null,null)),(l()(),e.qb(21,0,null,null,3,"div",[["class","row"]],null,null,null,null,null)),(l()(),e.qb(22,0,null,null,2,"div",[["class","col-lg-12 text-right"]],null,null,null,null,null)),(l()(),e.qb(23,0,null,null,1,"button",[["class","btn btn-secondary btn-sm"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.setDefaultTab()&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Set Default View"])),(l()(),e.qb(25,0,null,null,56,"ngb-tabset",[],null,[[null,"tabChange"]],(function(l,n,u){var e=!0;return"tabChange"===n&&(e=!1!==l.component.beforeTabChange(u)&&e),e}),o.k,o.f)),e.pb(26,2146304,[[1,4],["recordTabs",4]],1,b.eb,[b.fb],{activeId:[0,"activeId"]},{tabChange:"tabChange"}),e.Ib(603979776,5,{tabs:1}),(l()(),e.qb(28,0,null,null,5,"ngb-tab",[["id","item_table"],["title","Item Table"]],null,null,null,null,null)),e.pb(29,2113536,[[5,4]],2,b.bb,[],{id:[0,"id"],title:[1,"title"]},null),e.Ib(603979776,6,{titleTpls:1}),e.Ib(603979776,7,{contentTpls:1}),(l()(),e.fb(0,null,null,1,null,po)),e.pb(33,16384,[[7,4]],0,b.cb,[e.K],null,null),(l()(),e.qb(34,0,null,null,5,"ngb-tab",[["id","marc_edit"],["title","MARC Edit"]],null,null,null,null,null)),e.pb(35,2113536,[[5,4]],2,b.bb,[],{id:[0,"id"],title:[1,"title"]},null),e.Ib(603979776,8,{titleTpls:1}),e.Ib(603979776,9,{contentTpls:1}),(l()(),e.fb(0,null,null,1,null,ho)),e.pb(39,16384,[[9,4]],0,b.cb,[e.K],null,null),(l()(),e.qb(40,0,null,null,5,"ngb-tab",[["id","marc_html"],["title","MARC View"]],null,null,null,null,null)),e.pb(41,2113536,[[5,4]],2,b.bb,[],{id:[0,"id"],title:[1,"title"]},null),e.Ib(603979776,10,{titleTpls:1}),e.Ib(603979776,11,{contentTpls:1}),(l()(),e.fb(0,null,null,1,null,go)),e.pb(45,16384,[[11,4]],0,b.cb,[e.K],null,null),(l()(),e.qb(46,0,null,null,5,"ngb-tab",[["id","holds"],["title","View Holds"]],null,null,null,null,null)),e.pb(47,2113536,[[5,4]],2,b.bb,[],{id:[0,"id"],title:[1,"title"]},null),e.Ib(603979776,12,{titleTpls:1}),e.Ib(603979776,13,{contentTpls:1}),(l()(),e.fb(0,null,null,1,null,mo)),e.pb(51,16384,[[13,4]],0,b.cb,[e.K],null,null),(l()(),e.qb(52,0,null,null,5,"ngb-tab",[["id","monoparts"],["title","Monograph Parts"]],null,null,null,null,null)),e.pb(53,2113536,[[5,4]],2,b.bb,[],{id:[0,"id"],title:[1,"title"]},null),e.Ib(603979776,14,{titleTpls:1}),e.Ib(603979776,15,{contentTpls:1}),(l()(),e.fb(0,null,null,1,null,fo)),e.pb(57,16384,[[15,4]],0,b.cb,[e.K],null,null),(l()(),e.qb(58,0,null,null,5,"ngb-tab",[["id","holdings"],["title","Holdings View"]],null,null,null,null,null)),e.pb(59,2113536,[[5,4]],2,b.bb,[],{id:[0,"id"],title:[1,"title"]},null),e.Ib(603979776,16,{titleTpls:1}),e.Ib(603979776,17,{contentTpls:1}),(l()(),e.fb(0,null,null,1,null,Co)),e.pb(63,16384,[[17,4]],0,b.cb,[e.K],null,null),(l()(),e.qb(64,0,null,null,5,"ngb-tab",[["id","conjoined"],["title","Conjoined Items"]],null,null,null,null,null)),e.pb(65,2113536,[[5,4]],2,b.bb,[],{id:[0,"id"],title:[1,"title"]},null),e.Ib(603979776,18,{titleTpls:1}),e.Ib(603979776,19,{contentTpls:1}),(l()(),e.fb(0,null,null,1,null,vo)),e.pb(69,16384,[[19,4]],0,b.cb,[e.K],null,null),(l()(),e.qb(70,0,null,null,5,"ngb-tab",[["id","cnbrowse"],["title","Shelf Browse"]],null,null,null,null,null)),e.pb(71,2113536,[[5,4]],2,b.bb,[],{id:[0,"id"],title:[1,"title"]},null),e.Ib(603979776,20,{titleTpls:1}),e.Ib(603979776,21,{contentTpls:1}),(l()(),e.fb(0,null,null,1,null,qo)),e.pb(75,16384,[[21,4]],0,b.cb,[e.K],null,null),(l()(),e.qb(76,0,null,null,5,"ngb-tab",[["id","catalog"],["title","Patron View"]],null,null,null,null,null)),e.pb(77,2113536,[[5,4]],2,b.bb,[],{id:[0,"id"],title:[1,"title"]},null),e.Ib(603979776,22,{titleTpls:1}),e.Ib(603979776,23,{contentTpls:1}),(l()(),e.fb(0,null,null,1,null,ko)),e.pb(81,16384,[[23,4]],0,b.cb,[e.K],null,null)],(function(l,n){var u=n.component;l(n,5,0,u.summary),l(n,7,0,"Unsaved Changes Confirmation","Unsaved changes will be lost.  Continue navigation?"),l(n,11,0,u.summaryForDisplay()),l(n,15,0,u.recordTab,u.recordId),l(n,19,0,u.recordId),l(n,26,0,u.recordTab),l(n,29,0,"item_table","Item Table"),l(n,35,0,"marc_edit","MARC Edit"),l(n,41,0,"marc_html","MARC View"),l(n,47,0,"holds","View Holds"),l(n,53,0,"monoparts","Monograph Parts"),l(n,59,0,"holdings","Holdings View"),l(n,65,0,"conjoined","Conjoined Items"),l(n,71,0,"cnbrowse","Shelf Browse"),l(n,77,0,"catalog","Patron View")}),(function(l,n){var u=n.component;l(n,23,0,u.recordTab==u.defaultTab)}))}function _o(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,"eg-catalog-record",[],null,[["window","beforeunload"]],(function(l,n,u){var t=!0;return"window:beforeunload"===n&&(t=!1!==e.Cb(l,1).canDeactivate(u)&&t),t}),Io,co)),e.pb(1,114688,null,0,so,[C.l,C.a,Pn.a,h.a,Yl.a,x.a,T,fu.a,g.a],null,null)],(function(l,n){l(n,1,0)}),null)}var wo=e.mb("eg-catalog-record",so,_o,{},{},[]);class xo{constructor(l,n,u){this.org=l,this.auth=n,this.pcrud=u,this.cboxEntries=[],this.profiles={},this.propagateChange=l=>{},this.propagateTouch=()=>{},this.profileChange=new e.m}ngOnInit(){this.collectGroups().then(l=>this.sortGroups(l))}collectGroups(){return this.useDisplayEntries?this.pcrud.search("pgtde",{org:this.org.ancestors(this.auth.user().ws_ou(),!0)},{flesh:1,flesh_fields:{pgtde:["grp"]}},{atomic:!0}).toPromise().then(l=>{if(0===l.length)return this.fetchPgt();let n=this.org.get(l[0].org());l.forEach(l=>{const u=this.org.get(l.org());n.ou_type().depth()<u.ou_type().depth()&&(n=u)}),l=l.filter(l=>l.org()===n.id());const u=[];return l.forEach(l=>{const n=l.grp();n._display=l,u.push(n)}),u}):this.fetchPgt()}fetchPgt(){return this.pcrud.retrieveAll("pgt",{},{atomic:!0}).toPromise()}grpLabel(l,n){let u=n,e=0;do{const n=u._display?u._display.parent():u.parent();if(!n)break;u=l.filter(l=>l.id()===n)[0],e++}while(u);return"â€‡".repeat(e)+n.name()}sortGroups(l,n){n||(n=l.filter(l=>null===l.parent())[0]),this.profiles[n.id()]=n,this.cboxEntries.push({id:n.id(),label:this.grpLabel(l,n)}),l.filter(l=>l.parent()===n.id()).sort((l,n)=>l._display?l._display.position()<n._display.position()?-1:1:l.name()<n.name()?-1:1).forEach(n=>this.sortGroups(l,n))}writeValue(l){const n=l?l.id():null;this.cbox?this.cbox.selectedId=n:this.initialValue=n}registerOnChange(l){this.propagateChange=l}registerOnTouched(l){this.propagateTouch=l}propagateCboxChange(l){if(l){const n=this.profiles[l.id];this.propagateChange(n),this.profileChange.emit(n)}else this.profileChange.emit(null),this.propagateChange(null)}}var Mo=e.ob({encapsulation:2,styles:[],data:{}});function So(l){return e.Mb(0,[e.Ib(671088640,1,{cbox:0}),(l()(),e.qb(1,0,null,null,2,"eg-combobox",[["placeholder","Profile Group"]],null,[[null,"onChange"]],(function(l,n,u){var e=!0;return"onChange"===n&&(e=!1!==l.component.propagateCboxChange(u)&&e),e}),Wu.b,Wu.a)),e.Hb(5120,null,s.o,(function(l){return[l]}),[Ju.a]),e.pb(3,114688,[[1,4],["combobox",4]],0,Ju.a,[e.k,g.a,J.a,Pn.a],{placeholder:[0,"placeholder"],startId:[1,"startId"],entries:[2,"entries"]},{onChange:"onChange"})],(function(l,n){var u=n.component;l(n,3,0,"Profile Group",u.initialValue,u.cboxEntries)}),null)}const To=["family_name ASC","first_given_name ASC","second_given_name ASC","dob DESC"],Ko=["card","settings","standing_penalties","addresses","billing_address","mailing_address","stat_cat_entries","waiver_entries","usr_activity","notes","profile"],Do="eg.circ.patron.search.show_extras",No="eg.circ.patron.search.include_inactive";class Po{constructor(l,n,u,t,a){this.renderer=l,this.net=n,this.org=u,this.auth=t,this.store=a,this.search={},this.profileGroups=[],this.patronsSelected=new e.m,this.dataSource=new ou.c,this.dataSource.getRows=(l,n)=>this.getRows(l,n)}ngOnInit(){this.searchOrg=this.org.root(),this.store.getItemBatch([Do,No]).then(l=>{this.expandForm=l[Do],this.search.inactive=l[No]})}ngAfterViewInit(){this.renderer.selectRootElement("#focus-this-input").focus()}toggleExpandForm(){this.expandForm=!this.expandForm,this.expandForm?this.store.setItem(Do,!0):this.store.removeItem(Do)}toggleIncludeInactive(){this.search.inactive?this.store.setItem(No,!0):this.store.removeItem(No)}rowsSelected(l){this.patronsSelected.emit([].concat(l))}getSelected(){return this.searchGrid?this.searchGrid.context.getSelectedRows():[]}go(){this.searchGrid.reload()}clear(){this.search={profile:null},this.searchOrg=this.org.root()}getRows(l,n){let u;return u=this.search.id?this.searchById():this.searchByForm(l,n),u.pipe(Object(au.a)(l=>this.localFleshUser(l)))}localFleshUser(l){return l.home_ou(this.org.get(l.home_ou())),l}searchByForm(l,n){if(!this.compileSearch())return Object(tu.a)();const u=this.compileSort(n);return this.net.request("open-ils.actor","open-ils.actor.patron.search.advanced.fleshed",this.auth.token(),this.compileSearch(),l.limit,u,null,this.searchOrg.id(),Ko,l.offset)}searchById(){return this.net.request("open-ils.actor","open-ils.actor.user.fleshed.retrieve",this.auth.token(),this.search.id,Ko)}compileSort(l){return l&&0!==l.length?l.map(l=>`${l.name} ${l.dir}`):To}compileSearch(){let l=!1;const n={};return Object.keys(this.search).forEach(u=>{n[u]=this.mapSearchField(u),n[u]&&(l=!0)}),l?n:null}isValue(l){return null!=l&&""!==l}mapSearchField(l){const n=this.search[l];if(!this.isValue(n))return null;const u={value:n,group:0};switch(l){case"name":case"inactive":delete u.group;break;case"street1":case"street2":case"city":case"state":case"post_code":u.group=1;break;case"phone":case"ident":u.group=2;break;case"card":u.group=3;break;case"profile":u.group=5,u.value=u.value.id();break;case"dob_day":case"dob_month":case"dob_year":u.group=4,u.value=u.value.replace(/\D/g,""),l.match(/year/)||(u[l].value=("0"+n).slice(-2))}return this.isValue(u.value)?u:null}}var Ho=e.ob({encapsulation:2,styles:[],data:{}});function Ao(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,"span",[["class","material-icons"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["arrow_drop_down"]))],null,null)}function Fo(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,"span",[["class","material-icons"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["arrow_drop_up"]))],null,null)}function Oo(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,143,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,32,"div",[["class","row mb-2"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,6,"div",[["class","col-lg-2"]],null,null,null,null,null)),(l()(),e.qb(3,0,null,null,5,"input",[["aria-label","Barcode"],["class","form-control"],["placeholder","Barcode"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keyup.enter"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,u){var t=!0,a=l.component;return"input"===n&&(t=!1!==e.Cb(l,4)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,4).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Cb(l,4)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Cb(l,4)._compositionEnd(u.target.value)&&t),"keyup.enter"===n&&(t=!1!==a.go()&&t),"ngModelChange"===n&&(t=!1!==(a.search.barcode=u)&&t),t}),null,null)),e.pb(4,16384,null,0,s.d,[e.C,e.k,[2,s.a]],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.d]),e.pb(6,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(8,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(9,0,null,null,6,"div",[["class","col-lg-2"]],null,null,null,null,null)),(l()(),e.qb(10,0,null,null,5,"input",[["aria-label","Alias"],["class","form-control"],["placeholder","Alias"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keyup.enter"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,u){var t=!0,a=l.component;return"input"===n&&(t=!1!==e.Cb(l,11)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,11).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Cb(l,11)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Cb(l,11)._compositionEnd(u.target.value)&&t),"keyup.enter"===n&&(t=!1!==a.go()&&t),"ngModelChange"===n&&(t=!1!==(a.search.alias=u)&&t),t}),null,null)),e.pb(11,16384,null,0,s.d,[e.C,e.k,[2,s.a]],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.d]),e.pb(13,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(15,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(16,0,null,null,6,"div",[["class","col-lg-2"]],null,null,null,null,null)),(l()(),e.qb(17,0,null,null,5,"input",[["aria-label","Username"],["class","form-control"],["placeholder","Username"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keyup.enter"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,u){var t=!0,a=l.component;return"input"===n&&(t=!1!==e.Cb(l,18)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,18).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Cb(l,18)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Cb(l,18)._compositionEnd(u.target.value)&&t),"keyup.enter"===n&&(t=!1!==a.go()&&t),"ngModelChange"===n&&(t=!1!==(a.search.usrname=u)&&t),t}),null,null)),e.pb(18,16384,null,0,s.d,[e.C,e.k,[2,s.a]],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.d]),e.pb(20,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(22,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(23,0,null,null,6,"div",[["class","col-lg-2"]],null,null,null,null,null)),(l()(),e.qb(24,0,null,null,5,"input",[["aria-label","Email"],["class","form-control"],["placeholder","Email"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keyup.enter"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,u){var t=!0,a=l.component;return"input"===n&&(t=!1!==e.Cb(l,25)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,25).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Cb(l,25)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Cb(l,25)._compositionEnd(u.target.value)&&t),"keyup.enter"===n&&(t=!1!==a.go()&&t),"ngModelChange"===n&&(t=!1!==(a.search.email=u)&&t),t}),null,null)),e.pb(25,16384,null,0,s.d,[e.C,e.k,[2,s.a]],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.d]),e.pb(27,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(29,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(30,0,null,null,2,"div",[["class","col-lg-2"]],null,null,null,null,null)),(l()(),e.qb(31,0,null,null,1,"button",[["class","btn btn-warning"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.clear()&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Clear Form"])),(l()(),e.qb(33,0,null,null,0,"div",[["class","col-lg-2"]],null,null,null,null,null)),(l()(),e.qb(34,0,null,null,36,"div",[["class","row mb-2"]],null,null,null,null,null)),(l()(),e.qb(35,0,null,null,6,"div",[["class","col-lg-2"]],null,null,null,null,null)),(l()(),e.qb(36,0,null,null,5,"input",[["aria-label","Identification"],["class","form-control"],["placeholder","Identification"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keyup.enter"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,u){var t=!0,a=l.component;return"input"===n&&(t=!1!==e.Cb(l,37)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,37).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Cb(l,37)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Cb(l,37)._compositionEnd(u.target.value)&&t),"keyup.enter"===n&&(t=!1!==a.go()&&t),"ngModelChange"===n&&(t=!1!==(a.search.ident=u)&&t),t}),null,null)),e.pb(37,16384,null,0,s.d,[e.C,e.k,[2,s.a]],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.d]),e.pb(39,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(41,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(42,0,null,null,6,"div",[["class","col-lg-2"]],null,null,null,null,null)),(l()(),e.qb(43,0,null,null,5,"input",[["aria-label","Phone"],["class","form-control"],["placeholder","Phone"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keyup.enter"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,u){var t=!0,a=l.component;return"input"===n&&(t=!1!==e.Cb(l,44)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,44).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Cb(l,44)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Cb(l,44)._compositionEnd(u.target.value)&&t),"keyup.enter"===n&&(t=!1!==a.go()&&t),"ngModelChange"===n&&(t=!1!==(a.search.phone=u)&&t),t}),null,null)),e.pb(44,16384,null,0,s.d,[e.C,e.k,[2,s.a]],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.d]),e.pb(46,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(48,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(49,0,null,null,6,"div",[["class","col-lg-2"]],null,null,null,null,null)),(l()(),e.qb(50,0,null,null,5,"input",[["aria-label","Street 1"],["class","form-control"],["placeholder","Street 1"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keyup.enter"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,u){var t=!0,a=l.component;return"input"===n&&(t=!1!==e.Cb(l,51)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,51).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Cb(l,51)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Cb(l,51)._compositionEnd(u.target.value)&&t),"keyup.enter"===n&&(t=!1!==a.go()&&t),"ngModelChange"===n&&(t=!1!==(a.search.street1=u)&&t),t}),null,null)),e.pb(51,16384,null,0,s.d,[e.C,e.k,[2,s.a]],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.d]),e.pb(53,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(55,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(56,0,null,null,6,"div",[["class","col-lg-2"]],null,null,null,null,null)),(l()(),e.qb(57,0,null,null,5,"input",[["aria-label","Street 2"],["class","form-control"],["placeholder","Street 2"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keyup.enter"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,u){var t=!0,a=l.component;return"input"===n&&(t=!1!==e.Cb(l,58)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,58).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Cb(l,58)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Cb(l,58)._compositionEnd(u.target.value)&&t),"keyup.enter"===n&&(t=!1!==a.go()&&t),"ngModelChange"===n&&(t=!1!==(a.search.street2=u)&&t),t}),null,null)),e.pb(58,16384,null,0,s.d,[e.C,e.k,[2,s.a]],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.d]),e.pb(60,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(62,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(63,0,null,null,6,"div",[["class","col-lg-2"]],null,null,null,null,null)),(l()(),e.qb(64,0,null,null,5,"input",[["aria-label","City"],["class","form-control"],["placeholder","City"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keyup.enter"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,u){var t=!0,a=l.component;return"input"===n&&(t=!1!==e.Cb(l,65)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,65).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Cb(l,65)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Cb(l,65)._compositionEnd(u.target.value)&&t),"keyup.enter"===n&&(t=!1!==a.go()&&t),"ngModelChange"===n&&(t=!1!==(a.search.city=u)&&t),t}),null,null)),e.pb(65,16384,null,0,s.d,[e.C,e.k,[2,s.a]],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.d]),e.pb(67,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(69,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(70,0,null,null,0,"div",[["class","col-lg-2"]],null,null,null,null,null)),(l()(),e.qb(71,0,null,null,32,"div",[["class","row mb-2"]],null,null,null,null,null)),(l()(),e.qb(72,0,null,null,6,"div",[["class","col-lg-2"]],null,null,null,null,null)),(l()(),e.qb(73,0,null,null,5,"input",[["aria-label","State"],["class","form-control"],["placeholder","State"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keyup.enter"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,u){var t=!0,a=l.component;return"input"===n&&(t=!1!==e.Cb(l,74)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,74).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Cb(l,74)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Cb(l,74)._compositionEnd(u.target.value)&&t),"keyup.enter"===n&&(t=!1!==a.go()&&t),"ngModelChange"===n&&(t=!1!==(a.search.state=u)&&t),t}),null,null)),e.pb(74,16384,null,0,s.d,[e.C,e.k,[2,s.a]],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.d]),e.pb(76,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(78,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(79,0,null,null,6,"div",[["class","col-lg-2"]],null,null,null,null,null)),(l()(),e.qb(80,0,null,null,5,"input",[["aria-label","Post Code"],["class","form-control"],["placeholder","Post Code"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keyup.enter"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,u){var t=!0,a=l.component;return"input"===n&&(t=!1!==e.Cb(l,81)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,81).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Cb(l,81)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Cb(l,81)._compositionEnd(u.target.value)&&t),"keyup.enter"===n&&(t=!1!==a.go()&&t),"ngModelChange"===n&&(t=!1!==(a.search.post_code=u)&&t),t}),null,null)),e.pb(81,16384,null,0,s.d,[e.C,e.k,[2,s.a]],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.d]),e.pb(83,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(85,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(86,0,null,null,6,"div",[["class","col-lg-2"]],null,null,null,null,null)),(l()(),e.qb(87,0,null,null,5,"eg-profile-select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],(function(l,n,u){var e=!0;return"ngModelChange"===n&&(e=!1!==(l.component.search.profile=u)&&e),e}),So,Mo)),e.pb(88,114688,null,0,xo,[m.a,h.a,Pn.a],{useDisplayEntries:[0,"useDisplayEntries"]},null),e.Hb(1024,null,s.o,(function(l){return[l]}),[xo]),e.pb(90,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(92,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(93,0,null,null,2,"div",[["class","col-lg-2"]],null,null,null,null,null)),(l()(),e.qb(94,0,null,null,1,"eg-org-select",[["placeholder","Home Library"]],null,[[null,"onChange"]],(function(l,n,u){var e=!0;return"onChange"===n&&(e=!1!==(l.component.searchOrg=u)&&e),e}),d.b,d.a)),e.pb(95,114688,null,0,p.a,[h.a,g.a,m.a,f.a],{placeholder:[0,"placeholder"],applyOrgId:[1,"applyOrgId"]},{onChange:"onChange"}),(l()(),e.qb(96,0,null,null,6,"div",[["class","col-lg-2"]],null,null,null,null,null)),(l()(),e.qb(97,0,null,null,5,"input",[["aria-label","Guardian"],["class","form-control"],["placeholder","Guardian"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keyup.enter"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,u){var t=!0,a=l.component;return"input"===n&&(t=!1!==e.Cb(l,98)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,98).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Cb(l,98)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Cb(l,98)._compositionEnd(u.target.value)&&t),"keyup.enter"===n&&(t=!1!==a.go()&&t),"ngModelChange"===n&&(t=!1!==(a.search.guardian=u)&&t),t}),null,null)),e.pb(98,16384,null,0,s.d,[e.C,e.k,[2,s.a]],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.d]),e.pb(100,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(102,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(103,0,null,null,0,"div",[["class","col-lg-2"]],null,null,null,null,null)),(l()(),e.qb(104,0,null,null,39,"div",[["class","row mb-2"]],null,null,null,null,null)),(l()(),e.qb(105,0,null,null,6,"div",[["class","col-lg-2"]],null,null,null,null,null)),(l()(),e.qb(106,0,null,null,5,"input",[["aria-label","DOB Year"],["class","form-control"],["placeholder","DOB Year"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keyup.enter"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,u){var t=!0,a=l.component;return"input"===n&&(t=!1!==e.Cb(l,107)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,107).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Cb(l,107)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Cb(l,107)._compositionEnd(u.target.value)&&t),"keyup.enter"===n&&(t=!1!==a.go()&&t),"ngModelChange"===n&&(t=!1!==(a.search.dob_year=u)&&t),t}),null,null)),e.pb(107,16384,null,0,s.d,[e.C,e.k,[2,s.a]],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.d]),e.pb(109,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(111,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(112,0,null,null,6,"div",[["class","col-lg-2"]],null,null,null,null,null)),(l()(),e.qb(113,0,null,null,5,"input",[["aria-label","DOB Month"],["class","form-control"],["placeholder","DOB Month"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keyup.enter"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,u){var t=!0,a=l.component;return"input"===n&&(t=!1!==e.Cb(l,114)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,114).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Cb(l,114)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Cb(l,114)._compositionEnd(u.target.value)&&t),"keyup.enter"===n&&(t=!1!==a.go()&&t),"ngModelChange"===n&&(t=!1!==(a.search.dob_month=u)&&t),t}),null,null)),e.pb(114,16384,null,0,s.d,[e.C,e.k,[2,s.a]],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.d]),e.pb(116,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(118,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(119,0,null,null,6,"div",[["class","col-lg-2"]],null,null,null,null,null)),(l()(),e.qb(120,0,null,null,5,"input",[["aria-label","DOB Day"],["class","form-control"],["placeholder","DOB Day"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keyup.enter"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,u){var t=!0,a=l.component;return"input"===n&&(t=!1!==e.Cb(l,121)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,121).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Cb(l,121)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Cb(l,121)._compositionEnd(u.target.value)&&t),"keyup.enter"===n&&(t=!1!==a.go()&&t),"ngModelChange"===n&&(t=!1!==(a.search.dob_day=u)&&t),t}),null,null)),e.pb(121,16384,null,0,s.d,[e.C,e.k,[2,s.a]],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.d]),e.pb(123,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(125,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(126,0,null,null,6,"div",[["class","col-lg-2"]],null,null,null,null,null)),(l()(),e.qb(127,0,null,null,5,"input",[["aria-label","Database ID"],["class","form-control"],["placeholder","Database ID"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keyup.enter"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,u){var t=!0,a=l.component;return"input"===n&&(t=!1!==e.Cb(l,128)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,128).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Cb(l,128)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Cb(l,128)._compositionEnd(u.target.value)&&t),"keyup.enter"===n&&(t=!1!==a.go()&&t),"ngModelChange"===n&&(t=!1!==(a.search.id=u)&&t),t}),null,null)),e.pb(128,16384,null,0,s.d,[e.C,e.k,[2,s.a]],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.d]),e.pb(130,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(132,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(133,0,null,null,9,"div",[["class","col-lg-2"]],null,null,null,null,null)),(l()(),e.qb(134,0,null,null,8,"div",[["class","form-check form-check-inline"]],null,null,null,null,null)),(l()(),e.qb(135,0,null,null,5,"input",[["class","form-check-input"],["id","include-inactive"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(l,n,u){var t=!0,a=l.component;return"change"===n&&(t=!1!==e.Cb(l,136).onChange(u.target.checked)&&t),"blur"===n&&(t=!1!==e.Cb(l,136).onTouched()&&t),"change"===n&&(t=!1!==a.toggleIncludeInactive()&&t),"ngModelChange"===n&&(t=!1!==(a.search.inactive=u)&&t),t}),null,null)),e.pb(136,16384,null,0,s.b,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.b]),e.pb(138,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(140,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(141,0,null,null,1,"label",[["class","form-check-label"],["for","include-inactive"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,[" Include Inactive ?"])),(l()(),e.qb(143,0,null,null,0,"div",[["class","col-lg-2"]],null,null,null,null,null))],(function(l,n){var u=n.component;l(n,6,0,u.search.barcode),l(n,13,0,u.search.alias),l(n,20,0,u.search.usrname),l(n,27,0,u.search.email),l(n,39,0,u.search.ident),l(n,46,0,u.search.phone),l(n,53,0,u.search.street1),l(n,60,0,u.search.street2),l(n,67,0,u.search.city),l(n,76,0,u.search.state),l(n,83,0,u.search.post_code),l(n,88,0,!0),l(n,90,0,u.search.profile),l(n,95,0,"Home Library",u.searchOrg?u.searchOrg.id():null),l(n,100,0,u.search.guardian),l(n,109,0,u.search.dob_year),l(n,116,0,u.search.dob_month),l(n,123,0,u.search.dob_day),l(n,130,0,u.search.id),l(n,138,0,u.search.inactive)}),(function(l,n){l(n,3,0,e.Cb(n,8).ngClassUntouched,e.Cb(n,8).ngClassTouched,e.Cb(n,8).ngClassPristine,e.Cb(n,8).ngClassDirty,e.Cb(n,8).ngClassValid,e.Cb(n,8).ngClassInvalid,e.Cb(n,8).ngClassPending),l(n,10,0,e.Cb(n,15).ngClassUntouched,e.Cb(n,15).ngClassTouched,e.Cb(n,15).ngClassPristine,e.Cb(n,15).ngClassDirty,e.Cb(n,15).ngClassValid,e.Cb(n,15).ngClassInvalid,e.Cb(n,15).ngClassPending),l(n,17,0,e.Cb(n,22).ngClassUntouched,e.Cb(n,22).ngClassTouched,e.Cb(n,22).ngClassPristine,e.Cb(n,22).ngClassDirty,e.Cb(n,22).ngClassValid,e.Cb(n,22).ngClassInvalid,e.Cb(n,22).ngClassPending),l(n,24,0,e.Cb(n,29).ngClassUntouched,e.Cb(n,29).ngClassTouched,e.Cb(n,29).ngClassPristine,e.Cb(n,29).ngClassDirty,e.Cb(n,29).ngClassValid,e.Cb(n,29).ngClassInvalid,e.Cb(n,29).ngClassPending),l(n,36,0,e.Cb(n,41).ngClassUntouched,e.Cb(n,41).ngClassTouched,e.Cb(n,41).ngClassPristine,e.Cb(n,41).ngClassDirty,e.Cb(n,41).ngClassValid,e.Cb(n,41).ngClassInvalid,e.Cb(n,41).ngClassPending),l(n,43,0,e.Cb(n,48).ngClassUntouched,e.Cb(n,48).ngClassTouched,e.Cb(n,48).ngClassPristine,e.Cb(n,48).ngClassDirty,e.Cb(n,48).ngClassValid,e.Cb(n,48).ngClassInvalid,e.Cb(n,48).ngClassPending),l(n,50,0,e.Cb(n,55).ngClassUntouched,e.Cb(n,55).ngClassTouched,e.Cb(n,55).ngClassPristine,e.Cb(n,55).ngClassDirty,e.Cb(n,55).ngClassValid,e.Cb(n,55).ngClassInvalid,e.Cb(n,55).ngClassPending),l(n,57,0,e.Cb(n,62).ngClassUntouched,e.Cb(n,62).ngClassTouched,e.Cb(n,62).ngClassPristine,e.Cb(n,62).ngClassDirty,e.Cb(n,62).ngClassValid,e.Cb(n,62).ngClassInvalid,e.Cb(n,62).ngClassPending),l(n,64,0,e.Cb(n,69).ngClassUntouched,e.Cb(n,69).ngClassTouched,e.Cb(n,69).ngClassPristine,e.Cb(n,69).ngClassDirty,e.Cb(n,69).ngClassValid,e.Cb(n,69).ngClassInvalid,e.Cb(n,69).ngClassPending),l(n,73,0,e.Cb(n,78).ngClassUntouched,e.Cb(n,78).ngClassTouched,e.Cb(n,78).ngClassPristine,e.Cb(n,78).ngClassDirty,e.Cb(n,78).ngClassValid,e.Cb(n,78).ngClassInvalid,e.Cb(n,78).ngClassPending),l(n,80,0,e.Cb(n,85).ngClassUntouched,e.Cb(n,85).ngClassTouched,e.Cb(n,85).ngClassPristine,e.Cb(n,85).ngClassDirty,e.Cb(n,85).ngClassValid,e.Cb(n,85).ngClassInvalid,e.Cb(n,85).ngClassPending),l(n,87,0,e.Cb(n,92).ngClassUntouched,e.Cb(n,92).ngClassTouched,e.Cb(n,92).ngClassPristine,e.Cb(n,92).ngClassDirty,e.Cb(n,92).ngClassValid,e.Cb(n,92).ngClassInvalid,e.Cb(n,92).ngClassPending),l(n,97,0,e.Cb(n,102).ngClassUntouched,e.Cb(n,102).ngClassTouched,e.Cb(n,102).ngClassPristine,e.Cb(n,102).ngClassDirty,e.Cb(n,102).ngClassValid,e.Cb(n,102).ngClassInvalid,e.Cb(n,102).ngClassPending),l(n,106,0,e.Cb(n,111).ngClassUntouched,e.Cb(n,111).ngClassTouched,e.Cb(n,111).ngClassPristine,e.Cb(n,111).ngClassDirty,e.Cb(n,111).ngClassValid,e.Cb(n,111).ngClassInvalid,e.Cb(n,111).ngClassPending),l(n,113,0,e.Cb(n,118).ngClassUntouched,e.Cb(n,118).ngClassTouched,e.Cb(n,118).ngClassPristine,e.Cb(n,118).ngClassDirty,e.Cb(n,118).ngClassValid,e.Cb(n,118).ngClassInvalid,e.Cb(n,118).ngClassPending),l(n,120,0,e.Cb(n,125).ngClassUntouched,e.Cb(n,125).ngClassTouched,e.Cb(n,125).ngClassPristine,e.Cb(n,125).ngClassDirty,e.Cb(n,125).ngClassValid,e.Cb(n,125).ngClassInvalid,e.Cb(n,125).ngClassPending),l(n,127,0,e.Cb(n,132).ngClassUntouched,e.Cb(n,132).ngClassTouched,e.Cb(n,132).ngClassPristine,e.Cb(n,132).ngClassDirty,e.Cb(n,132).ngClassValid,e.Cb(n,132).ngClassInvalid,e.Cb(n,132).ngClassPending),l(n,135,0,e.Cb(n,140).ngClassUntouched,e.Cb(n,140).ngClassTouched,e.Cb(n,140).ngClassPristine,e.Cb(n,140).ngClassDirty,e.Cb(n,140).ngClassValid,e.Cb(n,140).ngClassInvalid,e.Cb(n,140).ngClassPending)}))}function Eo(l){return e.Mb(0,[e.Ib(671088640,1,{searchGrid:0}),(l()(),e.qb(1,0,null,null,40,"div",[["class","patron-search-form"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,37,"div",[["class","row mb-2"]],null,null,null,null,null)),(l()(),e.qb(3,0,null,null,6,"div",[["class","col-lg-2"]],null,null,null,null,null)),(l()(),e.qb(4,0,null,null,5,"input",[["aria-label","Last Name"],["class","form-control"],["id","focus-this-input"],["placeholder","Last Name"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keyup.enter"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,u){var t=!0,a=l.component;return"input"===n&&(t=!1!==e.Cb(l,5)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,5).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Cb(l,5)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Cb(l,5)._compositionEnd(u.target.value)&&t),"keyup.enter"===n&&(t=!1!==a.go()&&t),"ngModelChange"===n&&(t=!1!==(a.search.family_name=u)&&t),t}),null,null)),e.pb(5,16384,null,0,s.d,[e.C,e.k,[2,s.a]],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.d]),e.pb(7,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(9,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(10,0,null,null,6,"div",[["class","col-lg-2"]],null,null,null,null,null)),(l()(),e.qb(11,0,null,null,5,"input",[["aria-label","First Name"],["class","form-control"],["placeholder","First Name"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keyup.enter"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,u){var t=!0,a=l.component;return"input"===n&&(t=!1!==e.Cb(l,12)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,12).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Cb(l,12)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Cb(l,12)._compositionEnd(u.target.value)&&t),"keyup.enter"===n&&(t=!1!==a.go()&&t),"ngModelChange"===n&&(t=!1!==(a.search.first_given_name=u)&&t),t}),null,null)),e.pb(12,16384,null,0,s.d,[e.C,e.k,[2,s.a]],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.d]),e.pb(14,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(16,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(17,0,null,null,6,"div",[["class","col-lg-2"]],null,null,null,null,null)),(l()(),e.qb(18,0,null,null,5,"input",[["aria-label","Middle Name"],["class","form-control"],["placeholder","Middle Name"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keyup.enter"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,u){var t=!0,a=l.component;return"input"===n&&(t=!1!==e.Cb(l,19)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,19).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Cb(l,19)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Cb(l,19)._compositionEnd(u.target.value)&&t),"keyup.enter"===n&&(t=!1!==a.go()&&t),"ngModelChange"===n&&(t=!1!==(a.search.second_given_name=u)&&t),t}),null,null)),e.pb(19,16384,null,0,s.d,[e.C,e.k,[2,s.a]],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.d]),e.pb(21,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(23,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(24,0,null,null,6,"div",[["class","col-lg-2"]],null,null,null,null,null)),(l()(),e.qb(25,0,null,null,5,"input",[["aria-label","Name Keywords"],["class","form-control"],["placeholder","Name Keywords"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keyup.enter"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,u){var t=!0,a=l.component;return"input"===n&&(t=!1!==e.Cb(l,26)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,26).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Cb(l,26)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Cb(l,26)._compositionEnd(u.target.value)&&t),"keyup.enter"===n&&(t=!1!==a.go()&&t),"ngModelChange"===n&&(t=!1!==(a.search.name=u)&&t),t}),null,null)),e.pb(26,16384,null,0,s.d,[e.C,e.k,[2,s.a]],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.d]),e.pb(28,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(30,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(31,0,null,null,7,"div",[["class","col-lg-2"]],null,null,null,null,null)),(l()(),e.qb(32,0,null,null,1,"button",[["class","btn btn-success"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.go()&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Search"])),(l()(),e.qb(34,0,null,null,4,"button",[["class","btn btn-outline-dark ml-2 label-with-material-icon"],["title","Toggle Expanded Form Display"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.toggleExpandForm()&&e),e}),null,null)),(l()(),e.fb(16777216,null,null,1,null,Ao)),e.pb(36,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,Fo)),e.pb(38,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(39,0,null,null,0,"div",[["class","col-lg-2"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,Oo)),e.pb(41,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(42,0,null,null,44,"div",[["class","patron-search-grid"]],null,null,null,null,null)),(l()(),e.qb(43,0,null,null,43,"eg-grid",[["idlClass","au"],["persistKey","circ.patron.search"]],null,[[null,"onRowActivate"]],(function(l,n,u){var e=!0;return"onRowActivate"===n&&(e=!1!==l.component.rowsSelected(u)&&e),e}),Xn.b,Xn.a)),e.pb(44,4440064,[[1,4],["searchGrid",4]],0,lu.a,[J.a,m.a,_.a,nu.a],{dataSource:[0,"dataSource"],idlClass:[1,"idlClass"],persistKey:[2,"persistKey"],showDeclaredFieldsOnly:[3,"showDeclaredFieldsOnly"]},{onRowActivate:"onRowActivate"}),(l()(),e.qb(45,0,null,null,1,"eg-grid-column",[["label","ID"],["path","id"]],null,null,null,uu.b,uu.a)),e.pb(46,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"]},null),(l()(),e.qb(47,0,null,null,1,"eg-grid-column",[["label","Card"],["path","card.barcode"]],null,null,null,uu.b,uu.a)),e.pb(48,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"]},null),(l()(),e.qb(49,0,null,null,1,"eg-grid-column",[["label","Profile"],["path","profile.name"]],null,null,null,uu.b,uu.a)),e.pb(50,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"]},null),(l()(),e.qb(51,0,null,null,1,"eg-grid-column",[["path","family_name"]],null,null,null,uu.b,uu.a)),e.pb(52,114688,null,0,eu.a,[lu.a],{path:[0,"path"],sortable:[1,"sortable"],multiSortable:[2,"multiSortable"]},null),(l()(),e.qb(53,0,null,null,1,"eg-grid-column",[["path","first_given_name"]],null,null,null,uu.b,uu.a)),e.pb(54,114688,null,0,eu.a,[lu.a],{path:[0,"path"],sortable:[1,"sortable"],multiSortable:[2,"multiSortable"]},null),(l()(),e.qb(55,0,null,null,1,"eg-grid-column",[["path","second_given_name"]],null,null,null,uu.b,uu.a)),e.pb(56,114688,null,0,eu.a,[lu.a],{path:[0,"path"],sortable:[1,"sortable"],multiSortable:[2,"multiSortable"]},null),(l()(),e.qb(57,0,null,null,1,"eg-grid-column",[["path","dob"]],null,null,null,uu.b,uu.a)),e.pb(58,114688,null,0,eu.a,[lu.a],{path:[0,"path"],sortable:[1,"sortable"],multiSortable:[2,"multiSortable"]},null),(l()(),e.qb(59,0,null,null,1,"eg-grid-column",[["label","Home Library"],["path","home_ou.shortname"]],null,null,null,uu.b,uu.a)),e.pb(60,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"]},null),(l()(),e.qb(61,0,null,null,1,"eg-grid-column",[["label","Created On"],["path","create_date"]],null,null,null,uu.b,uu.a)),e.pb(62,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"],sortable:[2,"sortable"],multiSortable:[3,"multiSortable"]},null),(l()(),e.qb(63,0,null,null,1,"eg-grid-column",[["label","Mailing:Street 1"],["path","mailing_address.street1"],["visible",""]],null,null,null,uu.b,uu.a)),e.pb(64,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"]},null),(l()(),e.qb(65,0,null,null,1,"eg-grid-column",[["label","Mailing:Street 2"],["path","mailing_address.street2"]],null,null,null,uu.b,uu.a)),e.pb(66,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"]},null),(l()(),e.qb(67,0,null,null,1,"eg-grid-column",[["label","Mailing:City"],["path","mailing_address.city"]],null,null,null,uu.b,uu.a)),e.pb(68,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"]},null),(l()(),e.qb(69,0,null,null,1,"eg-grid-column",[["label","Mailing:County"],["path","mailing_address.county"]],null,null,null,uu.b,uu.a)),e.pb(70,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"]},null),(l()(),e.qb(71,0,null,null,1,"eg-grid-column",[["label","Mailing:State"],["path","mailing_address.state"]],null,null,null,uu.b,uu.a)),e.pb(72,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"]},null),(l()(),e.qb(73,0,null,null,1,"eg-grid-column",[["label","Mailing:Zip"],["path","mailing_address.post_code"]],null,null,null,uu.b,uu.a)),e.pb(74,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"]},null),(l()(),e.qb(75,0,null,null,1,"eg-grid-column",[["label","Billing:Street 1"],["path","billing_address.street1"]],null,null,null,uu.b,uu.a)),e.pb(76,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"]},null),(l()(),e.qb(77,0,null,null,1,"eg-grid-column",[["label","Billing:Street 2"],["path","billing_address.street2"]],null,null,null,uu.b,uu.a)),e.pb(78,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"]},null),(l()(),e.qb(79,0,null,null,1,"eg-grid-column",[["label","Billing:City"],["path","billing_address.city"]],null,null,null,uu.b,uu.a)),e.pb(80,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"]},null),(l()(),e.qb(81,0,null,null,1,"eg-grid-column",[["label","Billing:County"],["path","billing_address.county"]],null,null,null,uu.b,uu.a)),e.pb(82,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"]},null),(l()(),e.qb(83,0,null,null,1,"eg-grid-column",[["label","Billing:State"],["path","billing_address.state"]],null,null,null,uu.b,uu.a)),e.pb(84,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"]},null),(l()(),e.qb(85,0,null,null,1,"eg-grid-column",[["label","Billing:Zip"],["path","billing_address.post_code"]],null,null,null,uu.b,uu.a)),e.pb(86,114688,null,0,eu.a,[lu.a],{path:[0,"path"],label:[1,"label"]},null)],(function(l,n){var u=n.component;l(n,7,0,u.search.family_name),l(n,14,0,u.search.first_given_name),l(n,21,0,u.search.second_given_name),l(n,28,0,u.search.name),l(n,36,0,!u.expandForm),l(n,38,0,u.expandForm),l(n,41,0,u.expandForm),l(n,44,0,u.dataSource,"au","circ.patron.search",!0),l(n,46,0,"id","ID"),l(n,48,0,"card.barcode","Card"),l(n,50,0,"profile.name","Profile"),l(n,52,0,"family_name",!0,!0),l(n,54,0,"first_given_name",!0,!0),l(n,56,0,"second_given_name",!0,!0),l(n,58,0,"dob",!0,!0),l(n,60,0,"home_ou.shortname","Home Library"),l(n,62,0,"create_date","Created On",!0,!0),l(n,64,0,"mailing_address.street1","Mailing:Street 1"),l(n,66,0,"mailing_address.street2","Mailing:Street 2"),l(n,68,0,"mailing_address.city","Mailing:City"),l(n,70,0,"mailing_address.county","Mailing:County"),l(n,72,0,"mailing_address.state","Mailing:State"),l(n,74,0,"mailing_address.post_code","Mailing:Zip"),l(n,76,0,"billing_address.street1","Billing:Street 1"),l(n,78,0,"billing_address.street2","Billing:Street 2"),l(n,80,0,"billing_address.city","Billing:City"),l(n,82,0,"billing_address.county","Billing:County"),l(n,84,0,"billing_address.state","Billing:State"),l(n,86,0,"billing_address.post_code","Billing:Zip")}),(function(l,n){l(n,4,0,e.Cb(n,9).ngClassUntouched,e.Cb(n,9).ngClassTouched,e.Cb(n,9).ngClassPristine,e.Cb(n,9).ngClassDirty,e.Cb(n,9).ngClassValid,e.Cb(n,9).ngClassInvalid,e.Cb(n,9).ngClassPending),l(n,11,0,e.Cb(n,16).ngClassUntouched,e.Cb(n,16).ngClassTouched,e.Cb(n,16).ngClassPristine,e.Cb(n,16).ngClassDirty,e.Cb(n,16).ngClassValid,e.Cb(n,16).ngClassInvalid,e.Cb(n,16).ngClassPending),l(n,18,0,e.Cb(n,23).ngClassUntouched,e.Cb(n,23).ngClassTouched,e.Cb(n,23).ngClassPristine,e.Cb(n,23).ngClassDirty,e.Cb(n,23).ngClassValid,e.Cb(n,23).ngClassInvalid,e.Cb(n,23).ngClassPending),l(n,25,0,e.Cb(n,30).ngClassUntouched,e.Cb(n,30).ngClassTouched,e.Cb(n,30).ngClassPristine,e.Cb(n,30).ngClassDirty,e.Cb(n,30).ngClassValid,e.Cb(n,30).ngClassInvalid,e.Cb(n,30).ngClassPending)}))}class Ro extends w.a{constructor(l){super(l),this.modal=l}ngOnInit(){}patronsSelected(l){this.close(l)}}var Bo=e.ob({encapsulation:2,styles:[],data:{}});function Lo(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,6,"div",[["class","modal-header bg-info"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,2,"h4",[["class","modal-title"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Patron Search"])),(l()(),e.qb(4,0,null,null,2,"button",[["aria-label","Close"],["class","close"],["type","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.close()&&e),e}),null,null)),(l()(),e.qb(5,0,null,null,1,"span",[["aria-hidden","true"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Ã—"])),(l()(),e.qb(7,0,null,null,2,"div",[["class","modal-body"]],null,null,null,null,null)),(l()(),e.qb(8,0,null,null,1,"eg-patron-search",[],null,[[null,"patronsSelected"]],(function(l,n,u){var e=!0;return"patronsSelected"===n&&(e=!1!==l.component.patronsSelected(u)&&e),e}),Eo,Ho)),e.pb(9,4308992,[[2,4],["searchForm",4]],0,Po,[e.C,Q.b,m.a,h.a,_.a],null,{patronsSelected:"patronsSelected"}),(l()(),e.qb(10,0,null,null,5,"div",[["class","modal-footer"]],null,null,null,null,null)),(l()(),e.qb(11,0,null,null,4,null,null,null,null,null,null,null)),(l()(),e.qb(12,0,null,null,1,"button",[["class","btn btn-warning"],["type","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.close()&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Cancel"])),(l()(),e.qb(14,0,null,null,1,"button",[["class","btn btn-success"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.close(e.Cb(l,9).getSelected())&&t),t}),null,null)),(l()(),e.Kb(-1,null,["Select"]))],(function(l,n){l(n,9,0)}),(function(l,n){l(n,14,0,!e.Cb(n,9)||0===e.Cb(n,9).getSelected().length)}))}function Uo(l){return e.Mb(0,[e.Ib(671088640,1,{dialogContent:0}),e.Ib(671088640,2,{searchForm:0}),(l()(),e.fb(0,[[1,2],["dialogContent",2]],null,0,null,Lo))],null,null)}class jo{constructor(l){this.holdTarget=l,this.processing=!1,this.selectedFormats={formats:{},langs:{}}}}class $o{constructor(l,n,u,e,t,a,o,i,r,s,c,b,d){this.router=l,this.route=n,this.renderer=u,this.evt=e,this.net=t,this.org=a,this.auth=o,this.pcrud=i,this.bib=r,this.cat=s,this.staffCat=c,this.holds=b,this.perm=d,this.holdContexts=[],this.smsCarriers=[]}ngOnInit(){this.holdType=this.route.snapshot.params.type,this.holdTargets=this.route.snapshot.queryParams.target,this.holdFor=this.route.snapshot.queryParams.holdFor||"patron",Array.isArray(this.holdTargets)||(this.holdTargets=[this.holdTargets]),this.holdTargets=this.holdTargets.map(l=>Number(l)),this.requestor=this.auth.user(),this.pickupLib=this.auth.user().ws_ou(),this.holdContexts=this.holdTargets.map(l=>new jo(l)),"staff"===this.holdFor&&this.holdForChanged(),this.getTargetMeta(),this.org.settings("sms.enable").then(l=>{this.smsEnabled=l["sms.enable"],this.smsEnabled&&this.pcrud.search("csc",{active:"t"},{order_by:{csc:"name"}}).subscribe(l=>{this.smsCarriers.push({id:l.id(),label:l.name()})})}),setTimeout(()=>this.renderer.selectRootElement("#patron-barcode").focus())}getTargetMeta(){this.holds.getHoldTargetMeta(this.holdType,this.holdTargets).subscribe(l=>{this.holdContexts.filter(n=>n.holdTarget===l.target).forEach(n=>{n.holdMeta=l,this.mrFiltersToSelectors(n)})})}mrFiltersToSelectors(l){if("M"!==this.holdType)return;const n=l.holdMeta;n.metarecord_filters&&(n.metarecord_filters.formats&&n.metarecord_filters.formats.forEach(n=>l.selectedFormats.formats[n.code()]=!0),n.metarecord_filters.langs&&n.metarecord_filters.langs.forEach(n=>l.selectedFormats.langs[n.code()]=!0))}mrSelectorsToFilters(l){const n=l.holdMeta,u=l.selectedFormats,e=Object.keys(u.formats).filter(l=>Boolean(u.formats[l])),t=Object.keys(u.langs).filter(l=>Boolean(u.langs[l])),a={};if(e.length>0&&(a[0]=[],e.forEach(l=>{const u=n.metarecord_filters.formats.filter(n=>n.code()===l)[0];a[0].push({_attr:u.ctype(),_val:u.code()})})),t.length>0&&(a[1]=[],t.forEach(l=>{const u=n.metarecord_filters.langs.filter(n=>n.code()===l)[0];a[1].push({_attr:u.ctype(),_val:u.code()})})),Object.keys(a).length>0){const n={};return n[l.holdTarget]=JSON.stringify(a),n}return null}holdForChanged(){this.user=null,"patron"===this.holdFor?this.userBarcode&&this.userBarcodeChanged():(this.currentUserBarcode="_"+this.requestor.id(),this.getUser(this.requestor.id()))}activeDateSelected(l){this.activeDate=l}userBarcodeChanged(){this.userBarcode!==this.currentUserBarcode&&(this.resetForm(),this.userBarcode?(this.user=null,this.currentUserBarcode=this.userBarcode,this.net.request("open-ils.actor","open-ils.actor.get_barcodes",this.auth.token(),this.auth.user().ws_ou(),"actor",this.userBarcode).subscribe(l=>{for(let n=0;n<l.length;n++){const u=l[n];if(!this.evt.parse(u)){this.getUser(u.id);break}}})):this.user=null)}resetForm(){this.notifyEmail=!0,this.notifyPhone=!0,this.phoneValue="",this.pickupLib=this.requestor.ws_ou()}getUser(l){this.pcrud.retrieve("au",l,{flesh:1,flesh_fields:{au:["settings"]}}).subscribe(l=>{this.user=l,this.applyUserSettings()})}applyUserSettings(){this.user&&this.user.settings()&&(this.phoneValue=this.user.day_phone()||this.user.evening_phone(),this.user.id()!==this.requestor.id()&&(this.pickupLib=this.user.home_ou()),this.user.settings().forEach(l=>{const n=l.name(),u=l.value();if(""!==u&&null!==u)switch(n){case"opac.hold_notify":this.notifyPhone=Boolean(u.match(/phone/)),this.notifyEmail=Boolean(u.match(/email/)),this.notifySms=Boolean(u.match(/sms/));break;case"opac.default_pickup_location":this.pickupLib=u}}),this.user.email()||(this.notifyEmail=!1),this.phoneValue||(this.notifyPhone=!1))}placeHolds(l){if(l||(l=0),!this.holdTargets[l])return;this.placeHoldsClicked=!0;const n=this.holdTargets[l],u=this.holdContexts.filter(l=>l.holdTarget===n)[0];this.placeOneHold(u).then(()=>this.placeHolds(l+1))}placeOneHold(l,n){l.processing=!0;const u=this.mrSelectorsToFilters(l);return this.holds.placeHold({holdTarget:l.holdTarget,holdType:this.holdType,recipient:this.user.id(),requestor:this.requestor.id(),pickupLib:this.pickupLib,override:n,notifyEmail:this.notifyEmail,notifyPhone:this.notifyPhone?this.phoneValue:null,notifySms:this.notifySms?this.smsValue:null,smsCarrier:this.notifySms?this.smsCarrier:null,thawDate:this.suspend?this.activeDate:null,frozen:this.suspend,holdableFormats:u}).toPromise().then(n=>{if(console.log("hold returned: ",n),l.lastRequest=n,l.processing=!1,!n.override&&!n.result.success&&n.result.evt){const u=n.result.evt.textcode+".override";return this.perm.hasWorkPermHere(u).then(n=>l.canOverride=n[u])}},n=>{l.processing=!1,console.error(n)})}override(l){this.placeOneHold(l,!0)}canOverride(l){return l.lastRequest&&!l.lastRequest.result.success&&l.canOverride}iconFormatLabel(l){return this.cat.iconFormatLabel(l)}hasMetaFilters(l){return"M"===this.holdType&&l.holdMeta.metarecord_filters&&(l.holdMeta.metarecord_filters.langs.length>1||l.holdMeta.metarecord_filters.formats.length>1)}searchPatrons(){this.patronSearch.open({size:"xl"}).toPromise().then(l=>{if(!l||0===l.length)return;const n=l[0];this.user=n,this.userBarcode=this.currentUserBarcode=n.card().barcode(),n.home_ou(this.org.get(n.home_ou()).id()),this.applyUserSettings()})}}var Vo=e.ob({encapsulation:2,styles:[],data:{}});function Go(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,"small",[],null,null,null,null,null)),(l()(),e.Kb(1,null,[" (",", ",") "]))],null,(function(l,n){var u=n.component;l(n,1,0,u.user.family_name(),u.user.first_given_name())}))}function zo(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,21,"li",[["class","list-group-item d-flex"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,9,"div",[["class","flex-1"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,8,"div",[["class","form-check"]],null,null,null,null,null)),(l()(),e.qb(3,0,null,null,5,"input",[["class","form-check-input"],["name","notifySms"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0,a=l.component;return"change"===n&&(t=!1!==e.Cb(l,4).onChange(u.target.checked)&&t),"blur"===n&&(t=!1!==e.Cb(l,4).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(a.notifySms=u)&&t),t}),null,null)),e.pb(4,16384,null,0,s.b,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.b]),e.pb(6,671744,null,0,s.t,[[2,s.c],[8,null],[8,null],[6,s.o]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(8,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(9,0,null,null,1,"label",[["class","form-check-label"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Notify by SMS"])),(l()(),e.qb(11,0,null,null,10,"div",[["class","flex-1"]],null,null,null,null,null)),(l()(),e.qb(12,0,null,null,9,"div",[["class","input-group"]],null,null,null,null,null)),(l()(),e.qb(13,0,null,null,2,"div",[["class","input-group-prepend"]],null,null,null,null,null)),(l()(),e.qb(14,0,null,null,1,"span",[["class","input-group-text"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["SMS Number"])),(l()(),e.qb(16,0,null,null,5,"input",[["class","form-control"],["name","smsValue"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,u){var t=!0,a=l.component;return"input"===n&&(t=!1!==e.Cb(l,17)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,17).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Cb(l,17)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Cb(l,17)._compositionEnd(u.target.value)&&t),"ngModelChange"===n&&(t=!1!==(a.smsValue=u)&&t),t}),null,null)),e.pb(17,16384,null,0,s.d,[e.C,e.k,[2,s.a]],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.d]),e.pb(19,671744,null,0,s.t,[[2,s.c],[8,null],[8,null],[6,s.o]],{name:[0,"name"],isDisabled:[1,"isDisabled"],model:[2,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(21,16384,null,0,s.q,[[4,s.p]],null,null)],(function(l,n){var u=n.component;l(n,6,0,"notifySms",u.notifySms),l(n,19,0,"smsValue",!u.notifySms,u.smsValue)}),(function(l,n){l(n,3,0,e.Cb(n,8).ngClassUntouched,e.Cb(n,8).ngClassTouched,e.Cb(n,8).ngClassPristine,e.Cb(n,8).ngClassDirty,e.Cb(n,8).ngClassValid,e.Cb(n,8).ngClassInvalid,e.Cb(n,8).ngClassPending),l(n,16,0,e.Cb(n,21).ngClassUntouched,e.Cb(n,21).ngClassTouched,e.Cb(n,21).ngClassPristine,e.Cb(n,21).ngClassDirty,e.Cb(n,21).ngClassValid,e.Cb(n,21).ngClassInvalid,e.Cb(n,21).ngClassPending)}))}function Wo(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,7,"li",[["class","list-group-item d-flex"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,2,"div",[["class","flex-1"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,1,"label",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["SMS Carrier"])),(l()(),e.qb(4,0,null,null,3,"div",[["class","flex-1"]],null,null,null,null,null)),(l()(),e.qb(5,0,null,null,2,"eg-combobox",[["placeholder","SMS Carriers"]],null,null,null,Wu.b,Wu.a)),e.Hb(5120,null,s.o,(function(l){return[l]}),[Ju.a]),e.pb(7,114688,null,0,Ju.a,[e.k,g.a,J.a,Pn.a],{placeholder:[0,"placeholder"],disabled:[1,"disabled"],entries:[2,"entries"]},null)],(function(l,n){var u=n.component;l(n,7,0,"SMS Carriers",!u.notifySms,u.smsCarriers)}),null)}function Jo(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,null,null,null,null,null,null,null)),(l()(),e.Kb(-1,null,["METARECORD"]))],null,null)}function Qo(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,null,null,null,null,null,null,null)),(l()(),e.Kb(-1,null,["TITLE"]))],null,null)}function Zo(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,null,null,null,null,null,null,null)),(l()(),e.Kb(-1,null,["CALL NUMBER"]))],null,null)}function Yo(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,null,null,null,null,null,null,null)),(l()(),e.Kb(-1,null,["FORCE COPY"]))],null,null)}function Xo(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,null,null,null,null,null,null,null)),(l()(),e.Kb(-1,null,["COPY"]))],null,null)}function li(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,null,null,null,null,null,null,null)),(l()(),e.Kb(-1,null,["RECALL"]))],null,null)}function ni(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,null,null,null,null,null,null,null)),(l()(),e.Kb(-1,null,["ISSUANCE"]))],null,null)}function ui(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,null,null,null,null,null,null,null)),(l()(),e.Kb(-1,null,["PARTS"]))],null,null)}function ei(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,"span",[["class","font-italic"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["ANY"]))],null,null)}function ti(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,0,"img",[["class","pr-1"]],[[8,"alt",0],[8,"title",0],[8,"src",4]],null,null,null,null))],null,(function(l,n){var u=n.component;l(n,1,0,e.ub(1,"",u.iconFormatLabel(n.context.$implicit),""),e.ub(1,"",u.iconFormatLabel(n.context.$implicit),""),e.ub(1,"/images/format_icons/icon_format/",n.context.$implicit,".png"))}))}function ai(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,null,null,null,null,null,null,null)),(l()(),e.Kb(1,null,[" "," "]))],null,(function(l,n){var u=n.parent.parent.context.$implicit.holdMeta.callNum.label();l(n,1,0,u)}))}function oi(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,null,null,null,null,null,null,null)),(l()(),e.Kb(1,null,[" "," "]))],null,(function(l,n){var u=n.parent.parent.context.$implicit.holdMeta.copy.barcode();l(n,1,0,u)}))}function ii(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"div",[["class","alert alert-info"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Hold Pending"]))],null,null)}function ri(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"div",[["class","alert alert-primary"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Hold Processing..."]))],null,null)}function si(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"div",[["class","alert alert-success"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Hold Succeeded"]))],null,null)}function ci(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"div",[["class","alert alert-danger"]],null,null,null,null,null)),(l()(),e.Kb(2,null,[" "," "]))],null,(function(l,n){l(n,2,0,n.parent.parent.parent.context.$implicit.lastRequest.result.evt.textcode)}))}function bi(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,4,null,null,null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,si)),e.pb(2,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,ci)),e.pb(4,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(0,null,null,0))],(function(l,n){l(n,2,0,n.parent.parent.context.$implicit.lastRequest.result.success),l(n,4,0,!n.parent.parent.context.$implicit.lastRequest.result.success)}),null)}function di(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"button",[["class","btn btn-info"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.override(l.parent.parent.context.$implicit)&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Override"]))],null,null)}function pi(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,10,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,9,"div",[["class","form-check ml-3"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,5,"input",[["class","form-check-input"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0;return"change"===n&&(t=!1!==e.Cb(l,3).onChange(u.target.checked)&&t),"blur"===n&&(t=!1!==e.Cb(l,3).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(l.parent.parent.parent.context.$implicit.selectedFormats.formats[l.context.$implicit.code()]=u)&&t),t}),null,null)),e.pb(3,16384,null,0,s.b,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.b]),e.pb(5,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(7,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(8,0,null,null,0,"img",[["class","ml-1"]],[[8,"alt",0],[8,"title",0],[8,"src",4]],null,null,null,null)),(l()(),e.qb(9,0,null,null,1,"label",[["class","form-check-label ml-1"]],null,null,null,null,null)),(l()(),e.Kb(10,null,[" "," "]))],(function(l,n){var u=1==n.parent.parent.parent.context.$implicit.holdMeta.metarecord_filters.formats.length,e=n.parent.parent.parent.context.$implicit.selectedFormats.formats[n.context.$implicit.code()];l(n,5,0,u,e)}),(function(l,n){var u=n.component;l(n,2,0,e.Cb(n,7).ngClassUntouched,e.Cb(n,7).ngClassTouched,e.Cb(n,7).ngClassPristine,e.Cb(n,7).ngClassDirty,e.Cb(n,7).ngClassValid,e.Cb(n,7).ngClassInvalid,e.Cb(n,7).ngClassPending);var t=e.ub(1,"",u.iconFormatLabel(n.context.$implicit.code()),""),a=e.ub(1,"",u.iconFormatLabel(n.context.$implicit.code()),""),o=e.ub(1,"/images/format_icons/icon_format/",n.context.$implicit.code(),".png");l(n,8,0,t,a,o);var i=n.context.$implicit.search_label()||n.context.$implicit.value();l(n,10,0,i)}))}function hi(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,6,"div",[["class","row"],["style","background-color:inherit; border:none"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,2,"div",[["class","col-lg-1"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,1,"label",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Formats: "])),(l()(),e.qb(4,0,null,null,2,"div",[["class","col-lg-11 d-flex"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,pi)),e.pb(6,278528,null,0,c.o,[e.N,e.K,e.r],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,6,0,n.parent.parent.context.$implicit.holdMeta.metarecord_filters.formats)}),null)}function gi(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,9,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,8,"div",[["class","form-check ml-3"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,5,"input",[["class","form-check-input"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0;return"change"===n&&(t=!1!==e.Cb(l,3).onChange(u.target.checked)&&t),"blur"===n&&(t=!1!==e.Cb(l,3).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(l.parent.parent.parent.context.$implicit.selectedFormats.langs[l.context.$implicit.code()]=u)&&t),t}),null,null)),e.pb(3,16384,null,0,s.b,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.b]),e.pb(5,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(7,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(8,0,null,null,1,"label",[["class","form-check-label ml-1"]],null,null,null,null,null)),(l()(),e.Kb(9,null,[" "," "]))],(function(l,n){var u=1==n.parent.parent.parent.context.$implicit.holdMeta.metarecord_filters.langs.length,e=n.parent.parent.parent.context.$implicit.selectedFormats.langs[n.context.$implicit.code()];l(n,5,0,u,e)}),(function(l,n){l(n,2,0,e.Cb(n,7).ngClassUntouched,e.Cb(n,7).ngClassTouched,e.Cb(n,7).ngClassPristine,e.Cb(n,7).ngClassDirty,e.Cb(n,7).ngClassValid,e.Cb(n,7).ngClassInvalid,e.Cb(n,7).ngClassPending);var u=n.context.$implicit.search_label()||n.context.$implicit.value();l(n,9,0,u)}))}function mi(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,6,"div",[["class","row"],["style","background-color:inherit; border:none"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,2,"div",[["class","col-lg-1"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,1,"label",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Languages: "])),(l()(),e.qb(4,0,null,null,2,"div",[["class","col-lg-11 d-flex"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,gi)),e.pb(6,278528,null,0,c.o,[e.N,e.K,e.r],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,6,0,n.parent.parent.context.$implicit.holdMeta.metarecord_filters.langs)}),null)}function fi(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,30,"div",[["class","col-lg-12"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,25,"div",[["class","row"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,2,"div",[["class","col-lg-1"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,ti)),e.pb(4,278528,null,0,c.o,[e.N,e.K,e.r],{ngForOf:[0,"ngForOf"]},null),(l()(),e.qb(5,0,null,null,3,"div",[["class","col-lg-3"]],null,null,null,null,null)),(l()(),e.qb(6,0,null,null,2,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Cb(l,7).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.pb(7,671744,null,0,C.n,[C.l,C.a,c.m],{routerLink:[0,"routerLink"]},null),(l()(),e.Kb(8,null,[" "," "])),(l()(),e.qb(9,0,null,null,1,"div",[["class","col-lg-2"]],null,null,null,null,null)),(l()(),e.Kb(10,null,["",""])),(l()(),e.qb(11,0,null,null,2,"div",[["class","col-lg-2"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,ai)),e.pb(13,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(l()(),e.qb(14,0,null,null,2,"div",[["class","col-lg-1"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,oi)),e.pb(16,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(l()(),e.qb(17,0,null,null,6,"div",[["class","col-lg-2"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,ii)),e.pb(19,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,ri)),e.pb(21,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,bi)),e.pb(23,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(24,0,null,null,2,"div",[["class","col-lg-1"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,di)),e.pb(26,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,hi)),e.pb(28,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,mi)),e.pb(30,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component;l(n,4,0,n.parent.context.$implicit.holdMeta.bibSummary.attributes.icon_format),l(n,7,0,e.ub(1,"/staff/catalog/record/",n.parent.context.$implicit.holdMeta.bibId,"")),l(n,13,0,n.parent.context.$implicit.holdMeta.callNum,e.Cb(n.parent.parent,157)),l(n,16,0,n.parent.context.$implicit.holdMeta.copy,e.Cb(n.parent.parent,157)),l(n,19,0,!n.parent.context.$implicit.lastRequest&&!n.parent.context.$implicit.processing),l(n,21,0,n.parent.context.$implicit.processing),l(n,23,0,n.parent.context.$implicit.lastRequest),l(n,26,0,u.canOverride(n.parent.context.$implicit)),l(n,28,0,u.hasMetaFilters(n.parent.context.$implicit)),l(n,30,0,u.hasMetaFilters(n.parent.context.$implicit))}),(function(l,n){l(n,6,0,e.Cb(n,7).target,e.Cb(n,7).href),l(n,8,0,n.parent.context.$implicit.holdMeta.bibSummary.display.title),l(n,10,0,n.parent.context.$implicit.holdMeta.bibSummary.display.author)}))}function Ci(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,"div",[["class","row mt-1 ml-1 mr-1"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,fi)),e.pb(2,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,2,0,n.context.$implicit.holdMeta)}),null)}function vi(l){return e.Mb(0,[e.Ib(671088640,1,{patronSearch:0}),(l()(),e.qb(1,0,null,null,1,"eg-patron-search-dialog",[],null,null,null,Uo,Bo)),e.pb(2,114688,[[1,4],["patronSearch",4]],0,Ro,[b.E],null,null),(l()(),e.qb(3,0,null,null,11,"div",[["class","row"]],null,null,null,null,null)),(l()(),e.qb(4,0,null,null,4,"div",[["class","col-lg-4"]],null,null,null,null,null)),(l()(),e.qb(5,0,null,null,3,"h3",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Place Hold "])),(l()(),e.fb(16777216,null,null,1,null,Go)),e.pb(8,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(9,0,null,null,5,"div",[["class","col-lg-2 text-right"]],null,null,null,null,null)),(l()(),e.qb(10,0,null,null,4,"button",[["class","btn btn-outline-dark btn-sm"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.searchPatrons()&&e),e}),null,null)),(l()(),e.qb(11,0,null,null,1,"span",[["class","material-icons mat-icon-in-button align-middle"],["title","Search for Patron"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["search"])),(l()(),e.qb(13,0,null,null,1,"span",[["class","align-middle"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Search for Patron"])),(l()(),e.qb(15,0,null,null,118,"form",[["autocomplete","off"],["class","form form-validated common-form"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keydown.enter"],[null,"submit"],[null,"reset"]],(function(l,n,u){var t=!0;return"submit"===n&&(t=!1!==e.Cb(l,17).onSubmit(u)&&t),"reset"===n&&(t=!1!==e.Cb(l,17).onReset()&&t),"keydown.enter"===n&&(t=!1!==u.preventDefault()&&t),t}),null,null)),e.pb(16,16384,null,0,s.G,[],null,null),e.pb(17,4210688,null,0,s.s,[[8,null],[8,null]],null,null),e.Hb(2048,null,s.c,null,[s.s]),e.pb(19,16384,null,0,s.r,[[4,s.c]],null,null),(l()(),e.qb(20,0,null,null,109,"div",[["class","row"]],null,null,null,null,null)),(l()(),e.qb(21,0,null,null,59,"div",[["class","col-lg-6 common-form striped-odd"]],null,null,null,null,null)),(l()(),e.qb(22,0,null,null,22,"div",[["class","row mt-2"]],null,null,null,null,null)),(l()(),e.qb(23,0,null,null,10,"div",[["class","col-lg-6"]],null,null,null,null,null)),(l()(),e.qb(24,0,null,null,9,"div",[["class","form-check"]],null,null,null,null,null)),(l()(),e.qb(25,0,null,null,6,"input",[["class","form-check-input"],["name","holdFor"],["type","radio"],["value","patron"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,u){var t=!0,a=l.component;return"input"===n&&(t=!1!==e.Cb(l,26)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,26).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Cb(l,26)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Cb(l,26)._compositionEnd(u.target.value)&&t),"change"===n&&(t=!1!==e.Cb(l,27).onChange()&&t),"blur"===n&&(t=!1!==e.Cb(l,27).onTouched()&&t),"change"===n&&(t=!1!==a.holdForChanged()&&t),"ngModelChange"===n&&(t=!1!==(a.holdFor=u)&&t),t}),null,null)),e.pb(26,16384,null,0,s.d,[e.C,e.k,[2,s.a]],null,null),e.pb(27,212992,null,0,s.w,[e.C,e.k,s.D,e.q],{name:[0,"name"],value:[1,"value"]},null),e.Hb(1024,null,s.o,(function(l,n){return[l,n]}),[s.d,s.w]),e.pb(29,671744,null,0,s.t,[[2,s.c],[8,null],[8,null],[6,s.o]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(31,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(32,0,null,null,1,"label",[["class","form-check-label"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,[" Place hold for patron by barcode: "])),(l()(),e.qb(34,0,null,null,10,"div",[["class","col-lg-6"]],null,null,null,null,null)),(l()(),e.qb(35,0,null,null,9,"div",[["class","input-group"]],null,null,null,null,null)),(l()(),e.qb(36,0,null,null,5,"input",[["class","form-control"],["id","patron-barcode"],["name","userBarcode"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keyup.enter"],[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,u){var t=!0,a=l.component;return"input"===n&&(t=!1!==e.Cb(l,37)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,37).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Cb(l,37)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Cb(l,37)._compositionEnd(u.target.value)&&t),"keyup.enter"===n&&(t=!1!==a.userBarcodeChanged()&&t),"ngModelChange"===n&&(t=!1!==(a.userBarcode=u)&&t),"change"===n&&(t=!1!==a.userBarcodeChanged()&&t),t}),null,null)),e.pb(37,16384,null,0,s.d,[e.C,e.k,[2,s.a]],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.d]),e.pb(39,671744,null,0,s.t,[[2,s.c],[8,null],[8,null],[6,s.o]],{name:[0,"name"],isDisabled:[1,"isDisabled"],model:[2,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(41,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(42,0,null,null,2,"div",[["class","input-group-append"]],null,null,null,null,null)),(l()(),e.qb(43,0,null,null,1,"button",[["class","btn btn-outline-dark"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.userBarcodeChanged()&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Submit"])),(l()(),e.qb(45,0,null,null,13,"div",[["class","row mt-2"]],null,null,null,null,null)),(l()(),e.qb(46,0,null,null,10,"div",[["class","col-lg-6"]],null,null,null,null,null)),(l()(),e.qb(47,0,null,null,9,"div",[["class","form-check"]],null,null,null,null,null)),(l()(),e.qb(48,0,null,null,6,"input",[["class","form-check-input"],["name","holdFor"],["type","radio"],["value","staff"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,u){var t=!0,a=l.component;return"input"===n&&(t=!1!==e.Cb(l,49)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,49).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Cb(l,49)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Cb(l,49)._compositionEnd(u.target.value)&&t),"change"===n&&(t=!1!==e.Cb(l,50).onChange()&&t),"blur"===n&&(t=!1!==e.Cb(l,50).onTouched()&&t),"change"===n&&(t=!1!==a.holdForChanged()&&t),"ngModelChange"===n&&(t=!1!==(a.holdFor=u)&&t),t}),null,null)),e.pb(49,16384,null,0,s.d,[e.C,e.k,[2,s.a]],null,null),e.pb(50,212992,null,0,s.w,[e.C,e.k,s.D,e.q],{name:[0,"name"],value:[1,"value"]},null),e.Hb(1024,null,s.o,(function(l,n){return[l,n]}),[s.d,s.w]),e.pb(52,671744,null,0,s.t,[[2,s.c],[8,null],[8,null],[6,s.o]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(54,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(55,0,null,null,1,"label",[["class","form-check-label"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,[" Place hold for this staff account: "])),(l()(),e.qb(57,0,null,null,1,"div",[["class","col-lg-6 font-weight-bold"]],null,null,null,null,null)),(l()(),e.Kb(58,null,["",""])),(l()(),e.qb(59,0,null,null,6,"div",[["class","row mt-2"]],null,null,null,null,null)),(l()(),e.qb(60,0,null,null,2,"div",[["class","col-lg-6"]],null,null,null,null,null)),(l()(),e.qb(61,0,null,null,1,"label",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Pickup Location: "])),(l()(),e.qb(63,0,null,null,2,"div",[["class","col-lg-6"]],null,null,null,null,null)),(l()(),e.qb(64,0,null,null,1,"eg-org-select",[],null,null,null,d.b,d.a)),e.pb(65,114688,null,0,p.a,[h.a,g.a,m.a,f.a],{applyOrgId:[0,"applyOrgId"]},null),(l()(),e.qb(66,0,null,null,14,"div",[["class","row mt-2"]],null,null,null,null,null)),(l()(),e.qb(67,0,null,null,9,"div",[["class","col-lg-6"]],null,null,null,null,null)),(l()(),e.qb(68,0,null,null,8,"div",[["class","form-check"]],null,null,null,null,null)),(l()(),e.qb(69,0,null,null,5,"input",[["class","form-check-input"],["name","suspend"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0,a=l.component;return"change"===n&&(t=!1!==e.Cb(l,70).onChange(u.target.checked)&&t),"blur"===n&&(t=!1!==e.Cb(l,70).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(a.suspend=u)&&t),t}),null,null)),e.pb(70,16384,null,0,s.b,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.b]),e.pb(72,671744,null,0,s.t,[[2,s.c],[8,null],[8,null],[6,s.o]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(74,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(75,0,null,null,1,"label",[["class","form-check-label"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Suspend Hold"])),(l()(),e.qb(77,0,null,null,3,"div",[["class","col-lg-6"]],null,null,null,null,null)),(l()(),e.qb(78,0,null,null,2,"eg-date-select",[],null,[[null,"onChangeAsISO"]],(function(l,n,u){var e=!0;return"onChangeAsISO"===n&&(e=!1!==l.component.activeDateSelected(u)&&e),e}),Me.b,Me.a)),e.Hb(5120,null,s.o,(function(l){return[l]}),[Se.a]),e.pb(80,114688,null,0,Se.a,[],{disabled:[0,"disabled"]},null),(l()(),e.qb(81,0,null,null,48,"div",[["class","col-lg-6"]],null,null,null,null,null)),(l()(),e.qb(82,0,null,null,47,"div",[["class","card"]],null,null,null,null,null)),(l()(),e.qb(83,0,null,null,2,"div",[["class","card-header"]],null,null,null,null,null)),(l()(),e.qb(84,0,null,null,1,"h4",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Notifications"])),(l()(),e.qb(86,0,null,null,43,"ul",[["class","list-group list-group-flush"]],null,null,null,null,null)),(l()(),e.qb(87,0,null,null,16,"li",[["class","list-group-item d-flex"]],null,null,null,null,null)),(l()(),e.qb(88,0,null,null,9,"div",[["class","flex-1"]],null,null,null,null,null)),(l()(),e.qb(89,0,null,null,8,"div",[["class","form-check"]],null,null,null,null,null)),(l()(),e.qb(90,0,null,null,5,"input",[["class","form-check-input"],["name","notifyEmail"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0,a=l.component;return"change"===n&&(t=!1!==e.Cb(l,91).onChange(u.target.checked)&&t),"blur"===n&&(t=!1!==e.Cb(l,91).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(a.notifyEmail=u)&&t),t}),null,null)),e.pb(91,16384,null,0,s.b,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.b]),e.pb(93,671744,null,0,s.t,[[2,s.c],[8,null],[8,null],[6,s.o]],{name:[0,"name"],isDisabled:[1,"isDisabled"],model:[2,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(95,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(96,0,null,null,1,"label",[["class","form-check-label"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Notify by Email"])),(l()(),e.qb(98,0,null,null,5,"div",[["class","flex-1"]],null,null,null,null,null)),(l()(),e.qb(99,0,null,null,4,"div",[["class","input-group"]],null,null,null,null,null)),(l()(),e.qb(100,0,null,null,2,"div",[["class","input-group-prepend"]],null,null,null,null,null)),(l()(),e.qb(101,0,null,null,1,"span",[["class","input-group-text"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Email Address"])),(l()(),e.qb(103,0,null,null,0,"input",[["class","form-control"],["name","userEmail"],["type","text"]],[[8,"disabled",0],[8,"value",0]],null,null,null,null)),(l()(),e.qb(104,0,null,null,21,"li",[["class","list-group-item d-flex"]],null,null,null,null,null)),(l()(),e.qb(105,0,null,null,9,"div",[["class","flex-1"]],null,null,null,null,null)),(l()(),e.qb(106,0,null,null,8,"div",[["class","form-check"]],null,null,null,null,null)),(l()(),e.qb(107,0,null,null,5,"input",[["class","form-check-input"],["name","notifyPhone"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0,a=l.component;return"change"===n&&(t=!1!==e.Cb(l,108).onChange(u.target.checked)&&t),"blur"===n&&(t=!1!==e.Cb(l,108).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(a.notifyPhone=u)&&t),t}),null,null)),e.pb(108,16384,null,0,s.b,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.b]),e.pb(110,671744,null,0,s.t,[[2,s.c],[8,null],[8,null],[6,s.o]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(112,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(113,0,null,null,1,"label",[["class","form-check-label"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Notify by Phone"])),(l()(),e.qb(115,0,null,null,10,"div",[["class","flex-1"]],null,null,null,null,null)),(l()(),e.qb(116,0,null,null,9,"div",[["class","input-group"]],null,null,null,null,null)),(l()(),e.qb(117,0,null,null,2,"div",[["class","input-group-prepend"]],null,null,null,null,null)),(l()(),e.qb(118,0,null,null,1,"span",[["class","input-group-text"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Phone Number"])),(l()(),e.qb(120,0,null,null,5,"input",[["class","form-control"],["name","phoneValue"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,u){var t=!0,a=l.component;return"input"===n&&(t=!1!==e.Cb(l,121)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,121).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Cb(l,121)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Cb(l,121)._compositionEnd(u.target.value)&&t),"ngModelChange"===n&&(t=!1!==(a.phoneValue=u)&&t),t}),null,null)),e.pb(121,16384,null,0,s.d,[e.C,e.k,[2,s.a]],null,null),e.Hb(1024,null,s.o,(function(l){return[l]}),[s.d]),e.pb(123,671744,null,0,s.t,[[2,s.c],[8,null],[8,null],[6,s.o]],{name:[0,"name"],isDisabled:[1,"isDisabled"],model:[2,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(125,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.fb(16777216,null,null,1,null,zo)),e.pb(127,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,Wo)),e.pb(129,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(130,0,null,null,3,"div",[["class","row mt-2"]],null,null,null,null,null)),(l()(),e.qb(131,0,null,null,2,"div",[["class","col-lg-3"]],null,null,null,null,null)),(l()(),e.qb(132,0,null,null,1,"button",[["class","btn btn-success"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.placeHolds()&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Place Hold(s)"])),(l()(),e.qb(134,0,null,null,2,"div",[["class","row"]],null,null,null,null,null)),(l()(),e.qb(135,0,null,null,1,"div",[["class","col-lg-12"]],null,null,null,null,null)),(l()(),e.qb(136,0,null,null,0,"hr",[],null,null,null,null,null)),(l()(),e.qb(137,0,null,null,19,"div",[["class","row font-weight-bold pt-3 ml-1 mr-1"]],null,null,null,null,null)),(l()(),e.qb(138,0,null,null,18,"div",[["class","col-lg-12"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Placing "])),(l()(),e.fb(16777216,null,null,1,null,Jo)),e.pb(141,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,Qo)),e.pb(143,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,Zo)),e.pb(145,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,Yo)),e.pb(147,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,Xo)),e.pb(149,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,li)),e.pb(151,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,ni)),e.pb(153,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,ui)),e.pb(155,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.Kb(-1,null,[" hold on record(s)"])),(l()(),e.fb(0,[["anyValue",2]],null,0,null,ei)),(l()(),e.qb(158,0,null,null,17,"div",[["class","hold-records-list common-form striped-even"]],null,null,null,null,null)),(l()(),e.qb(159,0,null,null,14,"div",[["class","row mt-2 ml-1 mr-1 font-weight-bold"]],null,null,null,null,null)),(l()(),e.qb(160,0,null,null,1,"div",[["class","col-lg-1"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Format"])),(l()(),e.qb(162,0,null,null,1,"div",[["class","col-lg-3"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Title"])),(l()(),e.qb(164,0,null,null,1,"div",[["class","col-lg-2"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Author"])),(l()(),e.qb(166,0,null,null,1,"div",[["class","col-lg-2"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Call Number"])),(l()(),e.qb(168,0,null,null,1,"div",[["class","col-lg-1"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Barcode"])),(l()(),e.qb(170,0,null,null,1,"div",[["class","col-lg-2"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Holds Status"])),(l()(),e.qb(172,0,null,null,1,"div",[["class","col-lg-1"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Override"])),(l()(),e.fb(16777216,null,null,1,null,Ci)),e.pb(175,278528,null,0,c.o,[e.N,e.K,e.r],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){var u=n.component;l(n,2,0),l(n,8,0,u.user),l(n,27,0,"holdFor","patron"),l(n,29,0,"holdFor",u.holdFor),l(n,39,0,"userBarcode","patron"!=u.holdFor,u.userBarcode),l(n,50,0,"holdFor","staff"),l(n,52,0,"holdFor",u.holdFor),l(n,65,0,u.pickupLib),l(n,72,0,"suspend",u.suspend),l(n,80,0,!u.suspend),l(n,93,0,"notifyEmail",!u.user||!u.user.email(),u.notifyEmail),l(n,110,0,"notifyPhone",u.notifyPhone),l(n,123,0,"phoneValue",!u.notifyPhone,u.phoneValue),l(n,127,0,u.smsEnabled),l(n,129,0,u.smsEnabled),l(n,141,0,"M"==u.holdType),l(n,143,0,"T"==u.holdType),l(n,145,0,"V"==u.holdType),l(n,147,0,"F"==u.holdType),l(n,149,0,"C"==u.holdType),l(n,151,0,"R"==u.holdType),l(n,153,0,"I"==u.holdType),l(n,155,0,"P"==u.holdType),l(n,175,0,u.holdContexts)}),(function(l,n){var u=n.component;l(n,15,0,e.Cb(n,19).ngClassUntouched,e.Cb(n,19).ngClassTouched,e.Cb(n,19).ngClassPristine,e.Cb(n,19).ngClassDirty,e.Cb(n,19).ngClassValid,e.Cb(n,19).ngClassInvalid,e.Cb(n,19).ngClassPending),l(n,25,0,e.Cb(n,31).ngClassUntouched,e.Cb(n,31).ngClassTouched,e.Cb(n,31).ngClassPristine,e.Cb(n,31).ngClassDirty,e.Cb(n,31).ngClassValid,e.Cb(n,31).ngClassInvalid,e.Cb(n,31).ngClassPending),l(n,36,0,e.Cb(n,41).ngClassUntouched,e.Cb(n,41).ngClassTouched,e.Cb(n,41).ngClassPristine,e.Cb(n,41).ngClassDirty,e.Cb(n,41).ngClassValid,e.Cb(n,41).ngClassInvalid,e.Cb(n,41).ngClassPending),l(n,48,0,e.Cb(n,54).ngClassUntouched,e.Cb(n,54).ngClassTouched,e.Cb(n,54).ngClassPristine,e.Cb(n,54).ngClassDirty,e.Cb(n,54).ngClassValid,e.Cb(n,54).ngClassInvalid,e.Cb(n,54).ngClassPending),l(n,58,0,u.requestor.usrname()),l(n,69,0,e.Cb(n,74).ngClassUntouched,e.Cb(n,74).ngClassTouched,e.Cb(n,74).ngClassPristine,e.Cb(n,74).ngClassDirty,e.Cb(n,74).ngClassValid,e.Cb(n,74).ngClassInvalid,e.Cb(n,74).ngClassPending),l(n,90,0,e.Cb(n,95).ngClassUntouched,e.Cb(n,95).ngClassTouched,e.Cb(n,95).ngClassPristine,e.Cb(n,95).ngClassDirty,e.Cb(n,95).ngClassValid,e.Cb(n,95).ngClassInvalid,e.Cb(n,95).ngClassPending),l(n,103,0,!0,e.ub(1,"",u.user?u.user.email():"","")),l(n,107,0,e.Cb(n,112).ngClassUntouched,e.Cb(n,112).ngClassTouched,e.Cb(n,112).ngClassPristine,e.Cb(n,112).ngClassDirty,e.Cb(n,112).ngClassValid,e.Cb(n,112).ngClassInvalid,e.Cb(n,112).ngClassPending),l(n,120,0,e.Cb(n,125).ngClassUntouched,e.Cb(n,125).ngClassTouched,e.Cb(n,125).ngClassPristine,e.Cb(n,125).ngClassDirty,e.Cb(n,125).ngClassValid,e.Cb(n,125).ngClassInvalid,e.Cb(n,125).ngClassPending),l(n,132,0,!u.user||u.placeHoldsClicked)}))}function yi(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,"ng-component",[],null,null,null,vi,Vo)),e.pb(1,114688,null,0,$o,[C.l,C.a,e.C,Z.a,Q.b,m.a,h.a,Pn.a,Yl.a,x.a,T,Ke,f.a],null,null)],(function(l,n){l(n,1,0)}),null)}var qi=e.mb("ng-component",$o,yi,{},{},[]);class ki{constructor(l,n,u,e){this.route=l,this.cat=n,this.catUrl=u,this.staffCat=e}ngOnInit(){this.searchContext=this.staffCat.searchContext,this.routeSub=this.route.queryParamMap.subscribe(l=>this.browseByUrl(l))}ngOnDestroy(){this.routeSub.unsubscribe()}browseByUrl(l){this.catUrl.applyUrlParams(this.searchContext,l);const n=this.searchContext.browseSearch;"keyword"===n.fieldClass&&(n.fieldClass="title"),n.isSearchable()&&(this.results=[],this.cat.browse(this.searchContext).subscribe(l=>this.addResult(l)))}addResult(l){l.compiledHeadings=[];const n={};l.sees.forEach(u=>{u.control_set&&u.headings.forEach(u=>{const e=u[Object.keys(u)[0]][0],t=l.list_authorities.filter(l=>Number(l)===Number(e.target))[0];e.target&&e.main_entry&&e.target_count&&!t&&!n[e.target]&&(n[e.target]=!0,l.compiledHeadings.push({heading:e.heading,target:e.target,target_count:e.target_count,type:e.type}))})}),this.results.push(l)}browseIsDone(){return this.searchContext.searchState===S.c.COMPLETE}browseIsActive(){return this.searchContext.searchState===S.c.SEARCHING}browseHasResults(){return this.browseIsDone()&&this.results.length>0}prevPage(){const l=this.results[0];l&&(this.searchContext.browseSearch.pivot=l.pivot_point,this.staffCat.browse())}nextPage(){const l=this.results[this.results.length-1];l&&(this.searchContext.browseSearch.pivot=l.pivot_point,this.staffCat.browse())}searchByBrowseEntryParams(l){const n=this.searchContext.clone();return n.browseSearch.reset(),n.termSearch.hasBrowseEntry=l.browse_entry+","+l.fields,this.catUrl.toUrlParams(n)}newBrowseFromHeadingParams(l){const n=this.searchContext.clone();return n.browseSearch.value=l.heading,this.catUrl.toUrlParams(n)}}var Ii=e.ob({encapsulation:2,styles:[],data:{}});function _i(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,5,"div",[["class","row"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,4,"div",[["class","col-lg-6 offset-lg-3 pt-3"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,3,"div",[["class","progress"]],null,null,null,null,null)),(l()(),e.qb(3,0,null,null,2,"div",[["aria-valuemax","100"],["aria-valuemin","0"],["aria-valuenow","100"],["class","progress-bar progress-bar-striped active w-100"],["role","progressbar"]],null,null,null,null,null)),(l()(),e.qb(4,0,null,null,1,"span",[["class","sr-only"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Searching.."]))],null,null)}function wi(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,5,"div",[],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,4,"div",[["class","row pt-3"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,3,"div",[["class","col-lg-6 offset-lg-3"]],null,null,null,null,null)),(l()(),e.qb(3,0,null,null,2,"div",[["class","alert alert-warning"]],null,null,null,null,null)),(l()(),e.qb(4,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["No Maching Items Were Found"]))],null,null)}function xi(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,3,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,2,"a",[["routerLink","/staff/catalog/search"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Cb(l,2).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.pb(2,671744,null,0,C.n,[C.l,C.a,c.m],{queryParams:[0,"queryParams"],routerLink:[1,"routerLink"]},null),(l()(),e.Kb(3,null,[" "," (",") "]))],(function(l,n){l(n,2,0,n.component.searchByBrowseEntryParams(n.parent.parent.context.$implicit),"/staff/catalog/search")}),(function(l,n){l(n,1,0,e.Cb(n,2).target,e.Cb(n,2).href),l(n,3,0,n.parent.parent.context.$implicit.value,n.parent.parent.context.$implicit.sources)}))}function Mi(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Kb(2,null,["",""]))],null,(function(l,n){l(n,2,0,n.parent.parent.context.$implicit.value)}))}function Si(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,null,null,null,null,null,null,null)),(l()(),e.Kb(-1,null,[" See "]))],null,null)}function Ti(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,null,null,null,null,null,null,null)),(l()(),e.Kb(-1,null,[" Broader term "]))],null,null)}function Ki(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,null,null,null,null,null,null,null)),(l()(),e.Kb(-1,null,[" Narrower term "]))],null,null)}function Di(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,null,null,null,null,null,null,null)),(l()(),e.Kb(-1,null,[" Related term "]))],null,null)}function Ni(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,13,"div",[["class","row"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,12,"div",[["class","col-lg-10 offset-lg-1"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,8,"span",[["class","font-italic"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,Si)),e.pb(4,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,Ti)),e.pb(6,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,Ki)),e.pb(8,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,Di)),e.pb(10,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(11,0,null,null,2,"a",[["routerLink","/staff/catalog/browse"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Cb(l,12).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.pb(12,671744,null,0,C.n,[C.l,C.a,c.m],{queryParams:[0,"queryParams"],routerLink:[1,"routerLink"]},null),(l()(),e.Kb(13,null,[" "," (",") "]))],(function(l,n){var u=n.component;l(n,4,0,!n.context.$implicit.type||"variant"==n.context.$implicit.type),l(n,6,0,"broader"==n.context.$implicit.type),l(n,8,0,"narrower"==n.context.$implicit.type),l(n,10,0,"other"==n.context.$implicit.type),l(n,12,0,u.newBrowseFromHeadingParams(n.context.$implicit),"/staff/catalog/browse")}),(function(l,n){l(n,11,0,e.Cb(n,12).target,e.Cb(n,12).href),l(n,13,0,n.context.$implicit.heading,n.context.$implicit.target_count)}))}function Pi(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,8,"div",[["class","col-lg-12 card tight-card mb-2 bg-light"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,7,"div",[["class","col-lg-8"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,6,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,xi)),e.pb(4,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,Mi)),e.pb(6,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,Ni)),e.pb(8,278528,null,0,c.o,[e.N,e.K,e.r],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,4,0,n.parent.context.$implicit.sources>0),l(n,6,0,0==n.parent.context.$implicit.sources),l(n,8,0,n.parent.context.$implicit.compiledHeadings)}),null)}function Hi(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,2,"div",[["class","row"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,Pi)),e.pb(2,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,2,0,n.context.$implicit.value)}),null)}function Ai(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,14,"div",[["id","staff-catalog-browse-results-container"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,5,"div",[["class","row mb-2"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,4,"div",[["class","col-lg-3"]],null,null,null,null,null)),(l()(),e.qb(3,0,null,null,1,"button",[["class","btn btn-primary"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.prevPage()&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Back"])),(l()(),e.qb(5,0,null,null,1,"button",[["class","btn btn-primary ml-3"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.nextPage()&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Next"])),(l()(),e.fb(16777216,null,null,1,null,Hi)),e.pb(8,278528,null,0,c.o,[e.N,e.K,e.r],{ngForOf:[0,"ngForOf"]},null),(l()(),e.qb(9,0,null,null,5,"div",[["class","row mb-2"]],null,null,null,null,null)),(l()(),e.qb(10,0,null,null,4,"div",[["class","col-lg-3"]],null,null,null,null,null)),(l()(),e.qb(11,0,null,null,1,"button",[["class","btn btn-primary"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.prevPage()&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Back"])),(l()(),e.qb(13,0,null,null,1,"button",[["class","btn btn-primary ml-3"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.nextPage()&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Next"]))],(function(l,n){l(n,8,0,n.component.results)}),null)}function Fi(l){return e.Mb(0,[(l()(),e.fb(16777216,null,null,1,null,_i)),e.pb(1,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,wi)),e.pb(3,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,Ai)),e.pb(5,16384,null,0,c.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component;l(n,1,0,u.browseIsActive()),l(n,3,0,u.browseIsDone()&&!u.browseHasResults()),l(n,5,0,u.browseHasResults())}),null)}class Oi{constructor(l){this.staffCat=l}ngOnInit(){this.staffCat.createContext(),this.searchForm.searchTab="browse"}}var Ei=e.ob({encapsulation:2,styles:[],data:{}});function Ri(l){return e.Mb(0,[e.Ib(402653184,1,{searchForm:0}),(l()(),e.qb(1,0,null,null,1,"eg-staff-banner",[["bannerText","Staff Catalog (Experimental)"]],null,null,null,i.b,i.a)),e.pb(2,49152,null,0,r.a,[],{bannerText:[0,"bannerText"]},null),(l()(),e.qb(3,0,null,null,1,"eg-catalog-search-form",[],null,null,null,Pl,al)),e.pb(4,4308992,[[1,4],["searchForm",4]],0,tl,[e.C,C.l,C.a,m.a,x.a,T],null,null),(l()(),e.qb(5,0,null,null,1,"eg-catalog-browse-results",[],null,null,null,Fi,Ii)),e.pb(6,245760,null,0,ki,[C.a,x.a,M.a,T],null,null)],(function(l,n){l(n,2,0,"Staff Catalog (Experimental)"),l(n,4,0),l(n,6,0)}),null)}function Bi(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,"ng-component",[],null,null,null,Ri,Ei)),e.pb(1,114688,null,0,Oi,[T],null,null)],(function(l,n){l(n,1,0)}),null)}var Li=e.mb("ng-component",Oi,Bi,{},{},[]);class Ui{constructor(l){this.staffCat=l}ngOnInit(){this.staffCat.createContext(),this.searchForm.searchTab="cnbrowse"}}var ji=e.ob({encapsulation:2,styles:[],data:{}});function $i(l){return e.Mb(0,[e.Ib(402653184,1,{searchForm:0}),(l()(),e.qb(1,0,null,null,1,"eg-staff-banner",[["bannerText","Staff Catalog (Experimental)"]],null,null,null,i.b,i.a)),e.pb(2,49152,null,0,r.a,[],{bannerText:[0,"bannerText"]},null),(l()(),e.qb(3,0,null,null,1,"eg-catalog-search-form",[],null,null,null,Pl,al)),e.pb(4,4308992,[[1,4],["searchForm",4]],0,tl,[e.C,C.l,C.a,m.a,x.a,T],null,null),(l()(),e.qb(5,0,null,null,1,"eg-catalog-cn-browse-results",[],null,null,null,Pa,wa)),e.pb(6,245760,null,0,_a,[C.l,C.a,m.a,Pn.a,x.a,Yl.a,M.a,T],null,null)],(function(l,n){l(n,2,0,"Staff Catalog (Experimental)"),l(n,4,0),l(n,6,0)}),null)}function Vi(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,"ng-component",[],null,null,null,$i,ji)),e.pb(1,114688,null,0,Ui,[T],null,null)],(function(l,n){l(n,1,0)}),null)}var Gi=e.mb("ng-component",Ui,Vi,{},{},[]),zi=u("a07c"),Wi=u("ib0n");const Ji=["eg.search.search_lib","eg.search.pref_lib","eg.search.adv_pane","eg.catalog.results.count"];class Qi{constructor(l,n,u){this.store=l,this.toast=n,this.staffCat=u,this.settings={}}ngOnInit(){this.staffCat.createContext(),this.store.getItemBatch(Ji).then(l=>this.settings=l)}orgChanged(l,n){const u="eg.search.search_lib"===n?"defaultSearchOrg":"prefOrg";this.updateValue(n,l?l.id():null).then(l=>this.staffCat[u]=l)}paneChanged(l){this.updateValue("eg.search.adv_pane",l?l.id:null).then(l=>this.staffCat.defaultTab=l)}countChanged(){this.updateValue("eg.catalog.results.count",this.settings["eg.catalog.results.count"]||null).then(l=>{this.staffCat.searchContext.pager.limit=l||20})}updateValue(l,n){return(null===n?this.store.removeItem(l):this.store.setItem(l,n)).then(l=>this.toast.success(this.successMsg.text)).then(l=>n)}}var Zi=e.ob({encapsulation:2,styles:[],data:{}});function Yi(l){return e.Mb(0,[e.Ib(671088640,1,{successMsg:0}),e.Ib(671088640,2,{failMsg:0}),(l()(),e.qb(2,0,null,null,1,"eg-catalog-search-form",[],null,null,null,Pl,al)),e.pb(3,4308992,[["searchForm",4]],0,tl,[e.C,C.l,C.a,m.a,x.a,T],null,null),(l()(),e.qb(4,0,null,null,1,"eg-staff-banner",[["bannerText","Catalog Preferences"]],null,null,null,i.b,i.a)),e.pb(5,49152,null,0,r.a,[],{bannerText:[0,"bannerText"]},null),(l()(),e.qb(6,0,null,null,1,"eg-string",[["text","Setting Update Succeeded"]],null,null,null,q.b,q.a)),e.pb(7,114688,[[1,4],["successMsg",4]],0,k.a,[e.k,I.a],{text:[0,"text"]},null),(l()(),e.qb(8,0,null,null,1,"eg-string",[["text","Setting Update Failed"]],null,null,null,q.b,q.a)),e.pb(9,114688,[[2,4],["failMsg",4]],0,k.a,[e.k,I.a],{text:[0,"text"]},null),(l()(),e.qb(10,0,null,null,8,"div",[["class","row border-bottom border-secondary p-2 m-2"]],null,null,null,null,null)),(l()(),e.qb(11,0,null,null,2,"div",[["class","col-lg-2 offset-lg-1"]],null,null,null,null,null)),(l()(),e.qb(12,0,null,null,1,"label",[["class","font-weight-bold"],["for","default-lib-selector"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,[" Default Search Library "])),(l()(),e.qb(14,0,null,null,2,"div",[["class","col-lg-2"]],null,null,null,null,null)),(l()(),e.qb(15,0,null,null,1,"eg-org-select",[["domId","default-lib-selector"]],null,[[null,"onChange"]],(function(l,n,u){var e=!0;return"onChange"===n&&(e=!1!==l.component.orgChanged(u,"eg.search.search_lib")&&e),e}),d.b,d.a)),e.pb(16,114688,null,0,p.a,[h.a,g.a,m.a,f.a],{domId:[0,"domId"],applyOrgId:[1,"applyOrgId"]},{onChange:"onChange"}),(l()(),e.qb(17,0,null,null,1,"div",[["class","col-lg-6"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,[" The default search library setting determines what library is searched from the advanced search screen and portal page by default. Manual selection of a search library will override it. One recommendation is to set the search library to the highest point you would normally want to search. "])),(l()(),e.qb(19,0,null,null,8,"div",[["class","row border-bottom border-secondary p-2 m-2"]],null,null,null,null,null)),(l()(),e.qb(20,0,null,null,2,"div",[["class","col-lg-2 offset-lg-1"]],null,null,null,null,null)),(l()(),e.qb(21,0,null,null,1,"label",[["class","font-weight-bold"],["for","pref-lib-selector"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,[" Preferred Library "])),(l()(),e.qb(23,0,null,null,2,"div",[["class","col-lg-2"]],null,null,null,null,null)),(l()(),e.qb(24,0,null,null,1,"eg-org-select",[["domId","pref-lib-selector"]],null,[[null,"onChange"]],(function(l,n,u){var e=!0;return"onChange"===n&&(e=!1!==l.component.orgChanged(u,"eg.search.pref_lib")&&e),e}),d.b,d.a)),e.pb(25,114688,null,0,p.a,[h.a,g.a,m.a,f.a],{domId:[0,"domId"],applyOrgId:[1,"applyOrgId"]},{onChange:"onChange"}),(l()(),e.qb(26,0,null,null,1,"div",[["class","col-lg-6"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,[" The preferred library is used to show copies and URIs regardless of the library searched. One recommendation is to set this to your workstation library so that local copies show up first in search results. "])),(l()(),e.qb(28,0,null,null,19,"div",[["class","row border-bottom border-secondary p-2 m-2"]],null,null,null,null,null)),(l()(),e.qb(29,0,null,null,2,"div",[["class","col-lg-2 offset-lg-1"]],null,null,null,null,null)),(l()(),e.qb(30,0,null,null,1,"label",[["class","font-weight-bold"],["for","def-pane-selector"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,[" Default Search Pane "])),(l()(),e.qb(32,0,null,null,13,"div",[["class","col-lg-2"]],null,null,null,null,null)),(l()(),e.qb(33,0,null,null,12,"eg-combobox",[],null,[[null,"onChange"]],(function(l,n,u){var e=!0;return"onChange"===n&&(e=!1!==l.component.paneChanged(u)&&e),e}),Wu.b,Wu.a)),e.Hb(5120,null,s.o,(function(l){return[l]}),[Ju.a]),e.pb(35,114688,null,0,Ju.a,[e.k,g.a,J.a,Pn.a],{selectedId:[0,"selectedId"]},{onChange:"onChange"}),(l()(),e.qb(36,0,null,null,1,"eg-combobox-entry",[["entryId","advanced"],["entryLabel","Keyword Search"]],null,null,null,zi.b,zi.a)),e.pb(37,114688,null,0,Wi.a,[Ju.a],{entryId:[0,"entryId"],entryLabel:[1,"entryLabel"]},null),(l()(),e.qb(38,0,null,null,1,"eg-combobox-entry",[["entryId","numeric"],["entryLabel","Numeric Search"]],null,null,null,zi.b,zi.a)),e.pb(39,114688,null,0,Wi.a,[Ju.a],{entryId:[0,"entryId"],entryLabel:[1,"entryLabel"]},null),(l()(),e.qb(40,0,null,null,1,"eg-combobox-entry",[["entryId","expert"],["entryLabel","MARC Search"]],null,null,null,zi.b,zi.a)),e.pb(41,114688,null,0,Wi.a,[Ju.a],{entryId:[0,"entryId"],entryLabel:[1,"entryLabel"]},null),(l()(),e.qb(42,0,null,null,1,"eg-combobox-entry",[["entryId","browse"],["entryLabel","Browse"]],null,null,null,zi.b,zi.a)),e.pb(43,114688,null,0,Wi.a,[Ju.a],{entryId:[0,"entryId"],entryLabel:[1,"entryLabel"]},null),(l()(),e.qb(44,0,null,null,1,"eg-combobox-entry",[["entryId","cnbrowse"],["entryLabel","Shelf Browse"]],null,null,null,zi.b,zi.a)),e.pb(45,114688,null,0,Wi.a,[Ju.a],{entryId:[0,"entryId"],entryLabel:[1,"entryLabel"]},null),(l()(),e.qb(46,0,null,null,1,"div",[["class","col-lg-6"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,[" Focus this search tab by default when opening new catalog pages. "])),(l()(),e.qb(48,0,null,null,13,"div",[["class","row border-bottom border-secondary p-2 m-2"]],null,null,null,null,null)),(l()(),e.qb(49,0,null,null,2,"div",[["class","col-lg-2 offset-lg-1"]],null,null,null,null,null)),(l()(),e.qb(50,0,null,null,1,"label",[["class","font-weight-bold"],["for","pref-lib-selector"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,[" Search Results Per Page "])),(l()(),e.qb(52,0,null,null,7,"div",[["class","col-lg-2"]],null,null,null,null,null)),(l()(),e.qb(53,0,null,null,6,"input",[["class","form-control"],["max","100"],["min","1"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,u){var t=!0,a=l.component;return"input"===n&&(t=!1!==e.Cb(l,54)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,54).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Cb(l,54)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Cb(l,54)._compositionEnd(u.target.value)&&t),"change"===n&&(t=!1!==e.Cb(l,55).onChange(u.target.value)&&t),"input"===n&&(t=!1!==e.Cb(l,55).onChange(u.target.value)&&t),"blur"===n&&(t=!1!==e.Cb(l,55).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(a.settings["eg.catalog.results.count"]=u)&&t),"change"===n&&(t=!1!==a.countChanged()&&t),t}),null,null)),e.pb(54,16384,null,0,s.d,[e.C,e.k,[2,s.a]],null,null),e.pb(55,16384,null,0,s.v,[e.C,e.k],null,null),e.Hb(1024,null,s.o,(function(l,n){return[l,n]}),[s.d,s.v]),e.pb(57,671744,null,0,s.t,[[8,null],[8,null],[8,null],[6,s.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,s.p,null,[s.t]),e.pb(59,16384,null,0,s.q,[[4,s.p]],null,null),(l()(),e.qb(60,0,null,null,1,"div",[["class","col-lg-6"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,[" The number of search results to display per page. "]))],(function(l,n){var u=n.component;l(n,3,0),l(n,5,0,"Catalog Preferences"),l(n,7,0,"Setting Update Succeeded"),l(n,9,0,"Setting Update Failed"),l(n,16,0,"default-lib-selector",u.settings["eg.search.search_lib"]),l(n,25,0,"pref-lib-selector",u.settings["eg.search.pref_lib"]),l(n,35,0,u.settings["eg.search.adv_pane"]),l(n,37,0,"advanced","Keyword Search"),l(n,39,0,"numeric","Numeric Search"),l(n,41,0,"expert","MARC Search"),l(n,43,0,"browse","Browse"),l(n,45,0,"cnbrowse","Shelf Browse"),l(n,57,0,u.settings["eg.catalog.results.count"])}),(function(l,n){l(n,53,0,e.Cb(n,59).ngClassUntouched,e.Cb(n,59).ngClassTouched,e.Cb(n,59).ngClassPristine,e.Cb(n,59).ngClassDirty,e.Cb(n,59).ngClassValid,e.Cb(n,59).ngClassInvalid,e.Cb(n,59).ngClassPending)}))}function Xi(l){return e.Mb(0,[(l()(),e.qb(0,0,null,null,1,"ng-component",[],null,null,null,Yi,Zi)),e.pb(1,114688,null,0,Qi,[_.a,W.a,T],null,null)],(function(l,n){l(n,1,0)}),null)}var lr=e.mb("ng-component",Qi,Xi,{},{},[]),nr=u("EWr9");class ur{constructor(l,n,u,e,t,a,o,i){this.router=l,this.store=n,this.org=u,this.net=e,this.auth=t,this.cat=a,this.staffCat=o,this.basket=i}resolve(l,n){return console.debug("CatalogResolver:resolve()"),Promise.all([this.cat.fetchCcvms(),this.cat.fetchCmfs(),this.fetchSettings(),this.basket.getRecordIds()])}fetchSettings(){return this.store.getItemBatch(["eg.search.search_lib","eg.search.pref_lib","eg.search.adv_pane","eg.catalog.results.count","cat.holdings_show_empty_org","cat.holdings_show_empty","cat.marcedit.stack_subfields","cat.marcedit.flateditor","cat.holdings_show_copies","cat.holdings_show_vols","opac.staff_saved_search.size","eg.catalog.search_templates","opac.staff_saved_search.size"]).then(l=>{this.staffCat.defaultSearchOrg=this.org.get(l["eg.search.search_lib"]),this.staffCat.prefOrg=this.org.get(l["eg.search.pref_lib"]),this.staffCat.defaultTab=l["eg.search.adv_pane"],l["eg.catalog.results.count"]&&(this.staffCat.defaultSearchLimit=Number(l["eg.catalog.results.count"]))})}}var er=u("W4aW"),tr=u("r7vI"),ar=u("pKmL"),or=u("9RLy"),ir=u("VEwP"),rr=u("NR/D"),sr=u("r2N+"),cr=u("ZqI7"),br=u("MhCk"),dr=u("MZHd"),pr=u("EBEo"),hr=u("zF8d");let gr=(()=>{class l{canDeactivate(l){return!l.canDeactivate||l.canDeactivate()}}return l.ngInjectableDef=e.Qb({factory:function(){return new l},token:l,providedIn:"root"}),l})();class mr{}var fr=u("fkVb");class Cr{}class vr{}var yr=u("Y/mG"),qr=u("9u+K");u.d(n,"CatalogModuleNgFactory",(function(){return kr}));var kr=e.nb(t,[],(function(l){return e.zb([e.Ab(512,e.j,e.Y,[[8,[a.a,o.a,o.b,o.p,o.q,o.m,o.n,o.o,El,Yn,wo,qi,Li,Gi,lr]],[3,e.j],e.w]),e.Ab(4608,c.r,c.q,[e.t,[2,c.S]]),e.Ab(4608,s.D,s.D,[]),e.Ab(4608,s.g,s.g,[]),e.Ab(4608,b.E,b.E,[e.j,e.q,b.Fb,b.F]),e.Ab(4608,c.f,c.f,[e.t]),e.Ab(4608,c.d,c.d,[e.t]),e.Ab(4608,I.a,I.a,[]),e.Ab(4608,nr.a,nr.a,[m.a]),e.Ab(4608,Yl.a,Yl.a,[J.a,Q.b,m.a,nr.a,Pn.a]),e.Ab(4608,Y.a,Y.a,[Q.b,Pn.a,g.a,K.a]),e.Ab(4608,x.a,x.a,[J.a,Q.b,m.a,nr.a,Pn.a,Yl.a,Y.a]),e.Ab(4608,M.a,M.a,[m.a]),e.Ab(4608,T,T,[C.l,C.a,m.a,x.a,M.a]),e.Ab(4608,ur,ur,[C.l,_.a,m.a,Q.b,h.a,x.a,T,Y.a]),e.Ab(4608,fu.a,fu.a,[Q.b,h.a,Z.a,K.a]),e.Ab(4608,Ke,Ke,[Z.a,Q.b,h.a,Yl.a]),e.Ab(4608,er.a,er.a,[Q.b,h.a]),e.Ab(4608,tr.a,tr.a,[g.a,h.a,Q.b,Pn.a]),e.Ab(1073742336,c.c,c.c,[]),e.Ab(1073742336,s.C,s.C,[]),e.Ab(1073742336,s.l,s.l,[]),e.Ab(1073742336,s.x,s.x,[]),e.Ab(1073742336,C.o,C.o,[[2,C.t],[2,C.l]]),e.Ab(1073742336,b.c,b.c,[]),e.Ab(1073742336,b.f,b.f,[]),e.Ab(1073742336,b.g,b.g,[]),e.Ab(1073742336,b.k,b.k,[]),e.Ab(1073742336,b.l,b.l,[]),e.Ab(1073742336,b.t,b.t,[]),e.Ab(1073742336,b.z,b.z,[]),e.Ab(1073742336,b.G,b.G,[]),e.Ab(1073742336,b.I,b.I,[]),e.Ab(1073742336,b.N,b.N,[]),e.Ab(1073742336,b.U,b.U,[]),e.Ab(1073742336,b.X,b.X,[]),e.Ab(1073742336,b.ab,b.ab,[]),e.Ab(1073742336,b.gb,b.gb,[]),e.Ab(1073742336,b.lb,b.lb,[]),e.Ab(1073742336,b.ob,b.ob,[]),e.Ab(1073742336,b.rb,b.rb,[]),e.Ab(1073742336,b.ub,b.ub,[]),e.Ab(1073742336,b.H,b.H,[]),e.Ab(1073742336,ar.a,ar.a,[]),e.Ab(1073742336,or.a,or.a,[]),e.Ab(1073742336,ir.a,ir.a,[]),e.Ab(1073742336,rr.a,rr.a,[]),e.Ab(1073742336,sr.a,sr.a,[]),e.Ab(1073742336,cr.a,cr.a,[]),e.Ab(1073742336,br.a,br.a,[]),e.Ab(1073742336,dr.a,dr.a,[]),e.Ab(1073742336,pr.a,pr.a,[]),e.Ab(1073742336,hr.a,hr.a,[]),e.Ab(1073742336,mr,mr,[]),e.Ab(1073742336,fr.a,fr.a,[]),e.Ab(1073742336,Cr,Cr,[]),e.Ab(1073742336,vr,vr,[]),e.Ab(1073742336,yr.a,yr.a,[]),e.Ab(1073742336,qr.a,qr.a,[]),e.Ab(1073742336,t,t,[]),e.Ab(1024,C.j,(function(){return[[{path:"",component:Hl,resolve:{catResolver:ur},children:[{path:"search",component:Hn},{path:"record/:id",component:so},{path:"hold/:type",component:$o},{path:"record/:id/:tab",component:so,canDeactivate:[gr]}]},{path:"browse",component:Oi,resolve:{catResolver:ur}},{path:"cnbrowse",component:Ui,resolve:{catResolver:ur}},{path:"prefs",component:Qi,resolve:{catResolver:ur}}]]}),[])])}))},DwFa:function(l,n,u){"use strict";u.d(n,"a",(function(){return t})),u.d(n,"b",(function(){return o}));var e=u("8Y7J"),t=(u("t7hH"),u("9Zsr"),e.ob({encapsulation:2,styles:[],data:{}}));function a(l){return e.Mb(0,[(l()(),e.fb(0,null,null,0))],null,null)}function o(l){return e.Mb(0,[(l()(),e.fb(0,null,null,0,null,a))],null,null)}},"Id+k":function(l,n,u){"use strict";u.d(n,"a",(function(){return t})),u.d(n,"b",(function(){return o}));var e=u("8Y7J"),t=(u("eXX1"),u("9Zsr"),e.ob({encapsulation:2,styles:[],data:{}}));function a(l){return e.Mb(0,[(l()(),e.fb(0,null,null,0))],null,null)}function o(l){return e.Mb(0,[(l()(),e.fb(0,null,null,0,null,a))],null,null)}},a07c:function(l,n,u){"use strict";u.d(n,"a",(function(){return t})),u.d(n,"b",(function(){return o}));var e=u("8Y7J"),t=(u("ib0n"),u("9rfo"),e.ob({encapsulation:2,styles:[],data:{}}));function a(l){return e.Mb(0,[(l()(),e.fb(0,null,null,0))],null,null)}function o(l){return e.Mb(0,[(l()(),e.fb(0,null,null,0,null,a))],null,null)}},eXX1:function(l,n,u){"use strict";u.d(n,"a",(function(){return a}));var e=u("8Y7J"),t=u("MWGh");u("9Zsr");class a{constructor(l){this.grid=l,this.onClick=new e.m,this.button=new t.e,this.button.onClick=this.onClick}set disabled(l){this.button&&(this.button.disabled=l)}ngOnInit(){this.grid?(this.button.label=this.label,this.button.action=this.action,this.grid.context.toolbarButtons.push(this.button)):console.warn("GridToolbarButtonComponent needs a [grid]")}}},ib0n:function(l,n,u){"use strict";u.d(n,"a",(function(){return e})),u("9rfo");class e{constructor(l){this.combobox=l}ngOnInit(){this.selected&&(this.combobox.startId=this.entryId),this.combobox.addEntry({id:this.entryId,label:this.entryLabel})}}},t7hH:function(l,n,u){"use strict";u.d(n,"a",(function(){return t}));var e=u("MWGh");u("9Zsr");class t{constructor(l){this.grid=l}ngOnInit(){if(!this.grid)return void console.warn("GridColumnComponent needs an <eg-grid>");const l=new e.a;l.name=this.name,l.path=this.path,l.label=this.label,l.flex=this.flex,l.hidden=!0===this.hidden,l.isIndex=!0===this.index,l.cellTemplate=this.cellTemplate,l.cellContext=this.cellContext,l.disableTooltip=this.disableTooltip,l.isSortable=this.sortable,l.isFilterable=this.filterable,l.isMultiSortable=this.multiSortable,l.datatype=this.datatype,l.datePlusTime=this.datePlusTime,l.ternaryBool=this.ternaryBool,l.timezoneContextOrg=this.timezoneContextOrg,l.isAuto=!1,this.grid.context.columnSet.add(l),this.cellTemplate&&!this.grid.context.columnHasTextGenerator(l)&&console.warn('No cellTextGenerator provided for "'+l.name+'"')}}}}]);