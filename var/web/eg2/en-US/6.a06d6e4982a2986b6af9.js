(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"3ibj":function(l,n,e){"use strict";e.d(n,"a",(function(){return A})),e.d(n,"b",(function(){return Z}));var t=e("8Y7J"),i=e("4D8R"),s=e("UjDu"),u=e("8PDw"),a=e("cm5s"),r=e("s7LF"),o=e("SVse"),d=e("DwFa"),c=e("t7hH"),h=e("9Zsr"),b=e("StZw"),g=e("tNQm"),p=e("G8BM"),f=e("MTty"),m=e("oCNH"),C=e("G0yt"),F=e("wBwE"),S=e("YRS1"),I=e("A9LY"),y=e("iA0r"),k=e("Qm07"),v=e("OsfI"),D=e("ZvpF"),w=e("Id+k"),O=e("eXX1"),x=e("y+3C"),q=e("QGNW"),T=e("7Apk"),M=e("UUQ6"),A=(e("RAh1"),e("iInd"),e("wN9v"),t.ob({encapsulation:2,styles:[],data:{}}));function N(l){return t.Mb(0,[(l()(),t.Kb(0,null,[""," Update Succeeded"]))],null,(function(l,n){l(n,0,0,n.component.idlClassDef.label)}))}function P(l){return t.Mb(0,[(l()(),t.Kb(0,null,["Update of "," failed"]))],null,(function(l,n){l(n,0,0,n.component.idlClassDef.label)}))}function R(l){return t.Mb(0,[(l()(),t.Kb(0,null,["Delete of "," failed or was not allowed"]))],null,(function(l,n){l(n,0,0,n.component.idlClassDef.label)}))}function K(l){return t.Mb(0,[(l()(),t.Kb(0,null,[""," Successfully Deleted"]))],null,(function(l,n){l(n,0,0,n.component.idlClassDef.label)}))}function L(l){return t.Mb(0,[(l()(),t.Kb(0,null,[""," Succeessfully Created"]))],null,(function(l,n){l(n,0,0,n.component.idlClassDef.label)}))}function E(l){return t.Mb(0,[(l()(),t.Kb(0,null,["Failed to create new ",""]))],null,(function(l,n){l(n,0,0,n.component.idlClassDef.label)}))}function U(l){return t.Mb(0,[(l()(),t.qb(0,0,null,null,6,null,null,null,null,null,null,null)),(l()(),t.qb(1,0,null,null,5,"eg-org-family-select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],(function(l,n,e){var i=!0;return"ngModelChange"===n&&(i=!1!==(l.component.searchOrgs=e)&&i),"ngModelChange"===n&&(i=!1!==t.Cb(l.parent.parent,35).reload()&&i),i}),i.b,i.a)),t.pb(2,114688,null,0,s.a,[u.a,a.a],{selectedOrgId:[0,"selectedOrgId"],limitPerms:[1,"limitPerms"]},null),t.Hb(1024,null,r.o,(function(l){return[l]}),[s.a]),t.pb(4,671744,null,0,r.t,[[8,null],[8,null],[8,null],[6,r.o]],{model:[0,"model"]},{update:"ngModelChange"}),t.Hb(2048,null,r.p,null,[r.t]),t.pb(6,16384,null,0,r.q,[[4,r.p]],null,null)],(function(l,n){var e=n.component;l(n,2,0,e.contextOrg.id(),e.viewPerms),l(n,4,0,e.searchOrgs)}),(function(l,n){l(n,1,0,t.Cb(n,6).ngClassUntouched,t.Cb(n,6).ngClassTouched,t.Cb(n,6).ngClassPristine,t.Cb(n,6).ngClassDirty,t.Cb(n,6).ngClassValid,t.Cb(n,6).ngClassInvalid,t.Cb(n,6).ngClassPending)}))}function V(l){return t.Mb(0,[(l()(),t.qb(0,0,null,null,5,null,null,null,null,null,null,null)),(l()(),t.qb(1,0,null,null,2,"span",[],null,null,null,null,null)),(l()(),t.Kb(2,null,["Filters Applied: ",""])),t.Eb(0,o.j,[]),(l()(),t.qb(4,0,null,null,1,"a",[["class","pl-2 font-italic"]],[[1,"href",4]],null,null,null,null)),(l()(),t.Kb(-1,null,["Clear Filters"]))],null,(function(l,n){var e=n.component;l(n,2,0,t.Lb(n,2,0,t.Cb(n,3).transform(e.gridFilters))),l(n,4,0,e.clearGridFiltersUrl())}))}function j(l){return t.Mb(0,[(l()(),t.qb(0,0,null,null,9,null,null,null,null,null,null,null)),(l()(),t.qb(1,0,null,null,7,"div",[["class","row"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,2,"div",[["class","col-lg-6"]],null,null,null,null,null)),(l()(),t.fb(16777216,null,null,1,null,U)),t.pb(4,16384,null,0,o.p,[t.N,t.K],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(5,0,null,null,3,"div",[["class","col-lg-6 d-flex"]],null,null,null,null,null)),(l()(),t.qb(6,0,null,null,0,"div",[["class","flex-1"]],null,null,null,null,null)),(l()(),t.fb(16777216,null,null,1,null,V)),t.pb(8,16384,null,0,o.p,[t.N,t.K],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(9,0,null,null,0,"hr",[],null,null,null,null,null))],(function(l,n){var e=n.component;l(n,4,0,e.orgField),l(n,8,0,e.gridFilters)}),null)}function G(l){return t.Mb(0,[(l()(),t.qb(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function H(l){return t.Mb(0,[(l()(),t.qb(0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),t.fb(16777216,null,null,1,null,G)),t.pb(2,540672,null,0,o.y,[t.N],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(l()(),t.fb(0,null,null,0))],(function(l,n){l(n,2,0,n.component.helpTemplate)}),null)}function B(l){return t.Mb(0,[(l()(),t.qb(0,0,null,null,1,"a",[],[[8,"title",0],[1,"href",4]],null,null,null,null)),(l()(),t.Kb(1,null,["",""]))],null,(function(l,n){var e=n.component;l(n,0,0,t.ub(1,"Link To ",n.context.col.label,""),e.configFieldLinkUrl(n.context.row,n.context.col)),l(n,1,0,e.configLinkLabel(n.context.row,n.context.col))}))}function J(l){return t.Mb(0,[(l()(),t.qb(0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"eg-grid-column",[],null,null,null,d.b,d.a)),t.pb(2,114688,null,0,c.a,[h.a],{name:[0,"name"],cellTemplate:[1,"cellTemplate"]},null)],(function(l,n){l(n,2,0,t.ub(1,"",n.context.$implicit.name,""),t.Cb(n.parent,33))}),null)}function Z(l){return t.Mb(0,[t.Ib(402653184,1,{grid:0}),t.Ib(402653184,2,{editDialog:0}),t.Ib(402653184,3,{successString:0}),t.Ib(402653184,4,{createString:0}),t.Ib(402653184,5,{createErrString:0}),t.Ib(402653184,6,{updateFailedString:0}),t.Ib(402653184,7,{deleteFailedString:0}),t.Ib(402653184,8,{deleteSuccessString:0}),t.Ib(402653184,9,{translator:0}),(l()(),t.fb(0,[["successStrTmpl",2]],null,0,null,N)),(l()(),t.qb(10,0,null,null,1,"eg-string",[],null,null,null,b.b,b.a)),t.pb(11,114688,[[3,4],["successString",4]],0,g.a,[t.k,p.a],{template:[0,"template"]},null),(l()(),t.fb(0,[["updateFailedStrTmpl",2]],null,0,null,P)),(l()(),t.qb(13,0,null,null,1,"eg-string",[],null,null,null,b.b,b.a)),t.pb(14,114688,[[6,4],["updateFailedString",4]],0,g.a,[t.k,p.a],{template:[0,"template"]},null),(l()(),t.fb(0,[["deleteFailedStrTmpl",2]],null,0,null,R)),(l()(),t.qb(16,0,null,null,1,"eg-string",[],null,null,null,b.b,b.a)),t.pb(17,114688,[[7,4],["deleteFailedString",4]],0,g.a,[t.k,p.a],{template:[0,"template"]},null),(l()(),t.fb(0,[["deleteSuccessStrTmpl",2]],null,0,null,K)),(l()(),t.qb(19,0,null,null,1,"eg-string",[],null,null,null,b.b,b.a)),t.pb(20,114688,[[8,4],["deleteSuccessString",4]],0,g.a,[t.k,p.a],{template:[0,"template"]},null),(l()(),t.fb(0,[["createStrTmpl",2]],null,0,null,L)),(l()(),t.qb(22,0,null,null,1,"eg-string",[],null,null,null,b.b,b.a)),t.pb(23,114688,[[4,4],["createString",4]],0,g.a,[t.k,p.a],{template:[0,"template"]},null),(l()(),t.fb(0,[["createErrStrTmpl",2]],null,0,null,E)),(l()(),t.qb(25,0,null,null,1,"eg-string",[],null,null,null,b.b,b.a)),t.pb(26,114688,[[5,4],["createErrString",4]],0,g.a,[t.k,p.a],{template:[0,"template"]},null),(l()(),t.fb(16777216,null,null,1,null,j)),t.pb(28,16384,null,0,o.p,[t.N,t.K],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(29,0,null,null,1,"eg-translate",[],null,null,null,f.b,f.a)),t.pb(30,114688,[[9,4],["translator",4]],0,m.a,[C.E,t.C,F.a,S.a,I.a,y.a,u.a],null,null),(l()(),t.fb(16777216,null,null,1,null,H)),t.pb(32,16384,null,0,o.p,[t.N,t.K],{ngIf:[0,"ngIf"]},null),(l()(),t.fb(0,[["configFieldLink",2]],null,0,null,B)),(l()(),t.qb(34,0,null,null,11,"eg-grid",[],null,null,null,k.b,k.a)),t.pb(35,4440064,[[1,4],["grid",4]],0,h.a,[F.a,a.a,v.a,D.a],{dataSource:[0,"dataSource"],idlClass:[1,"idlClass"],sortable:[2,"sortable"],persistKey:[3,"persistKey"],hideFields:[4,"hideFields"]},null),(l()(),t.qb(36,0,null,null,1,"eg-grid-toolbar-button",[],null,[[null,"onClick"]],(function(l,n,e){var t=!0;return"onClick"===n&&(t=!1!==l.component.createNew()&&t),t}),w.b,w.a)),t.pb(37,114688,null,0,O.a,[h.a],{label:[0,"label"],disabled:[1,"disabled"]},{onClick:"onClick"}),(l()(),t.qb(38,0,null,null,1,"eg-grid-toolbar-button",[["label","Apply Translations"]],null,[[null,"onClick"]],(function(l,n,e){var t=!0;return"onClick"===n&&(t=!1!==l.component.translate()&&t),t}),w.b,w.a)),t.pb(39,114688,null,0,O.a,[h.a],{label:[0,"label"],disabled:[1,"disabled"]},{onClick:"onClick"}),(l()(),t.qb(40,0,null,null,1,"eg-grid-toolbar-action",[["label","Edit Selected"]],null,[[null,"onClick"]],(function(l,n,e){var t=!0;return"onClick"===n&&(t=!1!==l.component.editSelected(e)&&t),t}),x.b,x.a)),t.pb(41,114688,null,0,q.a,[h.a],{label:[0,"label"]},{onClick:"onClick"}),(l()(),t.qb(42,0,null,null,1,"eg-grid-toolbar-action",[["label","Delete Selected"]],null,[[null,"onClick"]],(function(l,n,e){var t=!0;return"onClick"===n&&(t=!1!==l.component.deleteSelected(e)&&t),t}),x.b,x.a)),t.pb(43,114688,null,0,q.a,[h.a],{label:[0,"label"]},{onClick:"onClick"}),(l()(),t.fb(16777216,null,null,1,null,J)),t.pb(45,278528,null,0,o.o,[t.N,t.K,t.r],{ngForOf:[0,"ngForOf"]},null),(l()(),t.qb(46,0,null,null,1,"eg-fm-record-editor",[],null,null,null,T.b,T.a)),t.pb(47,114688,[[2,4],["editDialog",4]],0,M.a,[C.E,F.a,u.a,S.a,D.a,y.a],{idlClass:[0,"idlClass"],fieldOptions:[1,"fieldOptions"],defaultNewRecord:[2,"defaultNewRecord"],readonlyFields:[3,"readonlyFields"],preloadLinkedValues:[4,"preloadLinkedValues"]},null)],(function(l,n){var e=n.component;l(n,11,0,t.Cb(n,9)),l(n,14,0,t.Cb(n,12)),l(n,17,0,t.Cb(n,15)),l(n,20,0,t.Cb(n,18)),l(n,23,0,t.Cb(n,21)),l(n,26,0,t.Cb(n,24)),l(n,28,0,e.orgField||e.gridFilters),l(n,30,0),l(n,32,0,e.helpTemplate),l(n,35,0,e.dataSource,t.ub(1,"",e.idlClass,""),!0,t.ub(1,"",e.persistKey,""),t.ub(1,"",e.hideGridFields,"")),l(n,37,0,t.ub(1,"New ",e.idlClassDef.label,""),!e.canCreate),l(n,39,0,"Apply Translations",0==e.translatableFields.length),l(n,41,0,"Edit Selected"),l(n,43,0,"Delete Selected"),l(n,45,0,e.configFields),l(n,47,0,t.ub(1,"",e.idlClass,""),e.fieldOptions,e.defaultNewRecord,t.ub(1,"",e.readonlyFields,""),!0)}),null)}},"4D8R":function(l,n,e){"use strict";e.d(n,"a",(function(){return h})),e.d(n,"b",(function(){return p}));var t=e("8Y7J"),i=e("s7LF"),s=e("gBxT"),u=e("wVJ/"),a=e("8PDw"),r=e("OXuP"),o=e("cm5s"),d=e("wN9v"),c=e("SVse"),h=(e("UjDu"),t.ob({encapsulation:2,styles:[],data:{}}));function b(l){return t.Mb(0,[(l()(),t.qb(0,0,null,null,8,"div",[["class","form-check"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,5,"input",[["class","form-check-input"],["formControlName","includeAncestors"],["type","checkbox"]],[[8,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"blur"],[null,"change"]],(function(l,n,e){var i=!0,s=l.component;return"change"===n&&(i=!1!==t.Cb(l,2).onChange(e.target.checked)&&i),"blur"===n&&(i=!1!==t.Cb(l,2).onTouched()&&i),"blur"===n&&(i=!1!==s.propagateTouch()&&i),i}),null,null)),t.pb(2,16384,null,0,i.b,[t.C,t.k],null,null),t.Hb(1024,null,i.o,(function(l){return[l]}),[i.b]),t.pb(4,671744,null,0,i.i,[[3,i.c],[8,null],[8,null],[6,i.o],[2,i.E]],{name:[0,"name"]},null),t.Hb(2048,null,i.p,null,[i.i]),t.pb(6,16384,null,0,i.q,[[4,i.p]],null,null),(l()(),t.qb(7,0,null,null,1,"label",[["class","form-check-label"]],[[8,"htmlFor",0]],null,null,null,null)),(l()(),t.Kb(-1,null,["+ Ancestors"]))],(function(l,n){l(n,4,0,"includeAncestors")}),(function(l,n){var e=n.component;l(n,1,0,t.ub(1,"",e.domId,"-include-ancestors"),t.Cb(n,6).ngClassUntouched,t.Cb(n,6).ngClassTouched,t.Cb(n,6).ngClassPristine,t.Cb(n,6).ngClassDirty,t.Cb(n,6).ngClassValid,t.Cb(n,6).ngClassInvalid,t.Cb(n,6).ngClassPending),l(n,7,0,t.ub(1,"",e.domId,"-include-ancestors"))}))}function g(l){return t.Mb(0,[(l()(),t.qb(0,0,null,null,8,"div",[["class","form-check"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,5,"input",[["class","form-check-input"],["formControlName","includeDescendants"],["type","checkbox"]],[[8,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"blur"],[null,"change"]],(function(l,n,e){var i=!0,s=l.component;return"change"===n&&(i=!1!==t.Cb(l,2).onChange(e.target.checked)&&i),"blur"===n&&(i=!1!==t.Cb(l,2).onTouched()&&i),"blur"===n&&(i=!1!==s.propagateTouch()&&i),i}),null,null)),t.pb(2,16384,null,0,i.b,[t.C,t.k],null,null),t.Hb(1024,null,i.o,(function(l){return[l]}),[i.b]),t.pb(4,671744,null,0,i.i,[[3,i.c],[8,null],[8,null],[6,i.o],[2,i.E]],{name:[0,"name"]},null),t.Hb(2048,null,i.p,null,[i.i]),t.pb(6,16384,null,0,i.q,[[4,i.p]],null,null),(l()(),t.qb(7,0,null,null,1,"label",[["class","form-check-label"]],[[8,"htmlFor",0]],null,null,null,null)),(l()(),t.Kb(-1,null,["+ Descendants"]))],(function(l,n){l(n,4,0,"includeDescendants")}),(function(l,n){var e=n.component;l(n,1,0,t.ub(1,"",e.domId,"-include-descendants"),t.Cb(n,6).ngClassUntouched,t.Cb(n,6).ngClassTouched,t.Cb(n,6).ngClassPristine,t.Cb(n,6).ngClassDirty,t.Cb(n,6).ngClassValid,t.Cb(n,6).ngClassInvalid,t.Cb(n,6).ngClassPending),l(n,7,0,t.ub(1,"",e.domId,"-include-descendants"))}))}function p(l){return t.Mb(0,[(l()(),t.qb(0,0,null,null,15,"form",[["class","form-inline"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(l,n,e){var i=!0;return"submit"===n&&(i=!1!==t.Cb(l,2).onSubmit(e)&&i),"reset"===n&&(i=!1!==t.Cb(l,2).onReset()&&i),i}),null,null)),t.pb(1,16384,null,0,i.G,[],null,null),t.pb(2,540672,null,0,i.k,[[8,null],[8,null]],{form:[0,"form"]},null),t.Hb(2048,null,i.c,null,[i.k]),t.pb(4,16384,null,0,i.r,[[4,i.c]],null,null),(l()(),t.qb(5,0,null,null,5,"div",[["class","input-group"]],null,null,null,null,null)),(l()(),t.qb(6,0,null,null,2,"div",[["class","input-group-prepend"]],null,null,null,null,null)),(l()(),t.qb(7,0,null,null,1,"span",[["class","input-group-text"]],null,null,null,null,null)),(l()(),t.Kb(8,null,["",""])),(l()(),t.qb(9,0,null,null,1,"eg-org-select",[],null,[[null,"onChange"]],(function(l,n,e){var t=!0;return"onChange"===n&&(t=!1!==l.component.orgOnChange(e)&&t),t}),s.b,s.a)),t.pb(10,114688,null,0,u.a,[a.a,r.a,o.a,d.a],{domId:[0,"domId"],initialOrgId:[1,"initialOrgId"],limitPerms:[2,"limitPerms"]},{onChange:"onChange"}),(l()(),t.qb(11,0,null,null,4,"div",[["class","ml-2 d-flex flex-column align-items-start"]],null,null,null,null,null)),(l()(),t.fb(16777216,null,null,1,null,b)),t.pb(13,16384,null,0,c.p,[t.N,t.K],{ngIf:[0,"ngIf"]},null),(l()(),t.fb(16777216,null,null,1,null,g)),t.pb(15,16384,null,0,c.p,[t.N,t.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){var e=n.component;l(n,2,0,e.familySelectors),l(n,10,0,e.domId,e.selectedOrgId,e.limitPerms),l(n,13,0,!e.hideAncestorSelector),l(n,15,0,!e.hideDescendantSelector)}),(function(l,n){var e=n.component;l(n,0,0,t.Cb(n,4).ngClassUntouched,t.Cb(n,4).ngClassTouched,t.Cb(n,4).ngClassPristine,t.Cb(n,4).ngClassDirty,t.Cb(n,4).ngClassValid,t.Cb(n,4).ngClassInvalid,t.Cb(n,4).ngClassPending),l(n,8,0,e.labelText)}))}},"9eSZ":function(l,n,e){"use strict";e.d(n,"a",(function(){return t}));class t{}},DwFa:function(l,n,e){"use strict";e.d(n,"a",(function(){return i})),e.d(n,"b",(function(){return u}));var t=e("8Y7J"),i=(e("t7hH"),e("9Zsr"),t.ob({encapsulation:2,styles:[],data:{}}));function s(l){return t.Mb(0,[(l()(),t.fb(0,null,null,0))],null,null)}function u(l){return t.Mb(0,[(l()(),t.fb(0,null,null,0,null,s))],null,null)}},"Id+k":function(l,n,e){"use strict";e.d(n,"a",(function(){return i})),e.d(n,"b",(function(){return u}));var t=e("8Y7J"),i=(e("eXX1"),e("9Zsr"),t.ob({encapsulation:2,styles:[],data:{}}));function s(l){return t.Mb(0,[(l()(),t.fb(0,null,null,0))],null,null)}function u(l){return t.Mb(0,[(l()(),t.fb(0,null,null,0,null,s))],null,null)}},RAh1:function(l,n,e){"use strict";e.d(n,"a",(function(){return i})),e("wBwE"),e("ZvpF");var t=e("MWGh");e("9Zsr"),e("oCNH"),e("YRS1"),e("iA0r"),e("cm5s"),e("wN9v"),e("8PDw"),e("UUQ6"),e("tNQm");class i{constructor(l,n,e,t,i,s,u,a,r){this.route=l,this.ngLocation=n,this.format=e,this.idl=t,this.org=i,this.auth=s,this.pcrud=u,this.perm=a,this.toast=r,this.dialogSize="lg",this.translatableFields=[],this.configFields=[]}applyOrgValues(l){this.disableOrgFilter?this.orgField=null:(this.orgField||this.idlClassDef.fields.forEach(l=>{"aou"===l.class&&(this.orgField=l.name)}),this.orgField&&(this.orgFieldLabel=this.idlClassDef.field_map[this.orgField].label,this.contextOrg=this.org.get(l)||this.org.root(),this.searchOrgs={primaryOrgId:this.contextOrg.id()}))}ngOnInit(){this.idlClassDef=this.idl.classes[this.idlClass],this.pkeyField=this.idlClassDef.pkey||"id",this.translatableFields=this.idlClassDef.fields.filter(l=>l.i18n).map(l=>l.name),this.persistKey||(this.persistKey="admin."+(this.persistKeyPfx?this.persistKeyPfx+".":"")+this.idlClassDef.table),this.configFields=this.idlClassDef.fields.filter(l=>l.config_field);const l=this.route.snapshot.queryParamMap.get("gridFilters");if(l){try{this.gridFilters=JSON.parse(l)}catch(t){console.error("Invalid grid filters provided: ",l)}if(!this.defaultNewRecord){const l=this.idl.create(this.idlClass);Object.keys(this.gridFilters).forEach(n=>{l[n]&&this.pkeyField!==n&&l[n](this.gridFilters[n])}),this.defaultNewRecord=l}}const n=this.idlClassDef.permacrud;n&&n.retrieve&&(this.viewPerms=n.retrieve.perms);const e=this.route.snapshot.queryParamMap.get("contextOrg");this.checkCreatePerms(),this.applyOrgValues(Number(e)),this.dataSource||this.initDataSource(),this.grid.onRowActivate.subscribe(l=>this.showEditDialog(l))}checkCreatePerms(){this.canCreate=!1;const l=this.idlClassDef.permacrud||{},n=l.create?l.create.perms:[];0!==n.length&&this.perm.hasWorkPermAt(n,!0).then(l=>{Object.keys(l).forEach(n=>{l[n].length>0&&(this.canCreate=!0)})})}initDataSource(){this.dataSource=new t.c,this.dataSource.getRows=(l,n)=>{const e={};n.length?e[this.idlClass]=n[0].name+" "+n[0].dir:this.sortField&&(e[this.idlClass]=this.sortField);const t={offset:l.offset,limit:l.limit,order_by:e};if(!this.contextOrg&&!this.gridFilters)return this.pcrud.retrieveAll(this.idlClass,t,{fleshSelectors:!0});const i={};return this.orgField&&(i[this.orgField]=this.searchOrgs.orgIds||[this.contextOrg.id()]),this.gridFilters&&Object.keys(this.gridFilters).forEach(l=>{i[l]=this.gridFilters[l]}),this.pcrud.search(this.idlClass,i,t,{fleshSelectors:!0})}}showEditDialog(l){return this.editDialog.mode="update",this.editDialog.recordId=l[this.pkeyField](),new Promise((l,n)=>{this.editDialog.open({size:this.dialogSize}).subscribe(n=>{this.successString.current().then(l=>this.toast.success(l)),this.grid.reload(),l(n)},l=>{this.updateFailedString.current().then(l=>this.toast.danger(l)),n(l)})})}editSelected(l){const n=e=>{e&&this.showEditDialog(e).then(()=>n(l.shift()))};n(l.shift())}deleteSelected(l){l.forEach(l=>l.isdeleted(!0)),this.pcrud.autoApply(l).subscribe(l=>{console.debug("deleted: "+l),this.deleteSuccessString.current().then(l=>this.toast.success(l))},l=>{this.deleteFailedString.current().then(l=>this.toast.danger(l))},()=>this.grid.reload())}createNew(){this.editDialog.mode="create",this.editDialog.recordId=null,this.editDialog.record=null,this.editDialog.open({size:this.dialogSize}).subscribe(l=>{this.createString.current().then(l=>this.toast.success(l)),this.grid.reload()},l=>{l.dismissed||this.createErrString.current().then(l=>this.toast.danger(l))})}translate(){this.translateRowIdx=0,this.translateFieldIdx=0,this.translator.fieldName=this.translatableFields[this.translateFieldIdx],this.translator.idlObject=this.dataSource.data[this.translateRowIdx],this.translator.nextString=()=>{this.translateFieldIdx<this.translatableFields.length-1?this.translateFieldIdx++:this.translateRowIdx<this.dataSource.data.length-1&&(this.translateRowIdx++,this.translateFieldIdx=0),this.translator.idlObject=this.dataSource.data[this.translateRowIdx],this.translator.fieldName=this.translatableFields[this.translateFieldIdx]},this.translator.prevString=()=>{this.translateFieldIdx>0?this.translateFieldIdx--:this.translateRowIdx>0&&(this.translateRowIdx--,this.translateFieldIdx=0),this.translator.idlObject=this.dataSource.data[this.translateRowIdx],this.translator.fieldName=this.translatableFields[this.translateFieldIdx]},this.translator.open({size:"lg"})}configFieldRouteLink(l,n){const e=this.configFields.filter(l=>l.name===n.name)[0],t=this.idl.classes[e.class].table.split(/\./);return`${this.configLinkBasePath}/${t[0]}/${t[1]}`}configFieldRouteParams(l,n){const e=this.configFields.filter(l=>l.name===n.name)[0];let t=this.configFieldLinkedValue(l,n);t&&"object"==typeof t&&(t=t[e.key]());const i={};return i[e.key]=t,{gridFilters:JSON.stringify(i)}}configFieldLinkedValue(l,n){const e=this.configFields.filter(l=>l.name===n.name)[0];return l["has_many"===e.reltype?this.idl.classes[e.class].field_map[e.key].key||this.pkeyField:e.name]()}configFieldLinkUrl(l,n){const e=this.configFieldRouteLink(l,n),t=this.configFieldRouteParams(l,n),i=e+"?gridFilters="+encodeURIComponent(t.gridFilters);return this.ngLocation.prepareExternalUrl(i)}configLinkLabel(l,n){return"has_many"===this.configFields.filter(l=>l.name===n.name)[0].reltype?n.label:this.format.transform({value:l[n.name](),idlClass:this.idlClass,idlField:n.name})}clearGridFiltersUrl(){const l=this.idlClassDef.table.split(/\./);return this.ngLocation.prepareExternalUrl(this.configLinkBasePath+"/"+l[0]+"/"+l[1])}}},UjDu:function(l,n,e){"use strict";e.d(n,"a",(function(){return i}));var t=e("s7LF");e("8PDw"),e("cm5s");class i{constructor(l,n){this.auth=l,this.org=n,this.labelText="Library",this.hideAncestorSelector=!1,this.hideDescendantSelector=!1,this.ancestorSelectorChecked=!1,this.descendantSelectorChecked=!1,this.propagateChange=l=>{},this.propagateTouch=()=>{}}ngOnInit(){this.selectedOrgId?this.options={primaryOrgId:this.selectedOrgId}:this.auth.user()&&(this.options={primaryOrgId:this.auth.user().ws_ou()}),this.familySelectors=new t.j({includeAncestors:new t.h({value:this.ancestorSelectorChecked,disabled:this.disableAncestorSelector()}),includeDescendants:new t.h({value:this.descendantSelectorChecked,disabled:this.disableDescendantSelector()})}),this.domId||(this.domId="org-family-select-"+Math.floor(1e5*Math.random())),this.familySelectors.valueChanges.subscribe(l=>{this.emitArray()}),this.orgOnChange=l=>{this.options.primaryOrgId=l.id(),this.disableAncestorSelector()?this.includeAncestors.disable():this.includeAncestors.enable(),this.disableDescendantSelector()?this.includeDescendants.disable():this.includeDescendants.enable(),this.emitArray()},this.emitArray=()=>{this.options.orgIds=[this.options.primaryOrgId],this.includeAncestors.value&&(this.options.orgIds=this.org.ancestors(this.options.primaryOrgId,!0)),this.includeDescendants.value&&(this.options.orgIds=this.options.orgIds.concat(this.org.descendants(this.options.primaryOrgId,!0)));const l={};this.options.orgIds.forEach(n=>l[n]=!0),this.options.orgIds=Object.keys(l).map(l=>Number(l)),this.propagateChange(this.options)}}writeValue(l){l&&(this.selectedOrgId=l.primaryOrgId,this.familySelectors.patchValue({includeAncestors:!!l.includeAncestors&&l.includeAncestors,includeDescendants:!!l.includeDescendants&&l.includeDescendants}))}registerOnChange(l){this.propagateChange=l}registerOnTouched(l){this.propagateTouch=l}disableAncestorSelector(){return this.options.primaryOrgId===this.org.root().id()}disableDescendantSelector(){return 0===this.org.get(this.options.primaryOrgId).children().length}get includeAncestors(){return this.familySelectors.get("includeAncestors")}get includeDescendants(){return this.familySelectors.get("includeDescendants")}}},csFu:function(l,n,e){"use strict";e.d(n,"a",(function(){return t}));class t{}},eXX1:function(l,n,e){"use strict";e.d(n,"a",(function(){return s}));var t=e("8Y7J"),i=e("MWGh");e("9Zsr");class s{constructor(l){this.grid=l,this.onClick=new t.m,this.button=new i.e,this.button.onClick=this.onClick}set disabled(l){this.button&&(this.button.disabled=l)}ngOnInit(){this.grid?(this.button.label=this.label,this.button.action=this.action,this.grid.context.toolbarButtons.push(this.button)):console.warn("GridToolbarButtonComponent needs a [grid]")}}},t7hH:function(l,n,e){"use strict";e.d(n,"a",(function(){return i}));var t=e("MWGh");e("9Zsr");class i{constructor(l){this.grid=l}ngOnInit(){if(!this.grid)return void console.warn("GridColumnComponent needs an <eg-grid>");const l=new t.a;l.name=this.name,l.path=this.path,l.label=this.label,l.flex=this.flex,l.hidden=!0===this.hidden,l.isIndex=!0===this.index,l.cellTemplate=this.cellTemplate,l.cellContext=this.cellContext,l.disableTooltip=this.disableTooltip,l.isSortable=this.sortable,l.isFilterable=this.filterable,l.isMultiSortable=this.multiSortable,l.datatype=this.datatype,l.datePlusTime=this.datePlusTime,l.ternaryBool=this.ternaryBool,l.timezoneContextOrg=this.timezoneContextOrg,l.isAuto=!1,this.grid.context.columnSet.add(l),this.cellTemplate&&!this.grid.context.columnHasTextGenerator(l)&&console.warn('No cellTextGenerator provided for "'+l.name+'"')}}}}]);